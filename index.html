<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OFF SCRIPT — hidden game mode</title>
  <meta name="description" content="OFF SCRIPT — игровой интерфейс: где ты живёшь по сценарию и где у тебя есть реальный выбор." />

  <style>
    :root{
      --bg:#060812;
      --ink:#EAF6FF;
      --muted: rgba(234,246,255,.72);
      --panel: rgba(14, 18, 33, .78);
      --panel2: rgba(10, 14, 28, .62);
      --stroke: rgba(120,255,240,.28);
      --strokeSoft: rgba(120,255,240,.14);

      --a:#76FFF0;   /* cyan */
      --b:#FFB35C;   /* amber */
      --c:#B86BFF;   /* violet */
      --d:#FF5C8A;   /* pink */

      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --r:22px;

      --scanY: 20%;
      --scanSpeed: 2.2s;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(1100px 600px at 18% 12%, rgba(118,255,240,.14), transparent 60%),
        radial-gradient(900px 520px at 82% 22%, rgba(255,179,92,.12), transparent 62%),
        radial-gradient(1000px 700px at 60% 86%, rgba(184,107,255,.12), transparent 65%),
        radial-gradient(700px 600px at 40% 70%, rgba(255,92,138,.08), transparent 62%),
        linear-gradient(180deg, #050712 0%, #070A16 45%, #050712 100%);
      overflow-x:hidden;
    }

    /* GLOBAL FX */
    .fx{position:fixed; inset:0; pointer-events:none; z-index:0;}
    .fx.stars{
      opacity:.42; mix-blend-mode: screen;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.35) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.25) 50%, transparent 52%),
        radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.22) 50%, transparent 52%),
        radial-gradient(1px 1px at 90% 60%, rgba(255,255,255,.18) 50%, transparent 52%),
        radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.20) 50%, transparent 52%),
        radial-gradient(1px 1px at 15% 65%, rgba(255,255,255,.14) 50%, transparent 52%);
      filter: blur(.25px);
    }
    .fx.scanlines{
      opacity:.10;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.06) 0px,
        rgba(255,255,255,.06) 1px,
        transparent 2px,
        transparent 6px
      );
      mix-blend-mode: overlay;
    }
    .fx.vignette{
      background: radial-gradient(80% 70% at 50% 40%, transparent 55%, rgba(0,0,0,.55) 100%);
      opacity:.55;
    }

    .wrap{
      position:relative;
      z-index:1;
      max-width: 1160px;
      margin: 0 auto;
      padding: 34px 18px 80px;
    }

    /* TOPBAR */
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      margin-bottom:18px;
    }
    .brand{display:flex; align-items:center; gap:12px; user-select:none;}
    .sig{
      width:38px; height:38px; border-radius:12px;
      border:1px solid rgba(120,255,240,.35);
      background:
        radial-gradient(22px 18px at 30% 30%, rgba(118,255,240,.35), transparent 60%),
        radial-gradient(22px 18px at 70% 70%, rgba(255,179,92,.22), transparent 60%),
        rgba(0,0,0,.22);
      box-shadow: 0 0 18px rgba(118,255,240,.18);
      position:relative; overflow:hidden;
    }
    .sig:after{
      content:"";
      position:absolute; inset:-20%;
      background: conic-gradient(from 180deg, transparent, rgba(118,255,240,.22), transparent);
      animation: spin 5.5s linear infinite;
      opacity:.75;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .chip{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(120,255,240,.18);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(0,0,0,.20);
      white-space:nowrap;
    }

    /* HERO */
    .hero{
      border:1px solid rgba(120,255,240,.26);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(14,18,33,.72), rgba(10,14,28,.58));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      isolation:isolate;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 240px at 12% 0%, rgba(118,255,240,.18), transparent 60%),
        radial-gradient(520px 240px at 88% 0%, rgba(255,179,92,.14), transparent 60%),
        radial-gradient(520px 240px at 50% 100%, rgba(184,107,255,.12), transparent 62%);
      pointer-events:none;
      filter: blur(1px);
      z-index:0;
    }

    .gridFX{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:.22;
      background:
        linear-gradient(to right, rgba(120,255,240,.10) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(120,255,240,.08) 1px, transparent 1px);
      background-size: 64px 64px;
      mix-blend-mode: screen;
      mask: radial-gradient(70% 70% at 50% 35%, #000 55%, transparent 100%);
      z-index:1;
    }
    .screenShimmer{
      position:absolute; inset:0;
      pointer-events:none;
      z-index:2;
      opacity:.14;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.08) 0px,
          rgba(255,255,255,.08) 1px,
          transparent 2px,
          transparent 7px
        );
      mix-blend-mode: overlay;
      mask: radial-gradient(70% 70% at 50% 35%, #000 55%, transparent 100%);
    }

    /* SCAN BEAM */
    .scanBeam{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      z-index:3;
      background:
        linear-gradient(
          to bottom,
          transparent 0%,
          transparent calc(var(--scanY) - 3%),
          rgba(118,255,240,.00) calc(var(--scanY) - 2%),
          rgba(118,255,240,.22) calc(var(--scanY) - 1%),
          rgba(118,255,240,.55) var(--scanY),
          rgba(255,179,92,.22) calc(var(--scanY) + 1%),
          rgba(118,255,240,.00) calc(var(--scanY) + 2%),
          transparent calc(var(--scanY) + 4%),
          transparent 100%
        );
      mix-blend-mode: screen;
      filter: blur(.2px);
    }
    .hero.scanning .scanBeam{
      opacity:1;
      animation: scanMove var(--scanSpeed) linear infinite;
    }
    @keyframes scanMove{
      0%{ --scanY: 12%; }
      100%{ --scanY: 92%; }
    }

    .heroInner{
      position:relative;
      z-index:5;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      padding: 20px;
    }
    @media (max-width: 920px){ .heroInner{grid-template-columns:1fr;} }

    .pane{
      border:1px solid rgba(120,255,240,.18);
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }
    .pane:after{
      content:"";
      position:absolute; inset:-1px;
      border-radius: 18px;
      background: linear-gradient(90deg, rgba(118,255,240,.14), transparent 35%, rgba(255,179,92,.10));
      opacity:.55;
      pointer-events:none;
      mask: linear-gradient(#000, transparent 70%);
    }

    /* TYPO */
    h1{
      margin:0 0 6px;
      letter-spacing:.16em;
      font-weight: 950;
      font-size: 38px;
      text-transform:uppercase;
    }
    @media (max-width: 560px){ h1{font-size:30px} }

    .subline{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      margin: 0 0 14px;
      color: rgba(234,246,255,.70);
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:12px;
    }
    .badgeDot{
      width:8px; height:8px; border-radius:50%;
      background: var(--a);
      box-shadow: 0 0 14px rgba(118,255,240,.55);
    }

    .lead{
      margin: 0 0 12px;
      font-size: 15px;
      line-height: 1.55;
      color: rgba(234,246,255,.92);
      max-width: 64ch;
    }
    .lead b{color: var(--ink)}
    .mini{
      margin: 0 0 12px;
      color: var(--muted);
      line-height: 1.55;
      font-size: 13.5px;
      max-width: 70ch;
    }
    .hook{
      margin-top: 14px;
      border:1px solid rgba(255,179,92,.18);
      background: rgba(0,0,0,.18);
      border-radius: 16px;
      padding: 12px;
      color: rgba(234,246,255,.82);
      line-height: 1.55;
      font-size: 13.5px;
    }

    /* FORM */
    .formTitle{
      margin:0 0 12px;
      font-weight:850;
      letter-spacing:.10em;
      font-size:13px;
      text-transform:uppercase;
      color: rgba(234,246,255,.88);
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .statusPill{
      font-size:11px;
      border:1px solid rgba(120,255,240,.18);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(0,0,0,.20);
      color: rgba(234,246,255,.72);
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    label{
      display:block;
      font-size:12px;
      color: var(--muted);
      margin: 10px 0 7px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){ .row{grid-template-columns:1fr;} }

    input, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(120,255,240,.22);
      background: rgba(0,0,0,.22);
      color: var(--ink);
      outline:none;
      font-size:14px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }
    input:focus, select:focus{
      border-color: rgba(118,255,240,.45);
      box-shadow: 0 0 0 3px rgba(118,255,240,.10);
    }
    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="time"]::-webkit-calendar-picker-indicator{
      filter: invert(1);
      opacity:.8;
    }

    .btn{
      width:100%;
      margin-top: 14px;
      padding: 13px 14px;
      border-radius: 14px;
      border:1px solid rgba(118,255,240,.35);
      background:
        linear-gradient(90deg, rgba(118,255,240,.18), rgba(184,107,255,.14), rgba(255,179,92,.14));
      color: var(--ink);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      cursor:pointer;
      box-shadow:
        0 0 28px rgba(118,255,240,.12),
        0 0 0 1px rgba(255,255,255,.03) inset;
      position:relative;
      overflow:hidden;
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(260px 70px at 20% 50%, rgba(118,255,240,.25), transparent 60%);
      opacity:.85;
      transform: translateX(-18%);
      transition: transform .35s ease;
      pointer-events:none;
    }
    .btn:hover{ filter:brightness(1.06); }
    .btn:hover:before{ transform: translateX(18%); }
    .btn:active{ transform: translateY(1px); }

    .btn.scan{ animation: btnPulse 1.2s ease-in-out infinite; }
    @keyframes btnPulse{
      0%,100%{ box-shadow: 0 0 28px rgba(118,255,240,.12), 0 0 0 1px rgba(255,255,255,.03) inset; }
      50%{ box-shadow: 0 0 42px rgba(118,255,240,.18), 0 0 0 1px rgba(255,255,255,.03) inset; }
    }

    .tiny{
      margin-top:10px;
      font-size:12px;
      color: rgba(234,246,255,.70);
      line-height:1.45;
    }

    .progress{
      margin-top: 12px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(120,255,240,.18);
      background: rgba(0,0,0,.18);
      overflow:hidden;
      display:none;
    }
    .progress > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(118,255,240,.55), rgba(184,107,255,.45), rgba(255,179,92,.45));
      box-shadow: 0 0 18px rgba(118,255,240,.18);
      border-radius: 999px;
      transition: width .12s linear;
    }

    /* SECTIONS BELOW */
    .below{margin-top:16px}
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
    }
    .card{
      grid-column: span 6;
      border:1px solid rgba(120,255,240,.18);
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      padding: 16px;
      position:relative;
      overflow:hidden;
    }
    .card.wide{grid-column: span 12;}
    @media (max-width: 900px){ .card{grid-column: span 12;} }

    .card h3{
      margin:0 0 10px;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:13px;
    }
    .list{margin:8px 0 0; padding-left:18px; color:rgba(234,246,255,.78); line-height:1.55;}
    .list li{margin:6px 0}

    .cta{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
    }
    .cta .left{
      color: rgba(234,246,255,.78);
      line-height:1.55;
      max-width: 70ch;
    }
    .ghostBtn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(120,255,240,.22);
      background: rgba(0,0,0,.18);
      color: rgba(234,246,255,.88);
      letter-spacing:.10em;
      text-transform:uppercase;
      font-weight:850;
      cursor:pointer;
    }
    .ghostBtn:hover{filter:brightness(1.08)}

    .footer{
      margin-top:16px;
      font-size:12px;
      color: rgba(234,246,255,.58);
      line-height:1.55;
      border-top:1px solid rgba(120,255,240,.12);
      padding-top:14px;
    }
  </style>
</head>

<body>
  <div class="fx stars"></div>
  <div class="fx scanlines"></div>
  <div class="fx vignette"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="sig"></div>
        <div>
          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
            <div style="font-weight:900; letter-spacing:.12em;">OFF SCRIPT</div>
            <div class="chip">hidden game mode</div>
          </div>
          <div style="font-size:12px; color:rgba(234,246,255,.62); letter-spacing:.06em;">
            scan → status → full access
          </div>
        </div>
      </div>
      <div class="chip">RU • v1</div>
    </div>

    <section class="hero" id="hero">
      <div class="gridFX"></div>
      <div class="screenShimmer"></div>
      <div class="scanBeam"></div>

      <div class="heroInner">
        <!-- LEFT: SELLING COPY -->
        <div class="pane">
          <h1>OFF SCRIPT</h1>
          <div class="subline">
            <span class="badgeDot"></span>
            <span>hidden game mode</span>
            <span style="opacity:.55;">•</span>
            <span>без мистики</span>
            <span style="opacity:.55;">•</span>
            <span>без утешений</span>
          </div>

          <p class="lead">
            <b>если у тебя ощущение, что ты живёшь не свою жизнь — скорее всего, ты прав.</b><br>
            большинство людей не принимают решения. они просто воспроизводят сценарии.<br>
            <b>OFF SCRIPT показывает, где именно ты перестал выбирать сам.</b>
          </p>

          <p class="mini">
            это не мотивация и не терапия. здесь нет “как правильно”.<br>
            это диагностика: где ты действуешь вручную, а где тебя ведёт сценарий.
          </p>

          <div class="hook">
            <b>скептикам:</b> люди повторяются. реакции, выборы, ошибки — даже в новых обстоятельствах.
            OFF SCRIPT не ищет “почему”. он показывает <b>паттерн</b>. а паттерн — это то, что можно изменить.
          </div>
        </div>

        <!-- RIGHT: FORM -->
        <div class="pane">
          <div class="formTitle">
            <span>вход в режим</span>
            <span class="statusPill" id="statusPill">ready</span>
          </div>

          <label for="dob">дата рождения</label>
          <input id="dob" type="date" />

          <div class="row">
            <div>
              <label for="tob">время рождения (если знаешь)</label>
              <input id="tob" type="time" step="60" />
              <div class="tiny">время не обязательно, но делает картину точнее</div>
            </div>
            <div>
              <label for="tz">часовой пояс (опционально)</label>
              <select id="tz">
                <option value="">авто (по устройству)</option>
                <option value="Europe/Moscow">Europe/Moscow</option>
                <option value="Europe/Amsterdam">Europe/Amsterdam</option>
                <option value="Asia/Almaty">Asia/Almaty</option>
                <option value="Asia/Dubai">Asia/Dubai</option>
              </select>
            </div>
          </div>

          <label for="place">город рождения (опционально)</label>
          <input id="place" type="text" placeholder="например: Нальчик" />

          <button class="btn" id="go">ENTER OFF SCRIPT</button>

          <div class="progress" id="progress"><div id="bar"></div></div>

          <div class="tiny">
            без регистрации. без подписок. данные не сохраняются.
          </div>
        </div>
      </div>
    </section>

    <!-- BELOW: WHAT YOU GET + CTA -->
    <div class="below">
      <div class="grid">
        <div class="card">
          <h3>что ты увидишь</h3>
          <ul class="list">
            <li>где ты действуешь автоматически</li>
            <li>какие сценарии у тебя повторяются</li>
            <li>где ты сливаешь ресурс</li>
            <li>где у тебя есть выбор — но ты им не пользуешься</li>
          </ul>
          <p class="mini" style="margin:10px 0 0;">
            это не интерпретации. это структура.
          </p>
        </div>

        <div class="card">
          <h3>что дальше</h3>
          <p class="mini" style="margin:0 0 10px;">
            базовый скан показывает картину.<br>
            полный доступ объясняет, <b>почему</b> именно эти сценарии включены и <b>как</b> из них выходить.
          </p>
          <p class="mini" style="margin:0;">
            это не “советы”. это разбор твоей логики выбора.
          </p>
        </div>

        <div class="card wide">
          <div class="cta">
            <div class="left">
              <b>важно:</b> OFF SCRIPT не утешает и не делает вид, что “всё будет хорошо”.<br>
              если тебе нужен совет — это не сюда. если нужна ясность — нажми вход.
            </div>
            <button class="ghostBtn" id="go2">ENTER OFF SCRIPT</button>
          </div>
        </div>

        <div class="card wide">
          <div class="footer">
            OFF SCRIPT не является медицинской, психологической или эзотерической услугой. <br>
            обработка выполняется локально в браузере. данные не сохраняются.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const hero = document.getElementById('hero');
    const statusPill = document.getElementById('statusPill');
    const btn = document.getElementById('go');
    const btn2 = document.getElementById('go2');
    const progress = document.getElementById('progress');
    const bar = document.getElementById('bar');

    function getDeviceTZ(){
      try { return Intl.DateTimeFormat().resolvedOptions().timeZone || ""; }
      catch(e){ return ""; }
    }

    function makeSessionId(dob, tob){
      const r = Math.random().toString(16).slice(2,6).toUpperCase();
      const base = dob.replaceAll('-','') + (tob ? tob.replace(':','') : 'XXXX');
      return "OS-" + base + "-" + r;
    }

    function buildSessionPayload(){
      const dob = document.getElementById('dob').value;
      const tob = document.getElementById('tob').value;
      const tz  = document.getElementById('tz').value || getDeviceTZ();
      const place = document.getElementById('place').value.trim();

      if(!dob){
        alert("введи дату рождения.");
        return null;
      }

      const payload = {
        id: makeSessionId(dob, tob),
        dob,
        tob: tob || "",
        tz: tz || "",
        place: place || ""
      };

      return payload;
    }

    async function runScan(){
      const payload = buildSessionPayload();
      if(!payload) return;

      // UI start
      hero.classList.add('scanning');
      btn.classList.add('scan');
      btn.disabled = true;
      statusPill.textContent = "scanning";
      progress.style.display = "block";
      bar.style.width = "0%";

      // smooth fake progress
      let p = 0;
      const t0 = performance.now();
      const duration = 1400 + Math.random()*400;
      while(p < 100){
        const t = performance.now() - t0;
        p = Math.min(100, Math.floor((t/duration)*100));
        bar.style.width = p + "%";
        await new Promise(r => setTimeout(r, 30));
      }

      // save locally and go to map
      localStorage.setItem("offscript_session", JSON.stringify(payload));
      window.location.href = "map.html";

      // (на всякий случай) UI stop — если переход заблокирован
      hero.classList.remove('scanning');
      btn.classList.remove('scan');
      btn.disabled = false;
      statusPill.textContent = "ready";
      setTimeout(()=>{ progress.style.display = "none"; }, 350);
    }

    btn.addEventListener('click', runScan);
    btn2.addEventListener('click', ()=>{ window.scrollTo({top: 0, behavior:"smooth"}); });

    // демо (можешь удалить)
    document.getElementById('dob').value = "1996-08-01";
    document.getElementById('tob').value = "01:30";
    document.getElementById('place').value = "Нальчик";
    statusPill.textContent = "ready";
  </script>
</body>
</html>
