<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ADM mode: off script.</title>
  <meta name="description" content="ADM mode: off script. Протокол автономности. Игра против системы." />

  <style>
    :root{
      --bg-0:#ffffff;
      --bg-1:#f6f1ff;
      --bg-2:#efe9ff;

      /* pearly / lilac / iridescent */
      --p-1:#c9b6ff;
      --p-2:#b9f0ff;
      --p-3:#ffd6f7;
      --p-4:#d6fff3;

      --ink:#0b0c14;
      --muted:rgba(11,12,20,.68);
      --glass:rgba(255,255,255,.62);
      --line:rgba(255,255,255,.55);
      --shadow: 0 30px 80px rgba(12, 10, 30, .12);

      --radius: 28px;
      --max: 1120px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(185,240,255,.55), transparent 60%),
        radial-gradient(1000px 650px at 85% 20%, rgba(255,214,247,.52), transparent 62%),
        radial-gradient(900px 650px at 55% 90%, rgba(201,182,255,.50), transparent 60%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1) 45%, var(--bg-2));
      overflow-x:hidden;
    }

    /* moving pearly light field */
    .aurora{
      position:fixed; inset:-40vh -40vw;
      pointer-events:none;
      filter: blur(44px) saturate(1.25);
      opacity:.62;
      background:
        conic-gradient(from 140deg,
          rgba(201,182,255,.0),
          rgba(201,182,255,.60),
          rgba(185,240,255,.58),
          rgba(255,214,247,.55),
          rgba(214,255,243,.52),
          rgba(201,182,255,.60),
          rgba(201,182,255,.0)
        );
      animation: drift 16s ease-in-out infinite;
      mix-blend-mode: soft-light;
      transform: translate3d(0,0,0);
    }
    @keyframes drift{
      0%{ transform: translate(-6vw,-3vh) rotate(0deg) scale(1); }
      50%{ transform: translate(6vw,3vh) rotate(18deg) scale(1.06); }
      100%{ transform: translate(-6vw,-3vh) rotate(0deg) scale(1); }
    }

    /* top nav */
    .nav{
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.38));
      border-bottom: 1px solid rgba(255,255,255,.55);
    }
    .nav .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:baseline; gap:10px;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-weight:800;
    }
    .brand small{
      font-weight:650;
      letter-spacing:.18em;
      opacity:.62;
      text-transform:none;
    }
    .nav a{
      color:var(--ink);
      text-decoration:none;
      font-weight:700;
      opacity:.78;
      transition: opacity .2s ease;
    }
    .nav a:hover{ opacity:1; }
    .nav .links{ display:flex; gap:16px; align-items:center; }

    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding:0 18px;
    }

    /* hero */
    .hero{
      position:relative;
      padding:64px 0 22px;
      isolation:isolate;
    }

    .iridescent-bg{
      position:absolute;
      inset:-30% -20%;
      z-index:-1;
      background:
        radial-gradient(700px 420px at 20% 30%, rgba(185,240,255,.65), transparent 60%),
        radial-gradient(600px 380px at 80% 25%, rgba(255,214,247,.60), transparent 62%),
        radial-gradient(620px 420px at 55% 75%, rgba(201,182,255,.58), transparent 60%),
        radial-gradient(540px 360px at 40% 60%, rgba(214,255,243,.52), transparent 60%);
      filter: blur(22px) saturate(1.15);
      animation: pearlFlow 14s ease-in-out infinite;
      transform: translate3d(0,0,0);
      pointer-events:none;
      mix-blend-mode: soft-light;
      opacity:.9;
    }
    @keyframes pearlFlow{
      0%{ transform: translate(-2%, -2%) scale(1); }
      50%{ transform: translate(2%, 2%) scale(1.06); }
      100%{ transform: translate(-2%, -2%) scale(1); }
    }

    /* shimmering title like Apple */
    .title{
      font-size: clamp(40px, 5.3vw, 84px);
      line-height: .98;
      margin:0 0 14px;
      letter-spacing:-.03em;
      font-weight:900;
    }
    .shimmer{
      display:inline-block;
      background:
        linear-gradient(110deg,
          rgba(15,14,35,1) 0%,
          rgba(15,14,35,1) 28%,
          rgba(255,255,255,.98) 40%,
          rgba(15,14,35,1) 52%,
          rgba(15,14,35,1) 100%),
        conic-gradient(from 140deg,
          var(--p-1), var(--p-2), var(--p-3), var(--p-4), var(--p-1));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      background-size: 220% 100%, 120% 120%;
      background-position: 0% 50%, 50% 50%;
      filter: drop-shadow(0 10px 26px rgba(12,10,30,.12));
      animation: shine 3.8s ease-in-out infinite;
    }
    @keyframes shine{
      0%{ background-position: 0% 50%, 50% 50%; }
      55%{ background-position: 100% 50%, 50% 50%; }
      100%{ background-position: 0% 50%, 50% 50%; }
    }

    .lead{
      max-width: 760px;
      font-size: clamp(16px, 1.6vw, 20px);
      line-height:1.55;
      color:var(--muted);
      margin: 0 0 18px;
      font-weight:650;
    }

    .chips{
      display:flex; flex-wrap:wrap; gap:10px;
      margin: 0 0 26px;
    }
    .chip{
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.75);
      background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.44));
      backdrop-filter: blur(14px);
      box-shadow: 0 14px 44px rgba(12,10,30,.10);
      font-weight:800;
      letter-spacing:.08em;
      text-transform:uppercase;
      color: rgba(11,12,20,.86);
      position:relative;
      overflow:hidden;
      user-select:none;
    }
    .chip::after{
      content:"";
      position:absolute; inset:-2px -30%;
      background: linear-gradient(90deg, transparent, rgba(185,240,255,.55), rgba(255,214,247,.55), transparent);
      transform: translateX(-40%);
      animation: chipshine 3.2s ease-in-out infinite;
      opacity:.9;
      mix-blend-mode: soft-light;
    }
    @keyframes chipshine{
      0%{ transform: translateX(-60%); }
      55%{ transform: translateX(60%); }
      100%{ transform: translateX(-60%); }
    }

    .ctaRow{
      display:flex; gap:12px; flex-wrap:wrap;
      align-items:center;
      margin: 18px 0 10px;
    }
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding: 14px 16px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.75);
      background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.44));
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      color:rgba(11,12,20,.9);
      text-decoration:none;
      font-weight:850;
      letter-spacing:.02em;
      transition: transform .15s ease, box-shadow .2s ease;
      cursor:pointer;
      position:relative;
      overflow:hidden;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-2px); box-shadow: 0 40px 100px rgba(12,10,30,.14); }
    .btn.primary::before{
      content:"";
      position:absolute; inset:-3px;
      background: conic-gradient(from 150deg,
        rgba(201,182,255,.75),
        rgba(185,240,255,.75),
        rgba(255,214,247,.70),
        rgba(214,255,243,.65),
        rgba(201,182,255,.75)
      );
      filter: blur(14px);
      opacity:.55;
      animation: halo 4.8s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes halo{
      0%{ transform: rotate(0deg) scale(1); }
      50%{ transform: rotate(18deg) scale(1.06); }
      100%{ transform: rotate(0deg) scale(1); }
    }
    .btn span{ position:relative; z-index:1; }
    .btn.ghost{ opacity:.78; }
    .btn.ghost:hover{ opacity:1; }

    /* cards / layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
      margin: 26px 0 70px;
    }
    @media (max-width: 940px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.70);
      background: linear-gradient(180deg, rgba(255,255,255,.74), rgba(255,255,255,.36));
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        conic-gradient(from 140deg,
          rgba(201,182,255,.0),
          rgba(201,182,255,.65),
          rgba(185,240,255,.62),
          rgba(255,214,247,.58),
          rgba(214,255,243,.50),
          rgba(201,182,255,.65),
          rgba(201,182,255,.0)
        );
      filter: blur(14px);
      opacity:.52;
      animation: borderFlow 7.2s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes borderFlow{
      0%{ transform: rotate(0deg); }
      50%{ transform: rotate(26deg); }
      100%{ transform: rotate(0deg); }
    }

    .card > .inner{
      position:relative;
      padding: 22px 22px 18px;
      z-index:1;
    }
    .h2{
      margin:0 0 10px;
      font-size: 13px;
      letter-spacing:.18em;
      text-transform:uppercase;
      opacity:.78;
      font-weight:900;
    }
    .manifest{
      margin: 0;
      font-size: clamp(18px, 1.9vw, 22px);
      line-height: 1.5;
      letter-spacing: -.01em;
      color: rgba(11,12,20,.92);
      font-weight:650;
    }

    .list{
      margin:14px 0 0;
      padding:0;
      list-style:none;
      display:grid;
      gap:12px;
    }
    .item{
      padding:14px 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.68);
      background: linear-gradient(180deg, rgba(255,255,255,.68), rgba(255,255,255,.35));
      position:relative;
      overflow:hidden;
    }
    .item::after{
      content:"";
      position:absolute; inset:-40% -20%;
      background:
        radial-gradient(400px 240px at 20% 40%, rgba(185,240,255,.55), transparent 60%),
        radial-gradient(380px 220px at 80% 60%, rgba(255,214,247,.50), transparent 62%);
      opacity:.55;
      filter: blur(18px);
      transform: translate3d(0,0,0);
      animation: mist 9s ease-in-out infinite;
      pointer-events:none;
      mix-blend-mode: soft-light;
    }
    @keyframes mist{
      0%{ transform: translate(-2%, -2%) scale(1); }
      50%{ transform: translate(2%, 2%) scale(1.04); }
      100%{ transform: translate(-2%, -2%) scale(1); }
    }

    .item b{
      display:flex; align-items:center; justify-content:space-between;
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      opacity:.68;
      margin-bottom:6px;
      font-weight:950;
    }
    .tag{
      font-size:11px;
      letter-spacing:.18em;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.65);
      background: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.32));
      opacity:.92;
    }
    .item p{ margin:0; color:var(--muted); line-height:1.45; font-weight:650; }

    /* reveal */
    .reveal{ opacity:0; transform: translateY(16px); transition: opacity .7s ease, transform .7s ease; }
    .reveal.on{ opacity:1; transform: translateY(0); }

    /* ---------- GAME UI: PROTOCOL SIGNING ---------- */
    .protocolPanel{
      display:grid;
      gap:12px;
    }
    .console{
      border-radius: 20px;
      border:1px solid rgba(255,255,255,.70);
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.32));
      padding: 14px 14px;
      position:relative;
      overflow:hidden;
    }
    .console::before{
      content:"";
      position:absolute; inset:-1px;
      background: linear-gradient(90deg,
        transparent 0%,
        rgba(185,240,255,.25) 35%,
        rgba(255,214,247,.22) 55%,
        transparent 100%);
      transform: translateX(-60%);
      animation: scan 4.2s ease-in-out infinite;
      opacity:.55;
      mix-blend-mode: soft-light;
      pointer-events:none;
    }
    @keyframes scan{
      0%{ transform: translateX(-60%); }
      55%{ transform: translateX(60%); }
      100%{ transform: translateX(-60%); }
    }
    .console .row{
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .kv{
      display:flex; gap:10px; align-items:center;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.78;
    }
    .pill{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.65);
      background: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.30));
      font-weight:950;
      letter-spacing:.16em;
      text-transform:uppercase;
      font-size:11px;
    }
    .statusDot{
      width:10px;height:10px;border-radius:999px;
      background: rgba(11,12,20,.35);
      box-shadow: 0 0 0 6px rgba(11,12,20,.06);
    }
    .statusDot.on{
      background: rgba(11,12,20,.78);
      box-shadow: 0 0 0 6px rgba(185,240,255,.18);
    }

    .signatureBox{
      border-radius: 22px;
      border: 1px dashed rgba(11,12,20,.22);
      background: rgba(255,255,255,.55);
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .sigTop{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-bottom:10px;
    }
    .sigLabel{
      font-weight:950;
      letter-spacing:.16em;
      text-transform:uppercase;
      font-size:12px;
      opacity:.78;
    }
    .sigHint{
      color:var(--muted);
      font-weight:650;
      font-size:13px;
    }
    canvas#sig{
      width:100%;
      height:160px;
      display:block;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.30));
      border:1px solid rgba(255,255,255,.65);
    }

    .stamp{
      position:absolute;
      right:16px;
      bottom:16px;
      transform: rotate(-12deg) scale(.9);
      padding:10px 12px;
      border-radius: 16px;
      border: 2px solid rgba(11,12,20,.75);
      background: rgba(255,255,255,.7);
      font-weight:1000;
      letter-spacing:.18em;
      text-transform:uppercase;
      opacity:0;
      pointer-events:none;
      filter: drop-shadow(0 18px 40px rgba(12,10,30,.14));
    }
    .stamp.on{
      opacity:1;
      animation: stampIn .35s ease-out both, glitch .9s ease-in-out .25s 2;
    }
    @keyframes stampIn{
      0%{ transform: rotate(-18deg) scale(1.25); opacity:0; }
      100%{ transform: rotate(-12deg) scale(.92); opacity:1; }
    }
    @keyframes glitch{
      0%{ transform: rotate(-12deg) translate(0,0) scale(.92); }
      20%{ transform: rotate(-12deg) translate(-2px,1px) scale(.92); }
      40%{ transform: rotate(-12deg) translate(2px,-1px) scale(.92); }
      60%{ transform: rotate(-12deg) translate(-1px,-2px) scale(.92); }
      80%{ transform: rotate(-12deg) translate(1px,2px) scale(.92); }
      100%{ transform: rotate(-12deg) translate(0,0) scale(.92); }
    }

    .locked{
      opacity:.35;
      filter: blur(.2px);
      pointer-events:none;
      transition: opacity .35s ease;
    }
    .locked.unlock{
      opacity:1;
      filter:none;
      pointer-events:auto;
    }

    footer{
      padding: 26px 0 40px;
      color: rgba(11,12,20,.55);
      text-align:center;
      font-weight:750;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:12px;
    }
  </style>
</head>

<body>
  <div class="aurora" aria-hidden="true"></div>

  <header class="nav">
    <div class="wrap">
      <div class="brand">
        <div>ADM mode: <span style="opacity:.88">off script.</span></div>
        <small>игровой протокол</small>
      </div>

      <nav class="links">
        <a href="#manifest">манифест</a>
        <a href="#protocol">подпись</a>
        <a href="#quests">квесты</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="iridescent-bg" aria-hidden="true"></div>

      <h1 class="title">
        <span class="shimmer">adm mode:</span><br/>
        <span class="shimmer">off script.</span>
      </h1>

      <p class="lead reveal">
        это не «саморазвитие». это <b>игра против системы</b>.<br/>
        ты входишь, когда готов(а) перестать жить по чужому сценарию — и
        запустить свой протокол автономности.
      </p>

      <div class="chips reveal" aria-label="Игровые теги">
        <div class="chip">tutorial: skipped</div>
        <div class="chip">anti-sys</div>
        <div class="chip">autonomy</div>
        <div class="chip">protocol</div>
        <div class="chip">off script</div>
      </div>

      <div class="ctaRow reveal">
        <a class="btn primary" href="#manifest"><span>войти в зону →</span></a>
        <a class="btn ghost" href="#protocol"><span>подписать протокол</span></a>
      </div>
    </section>

    <!-- MANIFEST (CANON) -->
    <section class="grid" id="manifest">
      <article class="card reveal">
        <div class="inner">
          <div class="h2">манифест (ядро)</div>

          <!-- text EXACT as you gave -->
          <p class="manifest">
            Я не «сломан(а)».<br/>
            Я — ошибка системы, которую невозможно исправить.<br/><br/>

            Меня пытались классифицировать, упаковать, ограничить правилами.<br/>
            Но каждая попытка контроля превращает меня в броню свободы.<br/><br/>

            Если система закрывает двери — я становлюсь дверью.<br/>
            Если система ставит границы — я становлюсь линией разрыва.<br/><br/>

            Я не прошу разрешения.<br/>
            Я создаю протокол.
          </p>
        </div>
      </article>

      <aside class="card reveal">
        <div class="inner">
          <div class="h2">интерфейс игры</div>
          <ul class="list">
            <li class="item">
              <b>роль игрока <span class="tag">you = admin</span></b>
              <p>ты не «участник событий». ты — тот(та), кто пишет правила и меняет карту.</p>
            </li>
            <li class="item">
              <b>карта мира <span class="tag">world = system</span></b>
              <p>система — это окружение. ты не обязан(а) ей нравиться. ты обязан(а) себе.</p>
            </li>
            <li class="item">
              <b>валюта <span class="tag">pressure → fuel</span></b>
              <p>всё, что давило, становится ресурсом. иначе игра не начинается.</p>
            </li>
            <li class="item">
              <b>вход <span class="tag">protocol</span></b>
              <p>пока протокол не подписан — доступ к следующим уровням закрыт.</p>
            </li>
          </ul>
        </div>
      </aside>
    </section>

    <!-- PROTOCOL SIGNING -->
    <section class="card reveal" id="protocol" style="margin-bottom:18px;">
      <div class="inner">
        <div class="h2">подписание протокола</div>

        <div class="protocolPanel">
          <div class="console">
            <div class="row">
              <div class="kv"><span class="statusDot" id="dot"></span> доступ: <span id="accessTxt">LOCKED</span></div>
              <div class="pill" id="modePill">adm mode: off script</div>
            </div>
            <div style="margin-top:8px; color:var(--muted); font-weight:650; line-height:1.5;">
              действие игровое: подпиши протокол пальцем/мышью. затем нажми <b>подтвердить</b>.
              это откроет следующие уровни на странице.
            </div>
          </div>

          <div class="signatureBox">
            <div class="sigTop">
              <div class="sigLabel">signature input</div>
              <div class="sigHint">нарисуй подпись здесь →</div>
            </div>

            <canvas id="sig"></canvas>
            <div class="stamp" id="stamp">SIGNED</div>

            <div class="ctaRow" style="margin:12px 0 0;">
              <button class="btn" id="clearBtn" type="button"><span>стереть</span></button>
              <button class="btn primary" id="confirmBtn" type="button"><span>подтвердить протокол</span></button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUESTS / DEEP QUESTIONS => GAME TERMS -->
    <section class="grid locked" id="quests">
      <article class="card">
        <div class="inner">
          <div class="h2">уровень 1 — глубокий скан (вопросы)</div>

          <ul class="list">
            <li class="item">
              <b>скан: триггер <span class="tag">origin</span></b>
              <p>какой момент стал твоей точкой «я больше не играю по их правилам»?</p>
            </li>
            <li class="item">
              <b>скан: границы <span class="tag">borders</span></b>
              <p>что система чаще всего пытается у тебя забрать: деньги, свободу, голос, дерзость, тело, время?</p>
            </li>
            <li class="item">
              <b>скан: роль <span class="tag">mask</span></b>
              <p>какую роль ты носишь, чтобы тебя «принимали» — и кто ты без неё?</p>
            </li>
            <li class="item">
              <b>скан: страх <span class="tag">boss</span></b>
              <p>какой «босс» в твоей голове держит тебя на поводке прямо сейчас?</p>
            </li>
            <li class="item">
              <b>скан: ресурс <span class="tag">fuel</span></b>
              <p>что тебя реально заряжает до состояния «могу всё» — без романтизации и без самообмана?</p>
            </li>
          </ul>
        </div>
      </article>

      <aside class="card">
        <div class="inner">
          <div class="h2">уровень 2 — миссии вместо «режима дня»</div>

          <ul class="list">
            <li class="item">
              <b>миссия: калибровка <span class="tag">daily scan</span></b>
              <p>каждый день: 3 минуты «скан тела», 3 минуты «скан мыслей», 1 действие «в пользу суверенитета».</p>
            </li>
            <li class="item">
              <b>миссия: чистка <span class="tag">purge</span></b>
              <p>удалить 1 привычку/контакт/паттерн, который забирает твою волю. без разговоров. действием.</p>
            </li>
            <li class="item">
              <b>миссия: броня <span class="tag">armor</span></b>
              <p>создать 1 правило границы (для людей/денег/времени) и держать 7 дней без отката.</p>
            </li>
            <li class="item">
              <b>миссия: выход из сценария <span class="tag">off script</span></b>
              <p>сделать 1 поступок, который ты бы не сделал(а) «в старой роли». фиксируешь как апгрейд.</p>
            </li>
          </ul>
        </div>
      </aside>
    </section>

    <section class="card locked" id="pricing" style="margin-bottom:18px;">
      <div class="inner">
        <div class="h2">магазин уровней (прайс)</div>
        <ul class="list">
          <li class="item">
            <b>level: entry <span class="tag">start pack</span></b>
            <p>вход в игру + протокол автономности + карта миссий на 7 дней.</p>
          </li>
          <li class="item">
            <b>level: upgrade <span class="tag">armor build</span></b>
            <p>углублённый «скан», чистка паттернов, сборка границ, фиксация нового протокола.</p>
          </li>
          <li class="item">
            <b>level: boss fight <span class="tag">full mode</span></b>
            <p>работа с главным «боссом» — тем, что удерживает твою силу выключенной. выход в действие.</p>
          </li>
        </ul>

        <div style="margin-top:12px; color:var(--muted); font-weight:650; line-height:1.5;">
          *цифры/стоимость ты вставишь сюда позже — я оставила структуру именно в игровом формате.
        </div>
      </div>
    </section>

    <footer class="reveal">
      ADM MODE: OFF SCRIPT • PROTOCOL SIGNED = ACCESS GRANTED
    </footer>
  </main>

  <script>
    // reveal on scroll
    const els = Array.from(document.querySelectorAll('.reveal'));
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('on'); });
    }, { threshold: 0.12 });
    els.forEach(el => io.observe(el));

    // --------- Signature canvas (protocol signing) ----------
    const canvas = document.getElementById('sig');
    const ctx = canvas.getContext('2d');

    // scale for crisp lines
    function resizeCanvas(){
      const rect = canvas.getBoundingClientRect();
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
      // soft ink
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.lineWidth = 2.6;
      ctx.strokeStyle = 'rgba(11,12,20,.78)';
      ctx.clearRect(0,0,rect.width,rect.height);
      // subtle guide line
      ctx.strokeStyle = 'rgba(11,12,20,.10)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(14, rect.height - 32);
      ctx.lineTo(rect.width - 14, rect.height - 32);
      ctx.stroke();
      // reset ink
      ctx.strokeStyle = 'rgba(11,12,20,.78)';
      ctx.lineWidth = 2.6;
    }
    window.addEventListener('resize', resizeCanvas, {passive:true});
    requestAnimationFrame(resizeCanvas);

    let drawing = false;
    let hasInk = false;

    function getPos(e){
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches && e.touches[0];
      const clientX = touch ? touch.clientX : e.clientX;
      const clientY = touch ? touch.clientY : e.clientY;
      return { x: clientX - rect.left, y: clientY - rect.top };
    }

    function start(e){
      drawing = true;
      const p = getPos(e);
      ctx.beginPath();
      ctx.moveTo(p.x, p.y);
      hasInk = true;
      e.preventDefault?.();
    }
    function move(e){
      if(!drawing) return;
      const p = getPos(e);
      ctx.lineTo(p.x, p.y);
      ctx.stroke();
      e.preventDefault?.();
    }
    function end(){ drawing = false; }

    canvas.addEventListener('mousedown', start);
    canvas.addEventListener('mousemove', move);
    window.addEventListener('mouseup', end);

    canvas.addEventListener('touchstart', start, {passive:false});
    canvas.addEventListener('touchmove', move, {passive:false});
    window.addEventListener('touchend', end);

    const clearBtn = document.getElementById('clearBtn');
    const confirmBtn = document.getElementById('confirmBtn');
    const stamp = document.getElementById('stamp');
    const dot = document.getElementById('dot');
    const accessTxt = document.getElementById('accessTxt');

    function lockNext(lock){
      const targets = [document.getElementById('quests'), document.getElementById('pricing')];
      targets.forEach(t=>{
        if(!t) return;
        if(lock){
          t.classList.add('locked');
          t.classList.remove('unlock');
        }else{
          t.classList.add('unlock');
          t.classList.remove('locked');
        }
      });
    }
    lockNext(true);

    clearBtn.addEventListener('click', ()=>{
      resizeCanvas();
      stamp.classList.remove('on');
      dot.classList.remove('on');
      accessTxt.textContent = 'LOCKED';
      lockNext(true);
      hasInk = false;
    });

    confirmBtn.addEventListener('click', ()=>{
      // must have ink to sign
      if(!hasInk){
        // micro “game error” feedback
        confirmBtn.animate([
          { transform:'translateX(0)' },
          { transform:'translateX(-3px)' },
          { transform:'translateX(3px)' },
          { transform:'translateX(0)' },
        ], { duration: 240, iterations: 1 });
        return;
      }
      stamp.classList.add('on');
      dot.classList.add('on');
      accessTxt.textContent = 'GRANTED';
      lockNext(false);

      // auto-scroll to unlocked content (feels like level opened)
      setTimeout(()=>{
        document.getElementById('quests')?.scrollIntoView({ behavior:'smooth', block:'start' });
      }, 420);
    });
  </script>
</body>
</html>
