<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PRTCL 108 — ADM MODE</title>
  <meta name="description" content="PRTCL 108 — интерфейс самосканирования: параметры, роль, навыки и System Opponent. Без мистики.">

  <style>
    :root{
      --bg0:#05070c;
      --bg1:#070b12;
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.14);

      --text:#e9eef7;
      --muted: rgba(233,238,247,.70);
      --dim: rgba(233,238,247,.50);

      --ice:#c8f5ff;
      --lilac:#d9c6ff;
      --pearl:#f4f1ff;
      --warn:#ffd36a;
      --ok:#86ffd6;

      --shadow: 0 20px 70px rgba(0,0,0,.55);
      --radius: 18px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 5%, rgba(217,198,255,.22), transparent 60%),
        radial-gradient(1000px 700px at 85% 10%, rgba(200,245,255,.18), transparent 60%),
        radial-gradient(900px 600px at 55% 120%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* subtle noise */
    body:before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.08'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.45;
    }

    .wrap{
      width:min(1100px, 92vw);
      margin: 0 auto;
      padding: 34px 0 80px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 22px;
    }
    .badge{
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border:1px solid var(--stroke);
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      backdrop-filter: blur(14px);
    }
    .dot{
      width:9px; height:9px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--ok), rgba(134,255,214,.1));
      box-shadow: 0 0 18px rgba(134,255,214,.35);
    }
    .badge b{ font-family:var(--mono); font-size:12px; letter-spacing:.08em; }
    .badge span{ color:var(--muted); font-size:12px; font-family:var(--mono); letter-spacing:.06em; }

    .links{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .ghost{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      font-family: var(--mono);
      font-size:12px;
      letter-spacing:.06em;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .ghost:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.22); }

    /* HERO */
    .hero{
      position:relative;
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      overflow:hidden;
      padding: 34px 26px 22px;
    }
    .hero:after{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(600px 240px at 18% 18%, rgba(217,198,255,.18), transparent 55%),
        radial-gradient(520px 240px at 75% 22%, rgba(200,245,255,.14), transparent 55%),
        linear-gradient(90deg, rgba(255,255,255,.10), transparent 35%, rgba(255,255,255,.08));
      opacity:.55;
      pointer-events:none;
      mask-image: linear-gradient(180deg, black, transparent 70%);
    }

    .gridlines{
      position:absolute; inset:0;
      background:
        linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px);
      background-size: 44px 44px;
      opacity:.20;
      pointer-events:none;
      mask-image: radial-gradient(500px 260px at 30% 22%, black, transparent 70%);
    }

    .hero-head{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:18px;
      position:relative;
      z-index:2;
    }

    .title{
      line-height:1;
    }
    .title h1{
      margin:0;
      font-size: clamp(34px, 6vw, 56px);
      letter-spacing: -0.02em;
      font-weight: 760;
    }
    /* shimmering text */
    .shimmer{
      background: linear-gradient(90deg,
        rgba(244,241,255,.85),
        rgba(200,245,255,.95),
        rgba(217,198,255,.95),
        rgba(244,241,255,.85)
      );
      background-size: 260% 100%;
      -webkit-background-clip: text;
      background-clip:text;
      color: transparent;
      animation: shimmer 6.5s ease-in-out infinite;
      text-shadow: 0 0 30px rgba(200,245,255,.10);
    }
    @keyframes shimmer{
      0%{ background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }

    .sub{
      margin-top:10px;
      font-family: var(--mono);
      color: var(--muted);
      letter-spacing:.10em;
      font-size:12px;
    }

    .mantra{
      margin-top: 18px;
      font-size: 18px;
      line-height: 1.35;
      color: rgba(233,238,247,.92);
    }
    .mantra b{ font-weight: 760; }
    .mantra .mono{
      font-family: var(--mono);
      font-size: 13px;
      color: var(--dim);
      letter-spacing:.08em;
      display:block;
      margin-top:10px;
    }

    .hero-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 22px;
      position:relative;
      z-index:2;
    }

    .btn{
      border:1px solid rgba(255,255,255,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.08em;
      font-size: 12px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      position:relative;
      overflow:hidden;
    }
    .btn:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(120px 60px at 20% 20%, rgba(200,245,255,.22), transparent 60%),
                  radial-gradient(120px 60px at 80% 30%, rgba(217,198,255,.20), transparent 60%);
      opacity:.7;
      pointer-events:none;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.36);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .btn.primary{
      border-color: rgba(200,245,255,.35);
      box-shadow: 0 0 0 1px rgba(200,245,255,.10) inset;
    }

    .hint{
      margin-top: 10px;
      font-family: var(--mono);
      color: var(--dim);
      font-size:12px;
      letter-spacing:.06em;
      position:relative;
      z-index:2;
    }

    /* TERMINAL reveal */
    .terminal{
      margin-top: 18px;
      border:1px solid rgba(255,255,255,.18);
      border-radius: var(--radius);
      background: rgba(255,255,255,.035);
      backdrop-filter: blur(14px);
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      overflow:hidden;
      transform-origin: top;
      max-height: 0;
      opacity: 0;
      transform: translateY(-10px) scaleY(.98);
      transition: max-height .65s cubic-bezier(.2,.9,.2,1),
                  opacity .35s ease,
                  transform .45s ease;
    }
    .terminal.open{
      max-height: 520px; /* enough for content */
      opacity: 1;
      transform: translateY(0) scaleY(1);
    }

    .term-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .term-left{
      display:flex; align-items:center; gap:10px;
    }
    .lights{ display:flex; gap:6px; }
    .light{ width:10px; height:10px; border-radius:50%; opacity:.85; }
    .l1{ background: rgba(255,120,120,.85); }
    .l2{ background: rgba(255,210,120,.85); }
    .l3{ background: rgba(120,255,200,.85); }
    .term-title{
      font-family: var(--mono);
      font-size:12px;
      letter-spacing:.10em;
      color: rgba(233,238,247,.85);
    }
    .term-right{
      display:flex; align-items:center; gap:10px;
      font-family: var(--mono);
      font-size:12px;
      color: var(--dim);
      letter-spacing:.06em;
    }

    .term-body{
      padding: 14px;
      display:grid;
      gap: 12px;
    }

    .formgrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 760px){
      .formgrid{ grid-template-columns: 1fr; }
      .hero{ padding: 28px 16px 18px; }
    }

    .field{
      border:1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      background: rgba(255,255,255,.035);
      padding: 12px;
      transition: border-color .15s ease, background .15s ease;
    }
    .field:focus-within{
      border-color: rgba(200,245,255,.28);
      background: rgba(255,255,255,.05);
    }
    label{
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-family: var(--mono);
      font-size:11px;
      letter-spacing:.10em;
      color: rgba(233,238,247,.72);
      margin-bottom: 8px;
    }
    label small{
      color: var(--dim);
      letter-spacing:.06em;
      font-size:11px;
      font-family: var(--mono);
    }
    input{
      width:100%;
      border:0;
      outline:0;
      background: transparent;
      color: var(--text);
      font-size: 15px;
      padding: 4px 0 2px;
      font-family: var(--sans);
    }
    input::placeholder{ color: rgba(233,238,247,.35); }

    .term-footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px 14px;
      border-top: 1px solid rgba(255,255,255,.10);
    }

    .note{
      font-family: var(--mono);
      color: var(--dim);
      font-size:11px;
      letter-spacing:.06em;
      max-width: 60ch;
    }

    .scanbtn{
      border:1px solid rgba(200,245,255,.30);
      background: linear-gradient(180deg, rgba(200,245,255,.16), rgba(255,255,255,.06));
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.10em;
      font-size:12px;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      white-space:nowrap;
    }
    .scanbtn:hover{
      transform: translateY(-1px);
      border-color: rgba(200,245,255,.44);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .scanbtn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    /* scanning line */
    .scanline{
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      overflow:hidden;
      position:relative;
    }
    .scanline > i{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(217,198,255,.0), rgba(200,245,255,.65), rgba(217,198,255,.35), rgba(217,198,255,.0));
      filter: blur(.0px);
      opacity:.95;
      transition: width .7s ease;
    }

    /* CONTENT sections */
    .section{
      margin-top: 18px;
      border:1px solid rgba(255,255,255,.14);
      border-radius: var(--radius);
      background: rgba(255,255,255,.03);
      box-shadow: 0 18px 50px rgba(0,0,0,.25);
      backdrop-filter: blur(14px);
      padding: 18px 16px;
    }
    .section h2{
      margin:0 0 10px;
      font-size: 16px;
      letter-spacing: -.01em;
    }
    .section p{
      margin:0;
      color: rgba(233,238,247,.80);
      line-height:1.55;
    }
    .bul{
      margin: 12px 0 0;
      padding-left: 18px;
      color: rgba(233,238,247,.85);
      line-height:1.6;
    }
    .bul li{ margin: 6px 0; }
    .kbd{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(233,238,247,.78);
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.04);
      padding: 2px 8px;
      border-radius: 999px;
      display:inline-block;
      letter-spacing:.06em;
    }

    /* MULTIPASS preview */
    .out{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
    }
    @media (max-width: 980px){
      .out{ grid-template-columns: 1fr; }
    }

    .card{
      border:1px solid rgba(255,255,255,.16);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: 0 22px 70px rgba(0,0,0,.35);
      backdrop-filter: blur(16px);
      overflow:hidden;
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(420px 220px at 20% 10%, rgba(200,245,255,.16), transparent 60%),
        radial-gradient(420px 220px at 80% 20%, rgba(217,198,255,.14), transparent 60%),
        linear-gradient(90deg, rgba(255,255,255,.08), transparent 35%, rgba(255,255,255,.06));
      opacity:.55;
      pointer-events:none;
      mask-image: linear-gradient(180deg, black, transparent 72%);
    }
    .mp-head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      position:relative;
      z-index:2;
    }
    .mp-head .left{
      display:flex; flex-direction:column; gap:6px;
    }
    .mp-title{
      font-family: var(--mono);
      letter-spacing:.12em;
      font-size: 12px;
      color: rgba(233,238,247,.85);
    }
    .mp-id{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--dim);
      letter-spacing:.08em;
    }
    .mp-status{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing:.10em;
      color: rgba(134,255,214,.85);
      border:1px solid rgba(134,255,214,.22);
      background: rgba(134,255,214,.06);
      padding: 6px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }

    .mp-body{
      padding: 14px 16px 16px;
      position:relative;
      z-index:2;
      display:grid;
      gap: 12px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 600px){
      .row{ grid-template-columns: 1fr; }
    }
    .kv{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.03);
      padding: 12px;
    }
    .k{
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.10em;
      color: rgba(233,238,247,.70);
      margin-bottom: 8px;
    }
    .v{
      font-size: 15px;
      color: rgba(233,238,247,.90);
      line-height:1.35;
    }
    .v.mono{ font-family: var(--mono); font-size: 13px; letter-spacing:.06em; color: rgba(233,238,247,.82); }

    .list{
      margin: 0;
      padding-left: 16px;
      line-height:1.6;
      color: rgba(233,238,247,.85);
    }
    .list li{ margin: 6px 0; }

    .seal{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      padding: 12px 16px;
      position:relative;
      z-index:2;
    }
    .stamp{
      display:flex;
      flex-direction:column;
      gap:4px;
      border:1px dashed rgba(200,245,255,.30);
      background: rgba(200,245,255,.04);
      padding: 10px 12px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.10em;
      font-size: 11px;
      color: rgba(233,238,247,.82);
      text-transform: uppercase;
    }
    .stamp b{ color: rgba(200,245,255,.92); letter-spacing:.12em; }
    .sig{
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.10em;
      color: rgba(233,238,247,.60);
      text-align:right;
    }

    .aside{
      padding: 16px;
    }
    .aside h3{
      margin:0 0 8px;
      font-size: 14px;
      letter-spacing:-.01em;
    }
    .aside p{ margin:0; color: rgba(233,238,247,.78); line-height:1.55; }
    .tiny{
      margin-top: 10px;
      font-family: var(--mono);
      color: rgba(233,238,247,.55);
      font-size: 11px;
      letter-spacing:.06em;
    }

    /* FAQ modal */
    dialog{
      width:min(920px, 92vw);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 18px;
      background: rgba(8,10,16,.82);
      color: var(--text);
      box-shadow: 0 40px 120px rgba(0,0,0,.65);
      backdrop-filter: blur(18px);
      padding: 0;
    }
    dialog::backdrop{
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(3px);
    }
    .modal-head{
      padding: 14px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .modal-head b{
      font-family: var(--mono);
      letter-spacing:.12em;
      font-size: 12px;
      color: rgba(233,238,247,.86);
    }
    .x{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-family: var(--mono);
      letter-spacing:.06em;
      font-size: 12px;
    }
    .modal-body{
      padding: 14px;
      display:grid;
      gap: 10px;
    }
    details{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.03);
      padding: 12px 12px;
    }
    summary{
      cursor:pointer;
      font-weight: 650;
    }
    details p{
      margin: 10px 0 0;
      color: rgba(233,238,247,.78);
      line-height:1.55;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="badge" aria-label="PRTCL 108 status">
        <span class="dot"></span>
        <b>PRTCL 108</b>
        <span>ADM MODE</span>
      </div>

      <div class="links">
        <button class="ghost" id="btnFaq" type="button">ОТКРЫТЬ FAQ</button>
        <button class="ghost" id="btnFocus" type="button">ПЕРЕЙТИ К ИНИЦИАЦИИ</button>
      </div>
    </div>

    <section class="hero" id="hero">
      <div class="gridlines" aria-hidden="true"></div>

      <div class="hero-head">
        <div class="title">
          <h1 class="shimmer">PRTCL 108</h1>
          <div class="sub">ADM MODE · ИНТЕРФЕЙС ДОСТУПА</div>

          <div class="mantra">
            <b>Я не запрашиваю допуск.</b><br/>
            <b>Я создаю протокол.</b>
            <span class="mono">STATUS: READY</span>
          </div>

          <div class="hero-actions">
            <button class="btn primary" id="btnInit" type="button">ИНИЦИИРОВАТЬ СКАН</button>
            <button class="btn" id="btnExplain" type="button">ЧТО ЭТО</button>
          </div>

          <div class="hint">Сканирование занимает ~30 секунд. Результат формируется автоматически.</div>
        </div>

        <div class="badge" style="align-self:flex-start">
          <span class="dot" style="background: radial-gradient(circle at 30% 30%, var(--warn), rgba(255,211,106,.1)); box-shadow:0 0 18px rgba(255,211,106,.25)"></span>
          <b>NO MYSTIC</b>
          <span>только структура</span>
        </div>
      </div>

      <!-- TERMINAL -->
      <div class="terminal" id="terminal" aria-hidden="true">
        <div class="term-head">
          <div class="term-left">
            <div class="lights" aria-hidden="true">
              <span class="light l1"></span>
              <span class="light l2"></span>
              <span class="light l3"></span>
            </div>
            <div class="term-title">ТЕРМИНАЛ ИНИЦИАЦИИ</div>
          </div>
          <div class="term-right">
            <span class="kbd">ENTER</span><span>для запуска</span>
          </div>
        </div>

        <div class="term-body">
          <div class="formgrid">
            <div class="field">
              <label for="dob">ДАТА АКТИВАЦИИ <small>дата рождения</small></label>
              <input id="dob" inputmode="numeric" placeholder="ДД.ММ.ГГГГ" autocomplete="bday"/>
            </div>
            <div class="field">
              <label for="origin">ТОЧКА ПРОИСХОЖДЕНИЯ <small>город, страна</small></label>
              <input id="origin" placeholder="Например: Нальчик, Россия" autocomplete="off"/>
            </div>
            <div class="field">
              <label for="callsign">ИМЯ ПЕРСОНАЖА <small>можно псевдоним</small></label>
              <input id="callsign" placeholder="Например: MARATINA / ERRORLESS" autocomplete="nickname"/>
            </div>
            <div class="field">
              <label for="mode">РЕЖИМ <small>фиксирован</small></label>
              <input id="mode" value="ADM MODE" readonly/>
            </div>
          </div>

          <div class="scanline" aria-label="scan progress"><i id="scanbar"></i></div>
        </div>

        <div class="term-footer">
          <div class="note">
            Данные используются только для формирования персональной конфигурации.
            Никакие профили не создаются.
          </div>
          <button class="scanbtn" id="btnScan" type="button" disabled>ЗАПУСТИТЬ СКАН</button>
        </div>
      </div>
    </section>

    <!-- EXPLANATION -->
    <section class="section" id="explain">
      <h2>Что это</h2>
      <p>
        PRTCL 108 — это <span class="kbd">экран статуса персонажа</span>.
        Он показывает текущее состояние так же ясно, как в игре показывают героя:
        параметры, скиллы, утечки ресурса и точку сопротивления — <span class="kbd">System Opponent</span>.
      </p>
      <ul class="bul">
        <li><b>Это не советы.</b> Не прогноз. Не интерпретация.</li>
        <li><b>Это текущий билд.</b> С ним проще действовать точно, а не на ощупь.</li>
        <li><b>Без мистики.</b> Только структура и понятные термины.</li>
      </ul>
    </section>

    <!-- OUTPUT -->
    <div class="out" id="output" hidden>
      <div class="card">
        <div class="mp-head">
          <div class="left">
            <div class="mp-title">MULTIPASS · PRTCL 108</div>
            <div class="mp-id" id="mpId">MP-108-—</div>
          </div>
          <div class="mp-status" id="mpStatus">STATUS: ACTIVE</div>
        </div>

        <div class="mp-body">
          <div class="row">
            <div class="kv">
              <div class="k">ИМЯ ПЕРСОНАЖА</div>
              <div class="v" id="outName">—</div>
            </div>
            <div class="kv">
              <div class="k">ТОЧКА ПРОИСХОЖДЕНИЯ</div>
              <div class="v" id="outOrigin">—</div>
            </div>
          </div>

          <div class="row">
            <div class="kv">
              <div class="k">КЛЮЧЕВАЯ РОЛЬ</div>
              <div class="v" id="outRole">—</div>
            </div>
            <div class="kv">
              <div class="k">SYSTEM OPPONENT</div>
              <div class="v" id="outOpp">—</div>
              <div class="v mono" id="outPhase" style="margin-top:6px;">PHASE: —</div>
            </div>
          </div>

          <div class="kv">
            <div class="k">ПАРАМЕТРЫ</div>
            <ul class="list" id="outStats"></ul>
          </div>

          <div class="row">
            <div class="kv">
              <div class="k">ACTIVE SKILLS</div>
              <ul class="list" id="outActive"></ul>
            </div>
            <div class="kv">
              <div class="k">PASSIVE SKILLS</div>
              <ul class="list" id="outPassive"></ul>
            </div>
          </div>

          <div class="kv">
            <div class="k">ТЕКУЩИЙ ВЕКТОР</div>
            <div class="v" id="outVector">—</div>
          </div>
        </div>

        <div class="seal">
          <div class="stamp">
            <b>ACCESS VERIFIED</b>
            <span id="stampLine">PRTCL 108 · ADM MODE</span>
            <span id="stampDate">—</span>
          </div>
          <div class="sig">PRTCL 108<br/>SIGN: VERIFIED</div>
        </div>
      </div>

      <div class="card">
        <div class="aside">
          <h3>Что теперь</h3>
          <p>
            Это не «диагноз» и не «ярлык». Это твой текущий билд.
            С ним проще понять, что усиливать, а что перестать делать.
          </p>
          <div class="tiny">
            Ясность — самый рарный айтем в игре.<br/>
            Здесь она появляется без мистики — просто потому что структура стала видимой.
          </div>

          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="ghost" id="btnRescan" type="button">ПЕРЕСКАНИРОВАТЬ</button>
            <button class="ghost" id="btnFaq2" type="button">СЛОВАРЬ / FAQ</button>
          </div>
        </div>
      </div>
    </div>

    <dialog id="faq">
      <div class="modal-head">
        <b>БАЗА ПРОТОКОЛА · FAQ</b>
        <button class="x" id="closeFaq" type="button">ЗАКРЫТЬ</button>
      </div>
      <div class="modal-body">
        <details open>
          <summary>Что такое PRTCL 108?</summary>
          <p>Это интерфейс самосканирования, который показывает текущую конфигурацию: параметры, роль, навыки и точку сопротивления (System Opponent). Без мистики, без трактовок, без «как правильно жить».</p>
        </details>

        <details>
          <summary>Что такое MULTIPASS?</summary>
          <p>Персональное удостоверение-доступ: в нём зафиксированы твой статус, ключевая роль, параметры, активные/пассивные навыки и текущий вектор.</p>
        </details>

        <details>
          <summary>Что такое ADM MODE?</summary>
          <p>Режим управления. Система перестаёт работать «на автомате», и ты начинаешь видеть, из какого билда действуешь.</p>
        </details>

        <details>
          <summary>Параметры — это что?</summary>
          <p>Это рабочие показатели персонажа (например: ресурс, фокус, устойчивость). Они не «оценка человека», а отображение текущего состояния.</p>
        </details>

        <details>
          <summary>Active / Passive Skills?</summary>
          <p><b>Active</b> — навыки, которые ты включаешь осознанно. <b>Passive</b> — навыки, которые работают в фоне автоматически.</p>
        </details>

        <details>
          <summary>Что такое System Opponent?</summary>
          <p>Основная точка сопротивления текущего этапа. Не враг и не «проблема». Это место, где прогресс даётся сложнее — и поэтому требует точности.</p>
        </details>

        <details>
          <summary>Это тест? Это курс?</summary>
          <p>Нет. Здесь нет обучения, обещаний и «волшебных результатов». Это статус-экран: он показывает, что происходит сейчас.</p>
        </details>
      </div>
    </dialog>

  </div>

  <script>
    // --------- helpers ----------
    const $ = (id) => document.getElementById(id);
    const clamp = (n, a, b) => Math.max(a, Math.min(b, n));

    // deterministic hash from input -> stable "unique" output
    function hashStr(str){
      let h = 2166136261;
      for (let i=0; i<str.length; i++){
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return (h >>> 0);
    }
    function mulberry32(seed){
      return function(){
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      }
    }
    function pick(rng, arr){
      return arr[Math.floor(rng()*arr.length)];
    }
    function pickN(rng, arr, n){
      const a = arr.slice();
      // Fisher-Yates partial
      for (let i=a.length-1; i>0; i--){
        const j = Math.floor(rng()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a.slice(0, n);
    }
    function romanTier(x){
      const r = ["I","II","III","IV","V"];
      return r[clamp(Math.round(x)-1,0,4)];
    }

    // --------- UI refs ----------
    const btnInit = $("btnInit");
    const terminal = $("terminal");
    const btnScan = $("btnScan");
    const scanbar = $("scanbar");
    const output = $("output");

    const dob = $("dob");
    const origin = $("origin");
    const callsign = $("callsign");

    const btnFaq = $("btnFaq");
    const btnFaq2 = $("btnFaq2");
    const faq = $("faq");
    const closeFaq = $("closeFaq");

    const btnExplain = $("btnExplain");
    const explain = $("explain");
    const btnFocus = $("btnFocus");
    const btnRescan = $("btnRescan");

    // --------- terminal open animation ----------
    let terminalOpened = false;
    function openTerminal(){
      if (terminalOpened) return;
      terminalOpened = true;
      terminal.classList.add("open");
      terminal.setAttribute("aria-hidden", "false");

      // subtle "boot" effect on progress bar
      scanbar.style.width = "12%";
      setTimeout(()=> scanbar.style.width = "0%", 260);

      // focus first field
      setTimeout(()=> dob.focus(), 420);

      // scroll into view smoothly
      setTimeout(()=> terminal.scrollIntoView({behavior:"smooth", block:"nearest"}), 120);
    }

    btnInit.addEventListener("click", openTerminal);

    btnFocus.addEventListener("click", () => {
      // if terminal is not open, open it, then focus
      openTerminal();
    });

    btnExplain.addEventListener("click", () => {
      explain.scrollIntoView({behavior:"smooth", block:"start"});
    });

    // enable scan when required fields filled
    function validate(){
      const ok = dob.value.trim().length >= 8 && origin.value.trim().length >= 2 && callsign.value.trim().length >= 2;
      btnScan.disabled = !ok;
    }
    [dob, origin, callsign].forEach(el => el.addEventListener("input", validate));

    // Allow ENTER to trigger scan when terminal open
    document.addEventListener("keydown", (e)=>{
      if (!terminalOpened) return;
      if (e.key === "Enter" && !btnScan.disabled){
        e.preventDefault();
        runScan();
      }
    });

    // --------- generation vocab ----------
    const ROLES = [
      "ОПЕРАТОР ПРОЦЕССА",
      "АРХИТЕКТОР СИСТЕМ",
      "КАРТОГРАФ ВАРИАНТОВ",
      "СКАНЕР СРЕДЫ",
      "ИНИЦИАТОР СДВИГА",
      "СБОРЩИК РЕАЛЬНОСТИ",
      "СТАБИЛИЗАТОР ПОТОКА",
      "МОДУЛЯТОР ПОЛЯ",
      "АНАЛИТИК ГЛУБИН",
      "ОПЕРАТОР РАЗРЫВА",
      "ДЕРЖАТЕЛЬ КУРСА",
      "ХРАНИТЕЛЬ РЕСУРСА",
      "НЕЗАРЕГИСТРИРОВАННЫЙ",
      "ВНЕ ПРОТОКОЛА"
    ];

    const OPPONENTS = [
      "ЧУЖИЕ ПРАВИЛА",
      "РАССЕИВАНИЕ ФОКУСА",
      "ПЕРЕРАСХОД РЕСУРСА",
      "ЦИКЛ ОТКЛАДЫВАНИЯ",
      "ГИПЕРКОНТРОЛЬ",
      "РАЗДВОЕННАЯ ЦЕЛЬ",
      "ПОТЕРЯ ИМПУЛЬСА",
      "НЕСТАБИЛЬНАЯ СРЕДА",
      "ЗАДЕРЖКА РЕШЕНИЯ",
      "ВНЕШНИЙ ШУМ"
    ];

    const ACTIVE_SKILLS = [
      "ХОЛОДНЫЙ АНАЛИЗ",
      "БЫСТРОЕ РЕШЕНИЕ",
      "КОНТРОЛЬ ВЕКТОРА",
      "СМЕНА ТРАЕКТОРИИ",
      "РАЗРЫВ ПАТТЕРНА",
      "ОТКЛЮЧЕНИЕ ЧУЖОЙ ЛОГИКИ",
      "СЖАТИЕ СМЫСЛА",
      "ОПЕРЕЖЕНИЕ ХОДА",
      "ПЕРЕРАСПРЕДЕЛЕНИЕ РЕСУРСА",
      "УДЕРЖАНИЕ ФОКУСА"
    ];

    const PASSIVE_SKILLS = [
      "ВНУТРЕННИЙ КАРКАС",
      "ЧУВСТВО МОМЕНТА",
      "ВНУТРЕННИЙ ЛОКАТОР",
      "ФИЛЬТРАЦИЯ ШУМА",
      "ТИХАЯ УСТОЙЧИВОСТЬ",
      "ВОЗВРАТ В ОСЬ",
      "ЭНЕРГОСБЕРЕЖЕНИЕ",
      "КОНТАКТ С СОБОЙ",
      "ВНУТРЕННЯЯ ОПОРА"
    ];

    const VECTORS = [
      "УКРЕПЛЕНИЕ ФОКУСА",
      "СТАБИЛИЗАЦИЯ РЕСУРСА",
      "ПОВЫШЕНИЕ АВТОНОМНОСТИ",
      "СНИЖЕНИЕ ВНЕШНЕГО ШУМА",
      "УСКОРЕНИЕ РЕШЕНИЙ",
      "СБОРКА ПОСЛЕДОВАТЕЛЬНОСТИ",
      "ОБНОВЛЕНИЕ ТРАЕКТОРИИ",
      "ИНТЕГРАЦИЯ ОПЫТА"
    ];

    const PARAMS = [
      { key:"РЕСУРС", hint:"энергия" },
      { key:"ФОКУС", hint:"внимание" },
      { key:"УСТОЙЧИВОСТЬ", hint:"реакция на давление" },
      { key:"АДАПТАЦИЯ", hint:"скорость перестройки" },
      { key:"СКОРОСТЬ РЕШЕНИЙ", hint:"темп выбора" },
      { key:"ТОЧНОСТЬ ВЫБОРА", hint:"попадание в цель" },
      { key:"АВТОНОМНОСТЬ", hint:"действие без подтверждения" },
      { key:"ФИЛЬТРАЦИЯ ШУМА", hint:"отсев лишнего" },
      { key:"ИМПУЛЬС ДЕЙСТВИЯ", hint:"запуск процессов" },
      { key:"ПОСЛЕДОВАТЕЛЬНОСТЬ", hint:"доведение до результата" },
      { key:"ВНУТРЕННЯЯ ОПОРА", hint:"опора на себя" },
      { key:"КОНТАКТ С СОБОЙ", hint:"понимание состояния" }
    ];

    function formatId(seed){
      const alpha = "ABCDEFGHJKMNPQRSTUVWXYZ";
      const a = alpha[seed % alpha.length];
      const n = (seed % 90) + 10;
      const s = (seed >>> 8).toString(16).toUpperCase().slice(0,3).padEnd(3,"0");
      return `MP-108-${a}${n}-${s}`;
    }

    function phaseLabel(rng){
      // 4 phases
      const phases = ["1 / 4","2 / 4","3 / 4","4 / 4"];
      return `PHASE: ${pick(rng, phases)}`;
    }

    // --------- scan simulation + output ----------
    let scanning = false;

    async function runScan(){
      if (scanning) return;
      scanning = true;

      btnScan.disabled = true;
      btnScan.textContent = "СКАНИРОВАНИЕ…";

      // progress animation steps
      scanbar.style.width = "6%";
      await new Promise(r => setTimeout(r, 150));
      scanbar.style.width = "42%";
      await new Promise(r => setTimeout(r, 380));
      scanbar.style.width = "78%";
      await new Promise(r => setTimeout(r, 420));
      scanbar.style.width = "100%";
      await new Promise(r => setTimeout(r, 220));

      generate();
      output.hidden = false;
      output.scrollIntoView({behavior:"smooth", block:"start"});

      // reset bar
      await new Promise(r => setTimeout(r, 220));
      scanbar.style.width = "0%";

      btnScan.textContent = "ЗАПУСТИТЬ СКАН";
      scanning = false;
      validate();
    }

    btnScan.addEventListener("click", runScan);

    function generate(){
      const input = `${dob.value.trim()}|${origin.value.trim()}|${callsign.value.trim()}`.toLowerCase();
      const seed = hashStr(input);
      const rng = mulberry32(seed);

      // id & status
      $("mpId").textContent = formatId(seed);

      const statuses = ["STATUS: ACTIVE","STATUS: CONDITIONAL","STATUS: LIMITED","STATUS: UNSTABLE"];
      const status = pick(rng, statuses);
      $("mpStatus").textContent = status;

      $("outName").textContent = callsign.value.trim();
      $("outOrigin").textContent = origin.value.trim();

      // role & opponent
      $("outRole").textContent = pick(rng, ROLES);
      $("outOpp").textContent = pick(rng, OPPONENTS);
      $("outPhase").textContent = phaseLabel(rng);

      // vector
      $("outVector").textContent = pick(rng, VECTORS);

      // stats - choose 8 shown
      const stats = pickN(rng, PARAMS, 8).map(p=>{
        const pct = Math.floor(45 + rng()*50); // 45..95
        const tier = romanTier((pct/100)*5);
        return { name:p.key, pct, tier };
      }).sort((a,b)=> b.pct - a.pct);

      const ulStats = $("outStats");
      ulStats.innerHTML = "";
      stats.forEach(s=>{
        const li = document.createElement("li");
        li.textContent = `${s.name}: ${s.tier} / ${s.pct}%`;
        ulStats.appendChild(li);
      });

      // skills
      const active = pickN(rng, ACTIVE_SKILLS, 3 + Math.floor(rng()*3)); // 3..5
      const passive = pickN(rng, PASSIVE_SKILLS, 2 + Math.floor(rng()*3)); // 2..4

      const ulA = $("outActive"); ulA.innerHTML = "";
      active.forEach(x=>{
        const li = document.createElement("li"); li.textContent = x; ulA.appendChild(li);
      });

      const ulP = $("outPassive"); ulP.innerHTML = "";
      passive.forEach(x=>{
        const li = document.createElement("li"); li.textContent = x; ulP.appendChild(li);
      });

      // stamp date
      const now = new Date();
      const dd = String(now.getDate()).padStart(2,"0");
      const mm = String(now.getMonth()+1).padStart(2,"0");
      const yyyy = now.getFullYear();
      $("stampDate").textContent = `DATE: ${dd}.${mm}.${yyyy}`;
      $("stampLine").textContent = `PRTCL 108 · ${status.replace("STATUS: ","")}`;
    }

    // rescan
    btnRescan.addEventListener("click", () => {
      output.hidden = true;
      openTerminal();
    });

    // FAQ
    function openFaq(){ faq.showModal(); }
    function closeFaqFn(){ faq.close(); }

    btnFaq.addEventListener("click", openFaq);
    btnFaq2.addEventListener("click", openFaq);
    closeFaq.addEventListener("click", closeFaqFn);

    // close dialog on click outside
    faq.addEventListener("click", (e)=>{
      const rect = faq.getBoundingClientRect();
      const inDialog = (rect.top <= e.clientY && e.clientY <= rect.top + rect.height &&
                        rect.left <= e.clientX && e.clientX <= rect.left + rect.width);
      if (!inDialog) faq.close();
    });

  </script>
</body>
</html>