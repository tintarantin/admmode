<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ADM MODE — Meta Scan</title>
  <meta name="description" content="ADM MODE — игровая система сканирования личности: дата/время → протокол → карта управления." />

  <style>
    :root{
      --bg:#060812;
      --ink:#EAF6FF;
      --muted: rgba(234,246,255,.72);
      --glass: rgba(10, 14, 28, .62);
      --glass2: rgba(14, 18, 33, .72);

      --stroke: rgba(120,255,240,.25);
      --strokeSoft: rgba(120,255,240,.14);
      --stroke2: rgba(255,179,92,.18);

      --a:#76FFF0;   /* cyan */
      --b:#FFB35C;   /* amber */
      --c:#B86BFF;   /* violet */
      --d:#FF5C8A;   /* pink */

      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --radius: 22px;

      --scanY: 22%;
      --scanSpeed: 2.2s;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(1100px 600px at 18% 12%, rgba(118,255,240,.14), transparent 60%),
        radial-gradient(900px 520px at 82% 22%, rgba(255,179,92,.12), transparent 62%),
        radial-gradient(1000px 700px at 60% 86%, rgba(184,107,255,.12), transparent 65%),
        radial-gradient(700px 600px at 40% 70%, rgba(255,92,138,.08), transparent 62%),
        linear-gradient(180deg, #050712 0%, #070A16 45%, #050712 100%);
      overflow-x:hidden;
    }

    /* ======== GLOBAL FX LAYERS ======== */
    .fx{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
    }
    /* micro stars */
    .fx.stars{
      opacity:.42;
      mix-blend-mode: screen;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.35) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.25) 50%, transparent 52%),
        radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.22) 50%, transparent 52%),
        radial-gradient(1px 1px at 90% 60%, rgba(255,255,255,.18) 50%, transparent 52%),
        radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.20) 50%, transparent 52%),
        radial-gradient(1px 1px at 15% 65%, rgba(255,255,255,.14) 50%, transparent 52%);
      filter: blur(.25px);
    }
    /* subtle scanlines across whole page */
    .fx.scanlines{
      opacity:.10;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.06) 0px,
        rgba(255,255,255,.06) 1px,
        transparent 2px,
        transparent 6px
      );
      mix-blend-mode: overlay;
    }
    /* vignette */
    .fx.vignette{
      background: radial-gradient(80% 70% at 50% 40%, transparent 55%, rgba(0,0,0,.55) 100%);
      opacity:.55;
    }

    /* ======== LAYOUT ======== */
    .wrap{
      position:relative;
      z-index:1;
      max-width: 1120px;
      margin: 0 auto;
      padding: 34px 18px 78px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom:18px;
    }

    .logo{
      display:flex; align-items:center; gap:12px;
      user-select:none;
    }

    .sig{
      width:34px; height:34px; border-radius:10px;
      border:1px solid var(--stroke);
      background:
        radial-gradient(22px 18px at 30% 30%, rgba(118,255,240,.35), transparent 60%),
        radial-gradient(22px 18px at 70% 70%, rgba(255,179,92,.22), transparent 60%),
        rgba(0,0,0,.22);
      box-shadow: 0 0 18px rgba(118,255,240,.18);
      position:relative;
      overflow:hidden;
    }
    .sig:after{
      content:"";
      position:absolute; inset:-20%;
      background: conic-gradient(from 180deg, transparent, rgba(118,255,240,.22), transparent);
      animation: spin 5.5s linear infinite;
      opacity:.75;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .chip{
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(120,255,240,.18);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(0,0,0,.20);
    }

    /* ======== HERO HUD ======== */
    .hero{
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(14,18,33,.72), rgba(10,14,28,.58));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      isolation:isolate;
    }

    /* Grid overlay inside hero */
    .hero .gridFX{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:.22;
      background:
        linear-gradient(to right, rgba(120,255,240,.10) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(120,255,240,.08) 1px, transparent 1px);
      background-size: 64px 64px;
      mix-blend-mode: screen;
      mask: radial-gradient(70% 70% at 50% 35%, #000 55%, transparent 100%);
    }

    /* Corner brackets */
    .hero .brackets{
      position:absolute; inset:14px;
      border-radius: calc(var(--radius) - 10px);
      pointer-events:none;
    }
    .corner{
      position:absolute;
      width:34px; height:34px;
      border:2px solid rgba(118,255,240,.35);
      filter: drop-shadow(0 0 10px rgba(118,255,240,.12));
      opacity:.7;
    }
    .corner.tl{left:0; top:0; border-right:none; border-bottom:none; border-top-left-radius:18px}
    .corner.tr{right:0; top:0; border-left:none; border-bottom:none; border-top-right-radius:18px}
    .corner.bl{left:0; bottom:0; border-right:none; border-top:none; border-bottom-left-radius:18px}
    .corner.br{right:0; bottom:0; border-left:none; border-top:none; border-bottom-right-radius:18px}

    .hero:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 240px at 12% 0%, rgba(118,255,240,.18), transparent 60%),
        radial-gradient(520px 240px at 88% 0%, rgba(255,179,92,.14), transparent 60%),
        radial-gradient(520px 240px at 50% 100%, rgba(184,107,255,.12), transparent 62%);
      pointer-events:none;
      filter: blur(1px);
      z-index:0;
    }

    /* Moving scan beam INSIDE hero (the “scan line”) */
    .hero .scanBeam{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0; /* включаем при скане */
      z-index:3;
      background:
        linear-gradient(
          to bottom,
          transparent 0%,
          transparent calc(var(--scanY) - 3%),
          rgba(118,255,240,.00) calc(var(--scanY) - 2%),
          rgba(118,255,240,.22) calc(var(--scanY) - 1%),
          rgba(118,255,240,.55) var(--scanY),
          rgba(255,179,92,.22) calc(var(--scanY) + 1%),
          rgba(118,255,240,.00) calc(var(--scanY) + 2%),
          transparent calc(var(--scanY) + 4%),
          transparent 100%
        );
      mix-blend-mode: screen;
      filter: blur(.2px);
    }
    .hero.scanning .scanBeam{
      opacity:1;
      animation: scanMove var(--scanSpeed) linear infinite;
    }
    @keyframes scanMove{
      0%{ --scanY: 12%; }
      100%{ --scanY: 92%; }
    }

    /* gentle screen shimmer */
    .hero .screenShimmer{
      position:absolute; inset:0;
      pointer-events:none;
      z-index:2;
      opacity:.14;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.08) 0px,
          rgba(255,255,255,.08) 1px,
          transparent 2px,
          transparent 7px
        );
      mix-blend-mode: overlay;
      mask: radial-gradient(70% 70% at 50% 35%, #000 55%, transparent 100%);
    }

    .heroInner{
      position:relative;
      z-index:5;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      padding: 20px;
    }
    @media (max-width: 920px){ .heroInner{grid-template-columns:1fr;} }

    .pane{
      border:1px solid rgba(120,255,240,.18);
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }
    .pane:after{
      content:"";
      position:absolute; inset:-1px;
      border-radius: 18px;
      background: linear-gradient(90deg, rgba(118,255,240,.14), transparent 35%, rgba(255,179,92,.10));
      opacity:.55;
      pointer-events:none;
      mask: linear-gradient(#000, transparent 70%);
    }

    /* ======== TYPO & GLITCH ======== */
    h1{
      margin:0 0 10px;
      letter-spacing:.10em;
      font-weight: 950;
      font-size: 34px;
    }
    @media (max-width: 560px){ h1{font-size:28px} }

    .glitch{
      position:relative;
      display:inline-block;
      text-shadow:
        0 0 22px rgba(118,255,240,.12),
        0 0 40px rgba(184,107,255,.08);
    }
    .glitch:before,
    .glitch:after{
      content: attr(data-text);
      position:absolute;
      left:0; top:0;
      opacity:.55;
      pointer-events:none;
      clip-path: inset(0 0 0 0);
    }
    .glitch:before{
      transform: translate(1px,0);
      color: rgba(118,255,240,.75);
      mix-blend-mode: screen;
    }
    .glitch:after{
      transform: translate(-1px,0);
      color: rgba(255,92,138,.55);
      mix-blend-mode: screen;
    }
    .hero.scanning .glitch:before{ animation: glitchA 1.2s infinite linear; }
    .hero.scanning .glitch:after{ animation: glitchB 1.0s infinite linear; }

    @keyframes glitchA{
      0%{ clip-path: inset(0 0 92% 0); transform: translate(1px,0); }
      12%{ clip-path: inset(18% 0 62% 0); transform: translate(2px,-1px); }
      25%{ clip-path: inset(45% 0 40% 0); transform: translate(0,1px); }
      38%{ clip-path: inset(70% 0 18% 0); transform: translate(2px,0); }
      50%{ clip-path: inset(10% 0 78% 0); transform: translate(1px,1px); }
      62%{ clip-path: inset(60% 0 28% 0); transform: translate(3px,-1px); }
      75%{ clip-path: inset(34% 0 52% 0); transform: translate(1px,0); }
      88%{ clip-path: inset(80% 0 8% 0); transform: translate(2px,1px); }
      100%{ clip-path: inset(0 0 92% 0); transform: translate(1px,0); }
    }
    @keyframes glitchB{
      0%{ clip-path: inset(84% 0 6% 0); transform: translate(-1px,0); }
      15%{ clip-path: inset(55% 0 30% 0); transform: translate(-2px,1px); }
      28%{ clip-path: inset(12% 0 78% 0); transform: translate(-1px,-1px); }
      42%{ clip-path: inset(40% 0 44% 0); transform: translate(-3px,0); }
      57%{ clip-path: inset(72% 0 16% 0); transform: translate(-2px,1px); }
      71%{ clip-path: inset(22% 0 68% 0); transform: translate(-1px,0); }
      86%{ clip-path: inset(62% 0 24% 0); transform: translate(-2px,-1px); }
      100%{ clip-path: inset(84% 0 6% 0); transform: translate(-1px,0); }
    }

    .subtitle{
      margin:0 0 12px;
      color:var(--muted);
      line-height:1.45;
      font-size:14px;
      max-width: 64ch;
    }

    /* ======== INFO PILLS ======== */
    .bullets{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:12px;
    }
    @media (max-width: 560px){ .bullets{grid-template-columns:1fr;} }

    .pill{
      border:1px solid rgba(120,255,240,.18);
      border-radius: 16px;
      padding:10px 12px;
      background: rgba(0,0,0,.22);
    }
    .pill .k{
      font-size:12px;
      color:rgba(234,246,255,.70);
      letter-spacing:.08em;
      text-transform:uppercase;
      margin-bottom:6px;
      display:flex; align-items:center; gap:10px;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: var(--a);
      box-shadow: 0 0 14px rgba(118,255,240,.55);
    }
    .pill .v{
      color: rgba(234,246,255,.86);
      line-height:1.45;
      font-size:13px;
    }
    .ico{
      width:16px; height:16px;
      opacity:.85;
      filter: drop-shadow(0 0 10px rgba(118,255,240,.10));
    }

    /* ======== FORM ======== */
    .formTitle{
      margin:0 0 12px;
      font-weight:850;
      letter-spacing:.10em;
      font-size:14px;
      text-transform:uppercase;
      color: rgba(234,246,255,.88);
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .statusPill{
      font-size:11px;
      border:1px solid rgba(120,255,240,.18);
      border-radius:999px;
      padding:6px 10px;
      background: rgba(0,0,0,.20);
      color: rgba(234,246,255,.72);
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    label{
      display:block;
      font-size:12px;
      color: var(--muted);
      margin: 10px 0 7px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){ .row{grid-template-columns:1fr;} }

    input, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(120,255,240,.22);
      background: rgba(0,0,0,.22);
      color: var(--ink);
      outline:none;
      font-size:14px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }
    input:focus, select:focus{
      border-color: rgba(118,255,240,.45);
      box-shadow: 0 0 0 3px rgba(118,255,240,.10);
    }

    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="time"]::-webkit-calendar-picker-indicator{
      filter: invert(1);
      opacity:.8;
    }

    .btn{
      width:100%;
      margin-top: 14px;
      padding: 13px 14px;
      border-radius: 14px;
      border:1px solid rgba(118,255,240,.35);
      background:
        linear-gradient(90deg, rgba(118,255,240,.18), rgba(184,107,255,.14), rgba(255,179,92,.14));
      color: var(--ink);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      cursor:pointer;
      box-shadow:
        0 0 28px rgba(118,255,240,.12),
        0 0 0 1px rgba(255,255,255,.03) inset;
      position:relative;
      overflow:hidden;
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(260px 70px at 20% 50%, rgba(118,255,240,.25), transparent 60%);
      opacity:.85;
      transform: translateX(-18%);
      transition: transform .35s ease;
      pointer-events:none;
    }
    .btn:hover{ filter:brightness(1.06); }
    .btn:hover:before{ transform: translateX(18%); }
    .btn:active{ transform: translateY(1px); }

    .btn.scan{
      animation: btnPulse 1.2s ease-in-out infinite;
    }
    @keyframes btnPulse{
      0%,100%{ box-shadow: 0 0 28px rgba(118,255,240,.12), 0 0 0 1px rgba(255,255,255,.03) inset; }
      50%{ box-shadow: 0 0 42px rgba(118,255,240,.18), 0 0 0 1px rgba(255,255,255,.03) inset; }
    }

    /* progress bar */
    .progress{
      margin-top: 12px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(120,255,240,.18);
      background: rgba(0,0,0,.18);
      overflow:hidden;
      display:none;
    }
    .progress > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(118,255,240,.55), rgba(184,107,255,.45), rgba(255,179,92,.45));
      box-shadow: 0 0 18px rgba(118,255,240,.18);
      border-radius: 999px;
      transition: width .12s linear;
    }

    .hint{
      margin-top:10px;
      font-size:12px;
      color: rgba(234,246,255,.70);
      line-height:1.45;
    }

    /* output panel */
    .out{
      margin-top:14px;
      border-radius: 16px;
      border:1px solid rgba(255,179,92,.18);
      background: rgba(0,0,0,.18);
      padding:12px;
      display:none;
    }
    .out .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12.5px;
      color: rgba(234,246,255,.86);
      line-height:1.55;
      white-space:pre-wrap;
    }

    .footer{
      margin-top:16px;
      font-size:12px;
      color: rgba(234,246,255,.58);
      line-height:1.45;
      border-top:1px solid rgba(120,255,240,.12);
      padding-top:14px;
    }

    .warn{color: rgba(255,179,92,.92)}
  </style>
</head>

<body>
  <div class="fx stars"></div>
  <div class="fx scanlines"></div>
  <div class="fx vignette"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="logo">
        <div class="sig"></div>
        <div>
          <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
            <b style="letter-spacing:.12em; font-weight:900;">ADM MODE</b>
            <span class="chip">metagalactic protocol</span>
          </div>
          <div style="font-size:12px; color:rgba(234,246,255,.62); letter-spacing:.06em;">
            HUMAN ERROR / CONTROL RESTORE
          </div>
        </div>
      </div>

      <div class="chip">RU • v1 (landing)</div>
    </div>

    <section class="hero" id="hero">
      <div class="gridFX"></div>
      <div class="screenShimmer"></div>
      <div class="scanBeam"></div>

      <div class="brackets">
        <div class="corner tl"></div>
        <div class="corner tr"></div>
        <div class="corner bl"></div>
        <div class="corner br"></div>
      </div>

      <div class="heroInner">
        <!-- LEFT: SYSTEM DESCRIPTION -->
        <div class="pane">
          <h1 class="glitch" data-text="СИСТЕМА ADM MODE">СИСТЕМА ADM MODE</h1>
          <p class="subtitle">
            Это не терапия и не гадание. Это <b>высокотехнологичный игровой интерфейс человека</b>:
            ты вводишь данные рождения — и получаешь <b>протокол управления</b>:
            где ты отдал контроль и как вернуть его обратно.
          </p>

          <div class="bullets">
            <div class="pill">
              <div class="k">
                <svg class="ico" viewBox="0 0 24 24" fill="none">
                  <path d="M4 12h16" stroke="rgba(118,255,240,.85)" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 4v16" stroke="rgba(118,255,240,.65)" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="dot"></span> что это
              </div>
              <div class="v">Карта игрока: модули личности, баги, квесты, доступ — как HUD в игре.</div>
            </div>

            <div class="pill">
              <div class="k">
                <svg class="ico" viewBox="0 0 24 24" fill="none">
                  <path d="M12 2l3 7h7l-5.6 4.2L18 21l-6-4-6 4 1.6-7.8L2 9h7l3-7z" stroke="rgba(255,179,92,.85)" stroke-width="1.8" stroke-linejoin="round"/>
                </svg>
                <span class="dot" style="background:var(--b); box-shadow:0 0 14px rgba(255,179,92,.55)"></span> зачем
              </div>
              <div class="v">Увидеть шаблоны, утечки энергии и точки власти — без иллюзий.</div>
            </div>

            <div class="pill">
              <div class="k">
                <svg class="ico" viewBox="0 0 24 24" fill="none">
                  <path d="M6 7h12M6 12h12M6 17h12" stroke="rgba(184,107,255,.85)" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="dot" style="background:var(--c); box-shadow:0 0 14px rgba(184,107,255,.55)"></span> вход
              </div>
              <div class="v">Дата рождения + (если знаешь) время. Это повышает точность скана.</div>
            </div>

            <div class="pill">
              <div class="k">
                <svg class="ico" viewBox="0 0 24 24" fill="none">
                  <path d="M12 3v18" stroke="rgba(255,92,138,.75)" stroke-width="2" stroke-linecap="round"/>
                  <path d="M5 10l7-7 7 7" stroke="rgba(255,92,138,.55)" stroke-width="2" stroke-linejoin="round"/>
                </svg>
                <span class="dot" style="background:var(--d); box-shadow:0 0 14px rgba(255,92,138,.55)"></span> выход
              </div>
              <div class="v">Сессия → ID → статус доступа → первый шаг. Дальше — полная карта модулей.</div>
            </div>
          </div>

          <div class="footer">
            <span class="warn">Важно:</span> сейчас это “входной экран/терминал”.
            Следующий экран будет “Карта” (CORE / KIT / GLITCHES / QUEST / ENERGY / ACCESS).
          </div>
        </div>

        <!-- RIGHT: FORM -->
        <div class="pane">
          <div class="formTitle">
            <span>Сканирование личности</span>
            <span class="statusPill" id="statusPill">idle</span>
          </div>

          <label for="dob">Дата рождения</label>
          <input id="dob" type="date" />

          <div class="row">
            <div>
              <label for="tob">Время рождения (если знаешь)</label>
              <input id="tob" type="time" step="60" />
            </div>
            <div>
              <label for="tz">Часовой пояс (опционально)</label>
              <select id="tz">
                <option value="">Авто (по устройству)</option>
                <option value="Europe/Moscow">Europe/Moscow</option>
                <option value="Europe/Amsterdam">Europe/Amsterdam</option>
                <option value="Asia/Almaty">Asia/Almaty</option>
                <option value="Asia/Dubai">Asia/Dubai</option>
              </select>
            </div>
          </div>

          <label for="place">Город рождения (опционально)</label>
          <input id="place" type="text" placeholder="например: Нальчик" />

          <button class="btn" id="go">СКАНИРОВАТЬ</button>

          <div class="progress" id="progress">
            <div id="bar"></div>
          </div>

          <div class="hint">
            Во время скана включается <b>скан-линия</b> и выдаётся <b>протокол сессии</b>.
            Потом подключим твою настоящую “схему/учение” и соберём полноценную карту.
          </div>

          <div class="out" id="out">
            <div class="mono" id="outText"></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    const hero = document.getElementById('hero');
    const statusPill = document.getElementById('statusPill');
    const btn = document.getElementById('go');
    const progress = document.getElementById('progress');
    const bar = document.getElementById('bar');

    function pad2(n){ return String(n).padStart(2,'0'); }

    function getDeviceTZ(){
      try { return Intl.DateTimeFormat().resolvedOptions().timeZone || ""; }
      catch(e){ return ""; }
    }

    function makeSessionId(dob, tob){
      const r = Math.random().toString(16).slice(2,6).toUpperCase();
      const base = dob.replaceAll('-','') + (tob ? tob.replace(':','') : 'XXXX');
      return "ADM-" + base + "-" + r;
    }

    function buildProtocol({dob, tob, tz, place}){
      const id = makeSessionId(dob, tob);
      const timeLine = tob ? tob : "не указано";
      const tzLine = tz || getDeviceTZ() || "не определён";
      const placeLine = place ? place : "не указано";
      const access = tob ? "ADMIN (точность повышена)" : "PLAYER (время не задано)";

      return [
        "— ADM MODE / SESSION PROTOCOL —",
        `ID: ${id}`,
        `DOB: ${dob}`,
        `TOB: ${timeLine}`,
        `TZ:  ${tzLine}`,
        `LOC: ${placeLine}`,
        "",
        `ACCESS STATUS: ${access}`,
        "OUTPUT: карта модулей будет подключена в следующем экране."
      ].join("\\n");
    }

    async function runScan(){
      const dob = document.getElementById('dob').value;
      const tob = document.getElementById('tob').value;
      const tz = document.getElementById('tz').value;
      const place = document.getElementById('place').value.trim();

      if(!dob){
        alert("Введи дату рождения.");
        return;
      }

      // UI: start scan
      hero.classList.add('scanning');
      btn.classList.add('scan');
      btn.disabled = true;
      statusPill.textContent = "scanning";
      progress.style.display = "block";
      bar.style.width = "0%";
      document.getElementById('out').style.display = "none";

      // fake progress (smooth)
      let p = 0;
      const t0 = performance.now();
      const duration = 1400 + Math.random()*400; // 1.4-1.8s
      while(p < 100){
        const t = performance.now() - t0;
        p = Math.min(100, Math.floor((t/duration)*100));
        bar.style.width = p + "%";
        await new Promise(r => setTimeout(r, 30));
      }

      // render output
      const text = buildProtocol({dob, tob, tz, place});
      document.getElementById('outText').textContent = text;
      const out = document.getElementById('out');
      out.style.display = "block";
      out.scrollIntoView({behavior:"smooth", block:"nearest"});

      // UI: stop scan
      hero.classList.remove('scanning');
      btn.classList.remove('scan');
      btn.disabled = false;
      statusPill.textContent = "ready";
      setTimeout(()=>{ progress.style.display = "none"; }, 350);
    }

    btn.addEventListener('click', runScan);

    // demo defaults (можешь удалить)
    document.getElementById('dob').value = "1996-08-01";
    document.getElementById('tob').value = "01:30";
    document.getElementById('place').value = "Нальчик";
    statusPill.textContent = "ready";
  </script>
</body>
</html>
