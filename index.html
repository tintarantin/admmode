<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PRTCL 108</title>
  <meta name="description" content="PRTCL 108 ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç—Ä–µ–∑–≤–æ–≥–æ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è. –°–∫–∞–Ω ‚Üí –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –±–ª–æ–∫–µ—Ä—ã ‚Üí –ø—É—Ç—å –ø—Ä–æ–∫–∞—á–∫–∏."/>
  <style>
    :root{
      /* –ü–∞–ª–∏—Ç—Ä–∞ (–ª–µ–¥—è–Ω–æ–π/—Å—Ç–∞–ª—å–Ω–æ–π/–Ω–µ–±–µ—Å–Ω—ã–π, –∫–∞–∫ –≤ —Ä–µ—Ñ–∞—Ö) */
      --bg0:#061018;
      --bg1:#0b1a25;
      --sky0:#152d3f;
      --sky1:#295067;
      --steel:#637b95;
      --ice0:#829db4;
      --ice1:#a0b7c4;
      --mist:#e9f1f7;

      --glow:#bfefff;
      --glow2:#d9fbff;
      --warm:#e5d6c9;
      --danger:#ff5b6a;

      --border:rgba(255,255,255,.12);
      --glass:rgba(10,18,26,.52);
      --glass2:rgba(255,255,255,.06);

      --r14:14px;
      --r18:18px;
      --r22:22px;
      --r28:28px;

      --shadow: 0 18px 60px rgba(0,0,0,.48);
      --shadow2: 0 10px 40px rgba(0,0,0,.35);

      --font: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display",
              "Inter", "Segoe UI", Roboto, Helvetica, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:rgba(255,255,255,.92);
      background:
        radial-gradient(1200px 900px at 20% 10%, rgba(160,183,196,.20), transparent 60%),
        radial-gradient(900px 700px at 85% 20%, rgba(99,123,149,.24), transparent 55%),
        radial-gradient(1200px 900px at 60% 95%, rgba(21,45,63,.52), transparent 65%),
        linear-gradient(180deg, var(--bg0), var(--sky0) 30%, var(--bg1) 65%, var(--bg0));
      overflow-x:hidden;
    }

    /* subtle stars */
    .stars{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.55;
      mix-blend-mode:screen;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.35) 50%, transparent 52%),
        radial-gradient(1px 1px at 80% 35%, rgba(255,255,255,.28) 50%, transparent 52%),
        radial-gradient(1px 1px at 55% 12%, rgba(255,255,255,.25) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 70%, rgba(255,255,255,.22) 50%, transparent 52%),
        radial-gradient(1px 1px at 65% 82%, rgba(255,255,255,.20) 50%, transparent 52%),
        radial-gradient(1px 1px at 15% 88%, rgba(255,255,255,.18) 50%, transparent 52%),
        radial-gradient(1px 1px at 92% 78%, rgba(255,255,255,.16) 50%, transparent 52%);
      filter: blur(.1px);
    }

    .wrap{
      width:min(1180px, calc(100% - 40px));
      margin:0 auto;
      padding:26px 0 90px;
    }

    /* Top bar */
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
      padding:14px 16px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow2);
      position:sticky;
      top:14px;
      z-index:50;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      font-weight:650;
    }
    .brand .mark{
      width:12px;height:12px;border-radius:4px;
      background:rgba(191,239,255,.22);
      border:1px solid rgba(191,239,255,.25);
      box-shadow:0 0 26px rgba(191,239,255,.18)
    }
    .badge{
      font-family:var(--mono);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(191,239,255,.25);
      background: rgba(191,239,255,.08);
      color: rgba(217,251,255,.95);
      box-shadow: 0 0 30px rgba(191,239,255,.10);
      white-space:nowrap;
    }
    .nav{
      display:flex; gap:10px; align-items:center;
    }
    .nav a{
      font-size:13px;
      color:rgba(255,255,255,.74);
      text-decoration:none;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid transparent;
    }
    .nav a:hover{
      color:rgba(255,255,255,.92);
      border-color:rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
    }

    /* Panels */
    .panel{
      border:1px solid var(--border);
      border-radius:var(--r28);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* HERO */
    .hero{
      margin-top:20px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:20px;
      align-items:stretch;
    }
    .heroLeft{
      padding:34px 30px 26px;
      min-height:520px;
    }
    .kicker{
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:rgba(217,251,255,.80);
      display:flex;
      gap:12px;
      align-items:center;
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background: rgba(191,239,255,.85);
      box-shadow:0 0 18px rgba(191,239,255,.55);
    }
    h1{
      margin:14px 0 10px;
      font-size:52px;
      line-height:1.02;
      letter-spacing:.02em;
    }
    .sub{
      margin:0 0 22px;
      font-size:16px;
      line-height:1.65;
      color:rgba(255,255,255,.78);
      max-width:58ch;
    }
    .sub b{color:rgba(255,255,255,.95)}
    .ctaRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:18px;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius:var(--r14);
      padding:14px 16px;
      font-weight:700;
      letter-spacing:.02em;
      color:rgba(255,255,255,.95);
      background:
        radial-gradient(120% 160% at 20% 10%, rgba(217,251,255,.40), transparent 55%),
        linear-gradient(180deg, rgba(191,239,255,.18), rgba(191,239,255,.08));
      border:1px solid rgba(191,239,255,.25);
      box-shadow: 0 0 60px rgba(191,239,255,.10);
      transition: transform .15s ease, filter .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.06); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btnGhost{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.14);
      color:rgba(255,255,255,.82);
    }
    .micro{
      font-family:var(--mono);
      font-size:12px;
      color:rgba(255,255,255,.62);
      line-height:1.45;
    }
    .divider{
      height:1px;
      background: rgba(255,255,255,.10);
      margin:16px 0;
    }

    .miniList{display:grid; gap:10px; margin-top:8px;}
    .miniItem{display:flex; gap:10px; align-items:flex-start;}
    .chip{
      margin-top:2px;
      font-family:var(--mono);
      font-size:11px;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(191,239,255,.20);
      background: rgba(191,239,255,.07);
      color: rgba(217,251,255,.90);
      white-space:nowrap;
    }
    .miniItem div{
      color:rgba(255,255,255,.74);
      font-size:13px;
      line-height:1.45;
    }

    /* HERO RIGHT: avatar */
    .heroRight{min-height:520px; display:flex; flex-direction:column;}
    .characterFrame{flex:1; position:relative; overflow:hidden;}
    .characterFrame::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(650px 420px at 55% 30%, rgba(217,251,255,.20), transparent 60%),
        radial-gradient(780px 520px at 40% 85%, rgba(130,157,180,.18), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.00));
      pointer-events:none;
      z-index:2;
    }
    .charImg{
      position:absolute;
      inset:0;
      width:100%; height:100%;
      object-fit:cover;
      filter: contrast(1.05) saturate(1.04);
      transform: scale(1.02);
    }
    .hud{
      position:absolute;
      left:18px; right:18px; bottom:16px;
      padding:14px 14px;
      border-radius:var(--r18);
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,18,26,.56);
      backdrop-filter: blur(10px);
      z-index:3;
      display:grid;
      gap:8px;
    }
    .hudTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .hudTitle{
      font-weight:700;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(217,251,255,.86);
      font-family:var(--mono);
    }
    .hudTag{
      font-family:var(--mono);
      font-size:11px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(229,214,201,.25);
      background: rgba(229,214,201,.07);
      color: rgba(255,245,235,.90);
      white-space:nowrap;
    }
    .hudLine{
      font-size:13px;
      color:rgba(255,255,255,.76);
      line-height:1.4;
    }

    /* SECTIONS */
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:18px; align-items:start;}
    .card{padding:22px 22px;}
    .card h2{margin:0 0 8px; font-size:18px; letter-spacing:.02em;}
    .card p{margin:0 0 14px; color:rgba(255,255,255,.72); line-height:1.6; font-size:14px;}

    /* Scan box with scanline */
    .scanBox{padding:22px; position:relative; overflow:hidden;}
    .scanBox::after{
      content:"";
      position:absolute;
      left:-10%;
      width:120%;
      height:2px;
      top:20%;
      background: linear-gradient(90deg, transparent, rgba(191,239,255,.85), transparent);
      filter: blur(.4px);
      animation: scanline 3.2s ease-in-out infinite;
      opacity:.65;
      pointer-events:none;
    }
    @keyframes scanline{
      0%{ top:18%; opacity:.15;}
      40%{ top:52%; opacity:.75;}
      80%{ top:86%; opacity:.25;}
      100%{ top:18%; opacity:.12;}
    }

    form{display:grid; gap:12px; margin-top:10px;}
    .row2{display:grid; grid-template-columns: 1fr 1fr; gap:12px;}
    label{
      font-size:12px;
      color:rgba(255,255,255,.70);
      font-family:var(--mono);
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .field{display:grid; gap:8px;}
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:var(--r14);
      border:1px solid rgba(255,255,255,.14);
      outline:none;
      background: rgba(255,255,255,.05);
      color:rgba(255,255,255,.92);
      font-size:14px;
    }
    input::placeholder, textarea::placeholder{ color:rgba(255,255,255,.35); }
    .hint{font-size:12px; color:rgba(255,255,255,.60); line-height:1.45;}
    .warn{color:rgba(255,255,255,.70); font-family:var(--mono); font-size:12px;}
    .warn b{color:rgba(255,255,255,.92)}
    .warn .red{color:rgba(255,91,106,.92)}

    /* Signature */
    .contract{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius:18px;
      padding:12px;
    }
    .contractTitle{
      font-family:var(--mono);
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(217,251,255,.86);
      margin:0 0 8px;
    }
    .contractText{
      font-size:13px;
      line-height:1.55;
      color:rgba(255,255,255,.74);
      margin:0;
    }
    .sigWrap{
      margin-top:10px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      overflow:hidden;
      background: rgba(10,18,26,.45);
      position:relative;
    }
    canvas#sig{
      width:100%;
      height:110px;
      display:block;
      touch-action:none;
    }
    .sigHint{
      position:absolute;
      left:12px; top:10px;
      font-family:var(--mono);
      font-size:11px;
      color:rgba(255,255,255,.55);
      letter-spacing:.06em;
      text-transform:uppercase;
      pointer-events:none;
    }
    .sigActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
      align-items:center;
    }
    .btnMini{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius:12px;
      padding:10px 12px;
      font-weight:700;
      color:rgba(255,255,255,.88);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .btnMini:hover{ filter:brightness(1.06); }

    /* Gallery */
    .gallery{margin-top:18px; padding:18px;}
    .galleryHead{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:12px;}
    .galleryHead .t{font-family:var(--mono); letter-spacing:.12em; text-transform:uppercase; color:rgba(217,251,255,.80); font-size:12px;}
    .thumbs{display:grid; grid-template-columns: repeat(6, 1fr); gap:10px;}
    .thumb{
      position:relative;
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      aspect-ratio: 1 / 1.15;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease;
    }
    .thumb:hover{ transform: translateY(-2px); filter:brightness(1.05); }
    .thumb img{ width:100%; height:100%; object-fit:cover; filter: contrast(1.03) saturate(1.03); }
    .thumb::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(180px 140px at 60% 20%, rgba(217,251,255,.12), transparent 55%);
      pointer-events:none;
    }

    /* OVERLAYS */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.50);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:200;
    }
    .modal{
      width:min(960px, 100%);
      border:1px solid rgba(255,255,255,.14);
      border-radius:var(--r28);
      background: rgba(10,18,26,.66);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHead{
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalHead .title{
      font-family:var(--mono);
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(217,251,255,.85);
    }
    .x{
      appearance:none; border:none; cursor:pointer;
      width:38px; height:38px; border-radius:12px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.84);
      font-size:16px;
    }

    /* PROCESSING screen */
    .processing{ display:grid; place-items:center; }
    .procInner{ width:min(680px, 100%); padding:26px 22px; }
    .procTitle{ font-size:22px; margin:0 0 10px; letter-spacing:.02em; }
    .log{
      margin-top:14px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:14px 14px;
      background: rgba(255,255,255,.04);
      font-family:var(--mono);
      font-size:12px;
      line-height:1.65;
      color:rgba(217,251,255,.82);
      min-height:140px;
      white-space:pre-line;
    }
    .bar{
      height:10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      margin-top:12px;
    }
    .bar > i{
      display:block; height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(191,239,255,.15), rgba(217,251,255,.55), rgba(191,239,255,.15));
      box-shadow: 0 0 36px rgba(191,239,255,.22);
      transition: width .2s ease;
    }

    /* DASHBOARD */
    .dashWrap{margin-top:18px; display:none;}
    .dash{
      padding:18px;
      display:grid;
      grid-template-columns: .9fr 1.1fr;
      gap:18px;
      align-items:stretch;
    }
    .dashLeft{
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--r22);
      overflow:hidden;
      background: rgba(255,255,255,.03);
      position:relative;
      min-height:420px;
    }
    .dashLeft img{width:100%; height:100%; object-fit:cover;}
    .dashLeft .tag{
      position:absolute; left:14px; top:14px;
      font-family:var(--mono);
      font-size:11px;
      letter-spacing:.12em;
      text-transform:uppercase;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(191,239,255,.20);
      background: rgba(191,239,255,.08);
      color: rgba(217,251,255,.92);
    }
    .dashRight{ display:grid; gap:14px; }
    .box{
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--r22);
      background: rgba(255,255,255,.03);
      padding:16px 16px;
    }
    .boxTitle{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(217,251,255,.85);
      margin-bottom:10px;
    }
    .pill{
      font-family:var(--mono);
      font-size:11px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(229,214,201,.22);
      background: rgba(229,214,201,.06);
      color: rgba(255,245,235,.90);
      white-space:nowrap;
    }
    .meter{
      display:grid;
      grid-template-columns: 140px 1fr 52px;
      gap:10px;
      align-items:center;
      padding:8px 0;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .meter:first-of-type{border-top:none}
    .meter .name{color:rgba(255,255,255,.78); font-size:13px;}
    .meter .val{font-family:var(--mono); color:rgba(217,251,255,.88); font-size:12px; text-align:right;}
    .track{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(191,239,255,.12), rgba(217,251,255,.55), rgba(191,239,255,.12));
      box-shadow: 0 0 24px rgba(191,239,255,.18);
      transition: width .35s ease;
    }

    .modeText, .blkText{
      color:rgba(255,255,255,.74);
      line-height:1.6;
      font-size:14px;
      margin:0;
    }
    .lock{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-family:var(--mono);
      font-size:12px;
      color:rgba(255,255,255,.72);
    }
    .lock b{color:rgba(255,255,255,.92)}
    .lock .ico{
      width:26px; height:26px; border-radius:10px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
    }

    /* PAYWALL */
    .payRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:12px;
    }

    /* Footer */
    .footer{
      margin-top:18px;
      padding:18px 22px;
      display:flex;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
      color:rgba(255,255,255,.58);
      font-size:12px;
    }
    .footer .mono{ font-family:var(--mono); letter-spacing:.08em; text-transform:uppercase; }

    /* Responsive */
    @media (max-width: 980px){
      .hero{ grid-template-columns: 1fr; }
      .heroLeft{ padding:28px 22px; min-height:auto;}
      h1{ font-size:44px; }
      .grid2{ grid-template-columns:1fr; }
      .thumbs{ grid-template-columns: repeat(3, 1fr); }
      .dash{ grid-template-columns:1fr; }
    }
    @media (max-width: 520px){
      .nav{ display:none; }
      h1{ font-size:38px; }
      .row2{ grid-template-columns:1fr; }
      .thumbs{ grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>

<body>
  <div class="stars" aria-hidden="true"></div>

  <div class="wrap">
    <header class="top">
      <div class="brand">
        <span class="mark"></span>
        <span>PRTCL 108</span>
        <span class="badge" id="accessBadge">access: locked</span>
      </div>
      <nav class="nav">
        <a href="#top">–í—Ö–æ–¥</a>
        <a href="#scan">–°–∫–∞–Ω</a>
        <a href="#avatars">–ê–≤–∞—Ç–∞—Ä—ã</a>
        <a href="#dashboard">–î–∞—à–±–æ—Ä–¥</a>
      </nav>
    </header>

    <!-- HERO / ENTRY -->
    <section class="hero" id="top">
      <div class="panel heroLeft">
        <div class="kicker"><span class="dot"></span> –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç—Ä–µ–∑–≤–æ–≥–æ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è <span style="opacity:.55">/</span> <span style="font-family:var(--mono);opacity:.78">SCAN</span></div>
        <h1>–°–∫–∞–Ω –±–µ–∑ –∏–ª–ª—é–∑–∏–π.</h1>
        <p class="sub">
          –¢—ã –≤–≤–æ–¥–∏—à—å –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî PRTCL –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç <b>–±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</b>, <b>–∫–ª—é—á–µ–≤—ã–µ –±–ª–æ–∫–µ—Ä—ã</b>
          –∏ <b>–ø—É—Ç—å –ø—Ä–æ–∫–∞—á–∫–∏</b>. –≠—Ç–æ –Ω–µ ‚Äú–≤–µ—Ä–∞‚Äù. –≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è.
        </p>

        <div class="ctaRow">
          <button class="btn" id="openScan">–ù–ê–ß–ê–¢–¨ –°–ö–ê–ù</button>
          <button class="btn btnGhost" id="viewDemo">–ü–û–°–ú–û–¢–†–ï–¢–¨ –î–ê–®–ë–û–†–î</button>
          <span class="micro">single-player mode<br/>–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è</span>
        </div>

        <div class="divider"></div>

        <div class="miniList">
          <div class="miniItem">
            <span class="chip">BASE</span>
            <div>–ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ä–µ—Å—É—Ä—Å, —Ñ–æ–∫—É—Å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –∏–º–ø—É–ª—å—Å, –∞–¥–∞–ø—Ç–∞—Ü–∏—è.</div>
          </div>
          <div class="miniItem">
            <span class="chip">BLOCKERS</span>
            <div>–ì–¥–µ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –≤—ã–±–æ—Ä: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –ø–µ—Ç–ª–∏, –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.</div>
          </div>
          <div class="miniItem">
            <span class="chip">UPGRADE</span>
            <div>–ß—Ç–æ –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å –ø–µ—Ä–≤—ã–º ‚Äî —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏, –∞ –Ω–µ ‚Äú–≤ –≥–æ–ª–æ–≤–µ‚Äù.</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="warn">
          <span class="red">warning:</span> —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–º. <b>—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ</b>.
        </div>
      </div>

      <div class="panel heroRight">
        <div class="characterFrame">
          <img class="charImg" id="heroImg" src="assets/char-1.jpg" alt="PRTCL avatar"/>
          <div class="hud">
            <div class="hudTop">
              <div class="hudTitle">avatar preview</div>
              <div class="hudTag" id="hudTag">PRTCL / ICE</div>
            </div>
            <div class="hudLine" id="hudLine">–û–±—Ä–∞–∑ ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–º—ã—Å–ª –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç—Ä–µ–∑–≤—ã–º.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- AVATARS -->
    <section class="panel gallery" id="avatars" style="margin-top:18px;">
      <div class="galleryHead">
        <div class="t">avatar library</div>
        <div class="micro">–≤—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å ‚Äî –æ–Ω –º–µ–Ω—è–µ—Ç ‚Äú–æ–±–ª–æ–∂–∫—É‚Äù, –Ω–µ —Å–º—ã—Å–ª</div>
      </div>
      <div class="thumbs" id="thumbs">
        <div class="thumb" data-src="assets/char-1.jpg"><img src="assets/char-1.jpg" alt="avatar 1"></div>
        <div class="thumb" data-src="assets/char-2.jpg"><img src="assets/char-2.jpg" alt="avatar 2"></div>
        <div class="thumb" data-src="assets/char-3.jpg"><img src="assets/char-3.jpg" alt="avatar 3"></div>
        <div class="thumb" data-src="assets/char-4.jpg"><img src="assets/char-4.jpg" alt="avatar 4"></div>
        <div class="thumb" data-src="assets/char-5.jpg"><img src="assets/char-5.jpg" alt="avatar 5"></div>
        <div class="thumb" data-src="assets/char-6.jpg"><img src="assets/char-6.jpg" alt="avatar 6"></div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section class="panel dashWrap" id="dashboard">
      <div class="card">
        <h2 style="margin-bottom:6px;">RESULT / DASHBOARD</h2>
        <p style="margin-bottom:0;">–õ–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ä–µ–∂–∏–º, –±–ª–æ–∫–µ—Ä—ã –∏ –∑–∞–∫—Ä—ã—Ç–∞—è –≤–µ—Ä—Å–∏—è –∞–Ω–∞–ª–∏–∑–∞.</p>
      </div>

      <div class="dash">
        <div class="dashLeft">
          <span class="tag">current configuration</span>
          <img id="dashAvatar" src="assets/char-1.jpg" alt="avatar"/>
        </div>

        <div class="dashRight">
          <div class="box">
            <div class="boxTitle">
              <span>BASE PARAMETERS</span>
              <span class="pill" id="seedPill">seed: ‚Äî</span>
            </div>

            <div class="meter">
              <div class="name">Energy</div>
              <div class="track"><div class="fill" id="mEnergy"></div></div>
              <div class="val" id="vEnergy">‚Äî</div>
            </div>
            <div class="meter">
              <div class="name">Focus</div>
              <div class="track"><div class="fill" id="mFocus"></div></div>
              <div class="val" id="vFocus">‚Äî</div>
            </div>
            <div class="meter">
              <div class="name">Stability</div>
              <div class="track"><div class="fill" id="mStability"></div></div>
              <div class="val" id="vStability">‚Äî</div>
            </div>
            <div class="meter">
              <div class="name">Drive</div>
              <div class="track"><div class="fill" id="mDrive"></div></div>
              <div class="val" id="vDrive">‚Äî</div>
            </div>
            <div class="meter">
              <div class="name">Adaptation</div>
              <div class="track"><div class="fill" id="mAdapt"></div></div>
              <div class="val" id="vAdapt">‚Äî</div>
            </div>

            <div style="margin-top:10px;" class="hint">
              *—ç—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è (seed-–º–æ–¥–µ–ª—å). –¥–∞–ª—å—à–µ –º—ã –ø–æ–¥–∫–ª—é—á–∏–º —Ä–µ–∞–ª—å–Ω—É—é –±–∞–∑—É –ø—Ä–∞–≤–∏–ª/–∫–æ–Ω—Ç–µ–Ω—Ç–∞.
            </div>
          </div>

          <div class="box">
            <div class="boxTitle">
              <span>CURRENT MODE</span>
              <span class="pill" id="modePill">‚Äî</span>
            </div>
            <p class="modeText" id="modeText">‚Äî</p>
          </div>

          <div class="box">
            <div class="boxTitle">
              <span>CORE BLOCKERS</span>
              <span class="pill">partial</span>
            </div>

            <div class="lock">
              <span class="ico">üîí</span>
              <span><b id="blkName">‚Äî</b> <span style="opacity:.8">/ full breakdown in CAMPAIGN</span></span>
            </div>

            <p class="blkText" id="blkText" style="margin-top:10px;">‚Äî</p>

            <div class="payRow">
              <button class="btn" id="openPaywall">OPEN CAMPAIGN MODE</button>
              <span class="micro">–∑–∞–∫—Ä—ã—Ç–∞—è –≤–µ—Ä—Å–∏—è –∞–Ω–∞–ª–∏–∑–∞. –¥–æ—Å—Ç—É–ø –ø–æ invite/–æ–ø–ª–∞—Ç–µ (–±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–æ).</span>
            </div>
          </div>

          <div class="box">
            <div class="boxTitle">
              <span>CAMPAIGN MAP</span>
              <span class="pill">locked</span>
            </div>
            <p class="modeText" style="margin:0">
              MODULE 0 ‚Äî INITIALIZATION<br/>
              MODULE 1 ‚Äî CURRENT MODE<br/>
              MODULE 2 ‚Äî ENERGY SYSTEM<br/>
              MODULE 3 ‚Äî CORE BLOCKERS<br/>
              MODULE 4 ‚Äî DECISION SYSTEM<br/>
              MODULE 5 ‚Äî UPGRADE PATH
            </p>
          </div>
        </div>
      </div>
    </section>

    <footer class="panel footer">
      <div class="mono">PRTCL 108</div>
      <div>UI: <span class="mono">ice / sky / glass</span></div>
      <div>¬© <span id="year"></span></div>
    </footer>
  </div>

  <!-- SCAN MODAL -->
  <div class="overlay" id="scanOverlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">SCAN / INITIALIZATION</div>
        <button class="x" id="closeScan" aria-label="Close">√ó</button>
      </div>

      <div class="grid2" style="margin:0; padding:18px;">
        <div class="panel scanBox" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 6px;">–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö</h2>
            <p style="margin:0 0 12px;">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî –∫–ª—é—á –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –í—Ä–µ–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ø–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏.</p>

            <form id="scanForm">
              <div class="row2">
                <div class="field">
                  <label for="dob">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                  <input id="dob" type="date" required/>
                </div>
                <div class="field">
                  <label for="tob">–í—Ä–µ–º—è (optional)</label>
                  <input id="tob" type="time"/>
                </div>
              </div>

              <div class="row2">
                <div class="field">
                  <label for="avatarPick">Avatar</label>
                  <select id="avatarPick">
                    <option value="assets/char-1.jpg">AVATAR 01</option>
                    <option value="assets/char-2.jpg">AVATAR 02</option>
                    <option value="assets/char-3.jpg">AVATAR 03</option>
                    <option value="assets/char-4.jpg">AVATAR 04</option>
                    <option value="assets/char-5.jpg">AVATAR 05</option>
                    <option value="assets/char-6.jpg">AVATAR 06</option>
                  </select>
                </div>

                <div class="field">
                  <label>–ú–∏–Ω–∏-–¥–æ–≥–æ–≤–æ—Ä</label>
                  <div class="contract">
                    <div class="contractTitle">PRTCL / CONSENT</div>
                    <p class="contractText">
                      –Ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é, —á—Ç–æ –ø—Ä–æ—Ö–æ–∂—É SCAN –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ.
                      –Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è,
                      –∞ –Ω–µ –ø—Ä–∏–≥–æ–≤–æ—Ä –∏ –Ω–µ ¬´–∏—Å—Ç–∏–Ω–∞¬ª.
                      –Ø –±–µ—Ä—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∞.
                    </p>

                    <div class="sigWrap" style="margin-top:10px;">
                      <div class="sigHint" id="sigHint">–ø–æ–¥–ø–∏—Å—å –ø–∞–ª—å—Ü–µ–º / —Å—Ç–∏–ª—É—Å–æ–º</div>
                      <canvas id="sig"></canvas>
                    </div>

                    <div class="sigActions">
                      <button class="btnMini" type="button" id="clearSig">–û—á–∏—Å—Ç–∏—Ç—å</button>
                      <span class="hint" id="sigStatus">–ø–æ–¥–ø–∏—Å—å: –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</span>
                    </div>
                  </div>
                </div>
              </div>

              <button class="btn" type="submit">START SCAN ‚Üí</button>
              <div class="hint">–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (demo). –î–∞–ª—å—à–µ –ø–æ–¥–∫–ª—é—á–∏–º –∞–∫–∫–∞—É–Ω—Ç—ã/–±—ç–∫–µ–Ω–¥.</div>
            </form>
          </div>
        </div>

        <div class="panel" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 6px;">–ß—Ç–æ —Ç—ã —É–≤–∏–¥–∏—à—å</h2>
            <p style="margin:0 0 12px;">–≠—Ç–æ –Ω–µ –≥–∞–¥–∞–Ω–∏–µ. –≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.</p>

            <div class="miniList">
              <div class="miniItem">
                <span class="chip">BASE</span>
                <div>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: —ç–Ω–µ—Ä–≥–∏—è, —Ñ–æ–∫—É—Å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –∏–º–ø—É–ª—å—Å, –∞–¥–∞–ø—Ç–∞—Ü–∏—è.</div>
              </div>
              <div class="miniItem">
                <span class="chip">MODE</span>
                <div>–†–µ–∂–∏–º –∂–∏–∑–Ω–∏ —Å–µ–π—á–∞—Å: –≤—ã–∂–∏–≤–∞–Ω–∏–µ / —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è / –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è / —Ä–æ—Å—Ç / –ø–µ—Ä–µ–≥—Ä–µ–≤.</div>
              </div>
              <div class="miniItem">
                <span class="chip">BLOCKERS</span>
                <div>–ì–¥–µ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –≤—ã–±–æ—Ä. –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –±–ª–æ–∫–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ CAMPAIGN.</div>
              </div>
              <div class="miniItem">
                <span class="chip">UPGRADE</span>
                <div>–ß—Ç–æ –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å –ø–µ—Ä–≤—ã–º ‚Äî –±–µ–∑ —Ö–∞–æ—Å–∞ –∏ ‚Äú—Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è –≤–æ –≤—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã‚Äù.</div>
              </div>
            </div>

            <div class="divider"></div>
            <div class="hint">–ü–æ—Å–ª–µ —Å–∫–∞–Ω–∞ —Ç—ã –ø–æ–ø–∞–¥—ë—à—å –≤ –ª–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥. –û—Ç—Ç—É–¥–∞ ‚Äî –≤—Ö–æ–¥ –≤ –∑–∞–∫—Ä—ã—Ç—É—é –≤–µ—Ä—Å–∏—é –∞–Ω–∞–ª–∏–∑–∞.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROCESSING OVERLAY -->
  <div class="overlay processing" id="procOverlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">PROCESSING</div>
        <button class="x" id="cancelProc" aria-label="Close">√ó</button>
      </div>
      <div class="procInner">
        <h3 class="procTitle" style="margin:0;">–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏‚Ä¶</h3>
        <div class="bar"><i id="pbar"></i></div>
        <div class="log" id="plog"></div>
        <div class="hint" style="margin-top:10px;">*–Ω–∞ –ø—Ä–æ–¥–µ —ç—Ç–∞ —Å—Ç–∞–¥–∏—è –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è</div>
      </div>
    </div>
  </div>

  <!-- PAYWALL OVERLAY -->
  <div class="overlay" id="payOverlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">CAMPAIGN MODE / ACCESS</div>
        <button class="x" id="closePay" aria-label="Close">√ó</button>
      </div>
      <div style="padding:18px;">
        <div class="panel" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 8px;">PRTCL 108 ‚Äî CAMPAIGN MODE</h2>
            <p style="margin:0 0 12px;">
              –ó–∞–∫—Ä—ã—Ç–∞—è –≤–µ—Ä—Å–∏—è –∞–Ω–∞–ª–∏–∑–∞: –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –±–ª–æ–∫–µ—Ä–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏, in-game actions –∏ –º–∞—Ä—à—Ä—É—Ç upgrade.
            </p>

            <div class="miniList">
              <div class="miniItem"><span class="chip">UNLOCK</span><div>–ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –±–ª–æ–∫–µ—Ä–æ–≤ + –º–µ—Ö–∞–Ω–∏–∑–º –∞–∫—Ç–∏–≤–∞—Ü–∏–∏.</div></div>
              <div class="miniItem"><span class="chip">QUESTS</span><div>In-game actions –Ω–∞ 4‚Äì6 –Ω–µ–¥–µ–ª—å (–±–µ–∑ –≤–æ–¥—ã).</div></div>
              <div class="miniItem"><span class="chip">RESCAN</span><div>–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–∫–∞–Ω—ã –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –¥–∏–Ω–∞–º–∏–∫–∏.</div></div>
              <div class="miniItem"><span class="chip">PATH</span><div>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π upgrade-–ø–ª–∞–Ω –≤–º–µ—Å—Ç–æ —Ö–∞–æ—Å–∞ ‚Äú—Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è‚Äù.</div></div>
            </div>

            <div class="divider"></div>

            <div class="payRow">
              <button class="btn" id="activateCampaign">ACTIVATE ACCESS</button>
              <span class="micro">—Ü–µ–Ω–Ω–∏–∫ —Å–∫—Ä—ã—Ç. –ø–æ–¥–∫–ª—é—á–∏–º –æ–ø–ª–∞—Ç—É/–∏–Ω–≤–∞–π—Ç—ã —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º.</span>
            </div>

            <div class="hint" style="margin-top:10px;">
              *—Å–µ–π—á–∞—Å —ç—Ç–æ –¥–µ–º–æ-–∫–Ω–æ–ø–∫–∞. –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã/–∏–Ω–≤–∞–π—Ç–æ–≤ —Å–¥–µ–ª–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const $ = (s, r=document) => r.querySelector(s);

    const year = $("#year");
    year.textContent = new Date().getFullYear();

    // Avatars
    const heroImg = $("#heroImg");
    const dashAvatar = $("#dashAvatar");
    const thumbs = $("#thumbs");
    thumbs.addEventListener("click", (e) => {
      const t = e.target.closest(".thumb");
      if(!t) return;
      const src = t.dataset.src;
      heroImg.src = src;
      dashAvatar.src = src;
      const pick = $("#avatarPick");
      if (pick) pick.value = src;
      saveState({ avatar: src });
    });

    // Modal controls
    const scanOverlay = $("#scanOverlay");
    const procOverlay = $("#procOverlay");
    const payOverlay = $("#payOverlay");

    const openScan = () => { scanOverlay.style.display = "flex"; initSignature(); };
    const closeScan = () => { scanOverlay.style.display = "none"; };

    $("#openScan").addEventListener("click", openScan);
    $("#closeScan").addEventListener("click", closeScan);

    $("#viewDemo").addEventListener("click", () => {
      ensureProfile();
      showDashboard();
      document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
    });

    // Processing UI
    const plog = $("#plog");
    const pbar = $("#pbar");
    let procTimer = null;

    const openProcessing = () => {
      procOverlay.style.display = "flex";
      plog.textContent = "";
      pbar.style.width = "0%";
    };
    const closeProcessing = () => {
      procOverlay.style.display = "none";
      if(procTimer) clearInterval(procTimer);
      procTimer = null;
    };
    $("#cancelProc").addEventListener("click", closeProcessing);

    // Paywall UI
    const openPay = () => payOverlay.style.display = "flex";
    const closePay = () => payOverlay.style.display = "none";
    $("#openPaywall").addEventListener("click", openPay);
    $("#closePay").addEventListener("click", closePay);

    // Storage (demo: localStorage)
    const KEY = "prtcl108_profile_v1";
    const loadState = () => {
      try { return JSON.parse(localStorage.getItem(KEY) || "{}"); } catch { return {}; }
    };
    const saveState = (patch) => {
      const cur = loadState();
      const next = {...cur, ...patch};
      localStorage.setItem(KEY, JSON.stringify(next));
      return next;
    };

    // Seed mechanics (demo generator ‚Äî deterministic from DOB+TOB)
    function hashStr(str){
      let h = 2166136261;
      for (let i=0; i<str.length; i++){
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return (h >>> 0);
    }
    function rng(seed){
      let x = seed || 123456789;
      return () => {
        x ^= x << 13; x >>>= 0;
        x ^= x >> 17; x >>>= 0;
        x ^= x << 5;  x >>>= 0;
        return (x >>> 0) / 4294967296;
      };
    }

    const MODES = [
      {id:"survival",  name:"survival",  text:"–°–∏—Å—Ç–µ–º–∞ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é –∏ –¥–µ—Ä–∂–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ —Ç—ã —á–∞—â–µ –≤—ã–±–∏—Ä–∞–µ—à—å ¬´–º–∏–Ω–∏–º—É–º —Ä–∏—Å–∫–∞¬ª –≤–º–µ—Å—Ç–æ –¥–≤–∏–∂–µ–Ω–∏—è."},
      {id:"stabilize", name:"stabilization", text:"–°–∏—Å—Ç–µ–º–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ–ø–æ—Ä—É –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –≤–∞–∂–Ω–æ –Ω–µ —É—Å–∫–æ—Ä—è—Ç—å—Å—è, –∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É."},
      {id:"comp",      name:"compensation", text:"–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç –≤–Ω–µ—à–Ω–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏. –ß–∞—Å—Ç–æ –º–Ω–æ–≥–æ —É—Å–∏–ª–∏–π ‚Äî –∏ –º–∞–ª–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è."},
      {id:"growth",    name:"growth",    text:"–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–ø—Ä–∞–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é —Ç–æ—á–µ—á–Ω–æ, –∞ –Ω–µ —Ä–∞—Å–ø—ã–ª—è—Ç—å—Å—è."},
      {id:"overheat",  name:"overheat",  text:"–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≥—Ä–µ—Ç–∞: –º–Ω–æ–≥–æ –∑–∞–¥–∞—á/–æ–∂–∏–¥–∞–Ω–∏–π/–Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è. –í–∞–∂–Ω–æ —Å–Ω—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –∏ –≤–µ—Ä–Ω—É—Ç—å —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å."},
    ];

    const BLOCKERS = [
      {name:"AVOIDANCE / CONTROL", text:"–ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞—â–∏—Ç—ã: –∏–∑–±–µ–≥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–µ—Ç–∞–ª–µ–π, –æ—Ç—Å—Ä–æ—á–∫–∏, –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∏. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–ª–ª—é–∑–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ —Ç–µ—Ä—è–µ—Ç—Å—è –¥–≤–∏–∂–µ–Ω–∏–µ."},
      {name:"SELF-DEVALUATION LOOP", text:"–ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è: –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ —Å–µ–±—è –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –°–Ω–∏–º–∞–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É."},
      {name:"OVERTHINKING LOCK", text:"–ê–ª–≥–æ—Ä–∏—Ç–º ¬´–¥—É–º–∞—Ç—å –≤–º–µ—Å—Ç–æ –¥–µ–ª–∞—Ç—å¬ª. –ú–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π, –º–∞–ª–æ –¥–µ–π—Å—Ç–≤–∏–π. –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –æ—à–∏–±–∫–∏, –Ω–æ –ª–∏—à–∞–µ—Ç –æ–ø—ã—Ç–∞."},
      {name:"PEOPLE-PLEASING MASK", text:"–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–≥–ª–∞—Å–∏—è —Ä–∞–¥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –í –º–æ–º–µ–Ω—Ç –¥–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç ¬´–±—ã—Ç—å —É–¥–æ–±–Ω—ã–º¬ª, —Ç–µ—Ä—è—è –≥—Ä–∞–Ω–∏—Ü—ã –∏ –≥–æ–ª–æ—Å."},
      {name:"HYPER-INDEPENDENCE", text:"–ê–ª–≥–æ—Ä–∏—Ç–º –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è: –Ω–µ –ø—Ä–æ—Å–∏—Ç—å, –Ω–µ –¥–µ–ª–∏—Ç—å—Å—è, –Ω–µ –æ–ø–∏—Ä–∞—Ç—å—Å—è. –î–µ—Ä–∂–∏—Ç —Å–∏–ª—É, –Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–µ—Å—É—Ä—Å."},
    ];

    function generateProfile(dob, tob){
      const seedStr = `${dob || "0000-00-00"}|${tob || "00:00"}`;
      const seed = hashStr(seedStr);
      const r = rng(seed);

      const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
      const p = () => Math.round(clamp(35 + r()*60, 20, 98));

      const energy = p();
      const focus = p();
      const stability = p();
      const drive = p();
      const adapt = p();

      const mode = MODES[Math.floor(r()*MODES.length)];
      const blk = BLOCKERS[Math.floor(r()*BLOCKERS.length)];

      const avatarIndex = (seed % 6) + 1;
      const avatar = `assets/char-${avatarIndex}.jpg`;

      return { seedStr, seed, avatar, params:{energy,focus,stability,drive,adapt}, mode, blocker: blk };
    }

    function ensureProfile(){
      const st = loadState();
      if(st && st.dob) return st;

      const demo = generateProfile("1996-08-01", "01:30");
      const saved = saveState({
        dob: demo.seedStr.split("|")[0],
        tob: demo.seedStr.split("|")[1],
        avatar: demo.avatar,
        seed: demo.seed,
        seedStr: demo.seedStr,
        params: demo.params,
        mode: demo.mode,
        blocker: demo.blocker,
        campaignUnlocked: false
      });
      return saved;
    }

    function applyDashboard(st){
      const avatar = st.avatar || "assets/char-1.jpg";
      heroImg.src = avatar;
      dashAvatar.src = avatar;

      $("#seedPill").textContent = `seed: ${st.dob || "‚Äî"}${st.tob ? " " + st.tob : ""}`;
      $("#accessBadge").textContent = st.campaignUnlocked ? "access: campaign" : "access: locked";

      const setMeter = (fillId, valId, v) => {
        $(fillId).style.width = `${v}%`;
        $(valId).textContent = `${v}/100`;
      };
      setMeter("#mEnergy","#vEnergy", st.params?.energy ?? 0);
      setMeter("#mFocus","#vFocus", st.params?.focus ?? 0);
      setMeter("#mStability","#vStability", st.params?.stability ?? 0);
      setMeter("#mDrive","#vDrive", st.params?.drive ?? 0);
      setMeter("#mAdapt","#vAdapt", st.params?.adapt ?? 0);

      $("#modePill").textContent = st.mode?.name || "‚Äî";
      $("#modeText").textContent = st.mode?.text || "‚Äî";

      $("#blkName").textContent = st.blocker?.name || "‚Äî";
      $("#blkText").textContent = st.blocker?.text || "‚Äî";

      $("#hudTag").textContent = st.campaignUnlocked ? "PRTCL / CAMPAIGN" : "PRTCL / ICE";
      $("#hudLine").textContent = st.campaignUnlocked
        ? "CAMPAIGN MODE –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –î–∞–ª—å—à–µ ‚Äî –º–æ–¥—É–ª–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è."
        : "–û–±—Ä–∞–∑ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–º—ã—Å–ª –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç—Ä–µ–∑–≤—ã–º.";
    }

    function showDashboard(){
      const st = ensureProfile();
      applyDashboard(st);
      $(".dashWrap").style.display = "block";
    }

    // ---- Signature pad (finger/stylus) ----
    let sigInited = false;
    let hasSignature = false;

    function initSignature(){
      if(sigInited) return;
      sigInited = true;

      const canvas = $("#sig");
      const hint = $("#sigHint");
      const status = $("#sigStatus");
      const clearBtn = $("#clearSig");

      const ctx = canvas.getContext("2d");

      function resize(){
        const rect = canvas.getBoundingClientRect();
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);
        ctx.lineWidth = 2.2;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.strokeStyle = "rgba(217,251,255,.85)";
      }

      // ensure correct size after modal open
      setTimeout(resize, 0);
      window.addEventListener("resize", resize);

      let drawing = false;
      let last = null;

      function setSigned(v){
        hasSignature = v;
        if(hasSignature){
          hint.style.display = "none";
          status.textContent = "–ø–æ–¥–ø–∏—Å—å: –¥–æ–±–∞–≤–ª–µ–Ω–∞";
        } else {
          hint.style.display = "block";
          status.textContent = "–ø–æ–¥–ø–∏—Å—å: –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞";
        }
      }

      function posFromEvent(e){
        const rect = canvas.getBoundingClientRect();
        const pt = (e.touches && e.touches[0]) ? e.touches[0] : e;
        return { x: pt.clientX - rect.left, y: pt.clientY - rect.top };
      }

      function start(e){
        e.preventDefault();
        drawing = true;
        last = posFromEvent(e);
      }
      function move(e){
        if(!drawing) return;
        e.preventDefault();
        const p = posFromEvent(e);
        ctx.beginPath();
        ctx.moveTo(last.x, last.y);
        ctx.lineTo(p.x, p.y);
        ctx.stroke();
        last = p;
        setSigned(true);
      }
      function end(e){
        if(!drawing) return;
        e.preventDefault();
        drawing = false;
        last = null;
      }

      canvas.addEventListener("mousedown", start);
      canvas.addEventListener("mousemove", move);
      window.addEventListener("mouseup", end);

      canvas.addEventListener("touchstart", start, {passive:false});
      canvas.addEventListener("touchmove", move, {passive:false});
      window.addEventListener("touchend", end, {passive:false});

      clearBtn.addEventListener("click", () => {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        setSigned(false);
      });

      setSigned(false);
    }

    // Scan submit
    $("#scanForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const dob = $("#dob").value;
      const tob = $("#tob").value;
      const avatar = $("#avatarPick").value;

      if(!dob){ alert("–í–≤–µ–¥–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è."); return; }
      if(!hasSignature){
        alert("–ü–æ—Å—Ç–∞–≤—å –ø–æ–¥–ø–∏—Å—å –≤ –º–∏–Ω–∏-–¥–æ–≥–æ–≤–æ—Ä–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.");
        return;
      }

      closeScan();
      openProcessing();

      const profile = generateProfile(dob, tob);
      profile.avatar = avatar || profile.avatar;

      const lines = [
        "reading input‚Ä¶",
        "initializing model‚Ä¶",
        "mapping patterns‚Ä¶",
        "calculating parameters‚Ä¶",
        "detecting blockers‚Ä¶",
        "building dashboard‚Ä¶",
      ];
      let i = 0;
      let prog = 0;

      procTimer = setInterval(() => {
        if(i < lines.length){
          plog.textContent += (plog.textContent ? "\n" : "") + lines[i];
          i++;
          prog = Math.min(100, prog + Math.round(100/lines.length));
          pbar.style.width = prog + "%";
        } else {
          clearInterval(procTimer);
          procTimer = null;

          saveState({
            dob,
            tob,
            avatar: profile.avatar,
            seed: profile.seed,
            seedStr: profile.seedStr,
            params: profile.params,
            mode: profile.mode,
            blocker: profile.blocker,
            campaignUnlocked: false
          });

          closeProcessing();
          showDashboard();
          document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
        }
      }, 520);
    });

    // Paywall demo activate (still demo)
    $("#activateCampaign").addEventListener("click", () => {
      saveState({ campaignUnlocked: true });
      closePay();
      showDashboard();
      document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
    });

    // init
    (function init(){
      const st = loadState();
      if(st && st.avatar){
        heroImg.src = st.avatar;
        dashAvatar.src = st.avatar;
      }
    })();
  </script>
</body>
</html>