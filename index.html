<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ADM MODE — скан</title>
  <meta name="description" content="ADM MODE — скан персонажа по дате рождения." />
  <style>
    :root{
      --bg0:#f7fbff;
      --bg1:#eef6ff;
      --glass: rgba(255,255,255,.66);
      --glass2: rgba(255,255,255,.42);
      --stroke: rgba(20, 60, 90, .10);
      --ink: #0c1b2a;
      --muted: rgba(12,27,42,.68);
      --brand: #19d3ff;
      --brand2:#7c5cff;
      --shadow: 0 28px 90px rgba(6,22,44,.18);
      --shadow2: 0 18px 55px rgba(6,22,44,.14);
      --r: 22px;
      --r2: 28px;
      --ease: cubic-bezier(.2,.9,.2,1);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 15% 10%, rgba(25,211,255,.20), transparent 60%),
        radial-gradient(900px 700px at 90% 0%, rgba(124,92,255,.14), transparent 55%),
        radial-gradient(900px 700px at 70% 90%, rgba(25,211,255,.12), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.13'/%3E%3C/svg%3E");
      mix-blend-mode:multiply;
      opacity:.30;
      z-index:0;
    }
    a{ color:inherit; text-decoration:none; }
    .wrap{ position:relative; z-index:1; }

    /* Top bar */
    .topbar{
      position:sticky; top:0;
      z-index:50;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.40));
      border-bottom: 1px solid var(--stroke);
    }
    .topbar .inner{
      max-width:1120px;
      margin:0 auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      letter-spacing:.12em; text-transform:uppercase;
      font-weight:800; font-size:12px;
      color: rgba(12,27,42,.82);
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background:
        radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.2) 35%),
        linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: 0 0 0 6px rgba(25,211,255,.12);
      animation: pulse 2.6s var(--ease) infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); box-shadow:0 0 0 6px rgba(25,211,255,.12); }
      50%{ transform:scale(1.08); box-shadow:0 0 0 10px rgba(25,211,255,.08); }
    }

    .btn{
      border:1px solid rgba(25,211,255,.28);
      background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.35));
      border-radius:999px;
      padding:10px 14px;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 14px 40px rgba(6,22,44,.10);
      transition: transform .25s var(--ease), box-shadow .25s var(--ease);
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 18px 55px rgba(6,22,44,.14); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.primary{
      border:1px solid rgba(25,211,255,.42);
      background:
        radial-gradient(140px 80px at 25% 25%, rgba(25,211,255,.30), transparent 60%),
        linear-gradient(135deg, rgba(25,211,255,.18), rgba(124,92,255,.14)),
        linear-gradient(180deg, rgba(255,255,255,.76), rgba(255,255,255,.30));
    }

    /* Hero layout */
    .hero{
      max-width:1120px;
      margin:0 auto;
      padding:52px 18px 36px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{ grid-template-columns:1fr; padding-top:32px; }
    }

    .card{
      border: 1px solid var(--stroke);
      border-radius: var(--r2);
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,.38));
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(800px 240px at 20% 0%, rgba(25,211,255,.16), transparent 60%),
        radial-gradient(700px 250px at 80% 15%, rgba(124,92,255,.10), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.40), rgba(255,255,255,0));
      pointer-events:none;
    }

    .heroMain{ padding:26px 24px; }
    .kicker{
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: rgba(12,27,42,.56);
      display:flex; flex-wrap:wrap; gap:8px;
    }
    .chip{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(12,27,42,.10);
      background: rgba(255,255,255,.55);
    }

    .title{
      margin:14px 0 8px;
      font-size: clamp(36px, 4.2vw, 62px);
      line-height:1.02;
      letter-spacing:-.03em;
    }
    .adm{
      display:inline-block;
      position:relative;
      padding:4px 10px 6px;
      margin-left:-10px;
      border-radius: 16px;
      background:
        radial-gradient(220px 90px at 20% 30%, rgba(25,211,255,.28), transparent 60%),
        radial-gradient(240px 90px at 80% 30%, rgba(124,92,255,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.68), rgba(255,255,255,.25));
      border: 1px solid rgba(25,211,255,.24);
      box-shadow: 0 18px 50px rgba(6,22,44,.10);
      overflow:hidden;
    }
    .adm::after{
      content:"";
      position:absolute; inset:-40px;
      background: linear-gradient(120deg,
        transparent 0%,
        rgba(255,255,255,.0) 40%,
        rgba(255,255,255,.55) 50%,
        rgba(255,255,255,0) 60%,
        transparent 100%);
      transform: translateX(-60%) rotate(8deg);
      animation: shine 4.2s var(--ease) infinite;
      opacity:.9;
      pointer-events:none;
    }
    @keyframes shine{
      0%{ transform: translateX(-70%) rotate(8deg); opacity:.0; }
      18%{ opacity:.85; }
      42%{ transform: translateX(70%) rotate(8deg); opacity:.0; }
      100%{ transform: translateX(70%) rotate(8deg); opacity:.0; }
    }

    .sub{
      margin: 0 0 14px;
      font-size: 15px;
      line-height:1.55;
      color: var(--muted);
      max-width: 62ch;
    }

    .manifest{
      margin-top:14px;
      padding:14px 14px;
      border-radius: 18px;
      border: 1px dashed rgba(12,27,42,.16);
      background: rgba(255,255,255,.46);
      color: rgba(12,27,42,.78);
      font-size:14px;
      line-height:1.5;
      position:relative;
      overflow:hidden;
    }
    .manifest .label{
      font-size:11px;
      letter-spacing:.16em;
      text-transform:uppercase;
      color: rgba(12,27,42,.52);
      margin-bottom:8px;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }
    .manifest .sig{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size:11px;
      color: rgba(12,27,42,.55);
      white-space:nowrap;
    }

    /* Scanner */
    .scanner{ padding:18px; display:flex; flex-direction:column; gap:12px; }
    .scannerTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .scannerTop h3{
      margin:0;
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: rgba(12,27,42,.68);
    }
    .status{
      font-size:12px;
      color: rgba(12,27,42,.56);
      display:flex; gap:8px; align-items:center;
      white-space:nowrap;
    }
    .led{
      width:8px; height:8px; border-radius:999px;
      background: rgba(12,27,42,.18);
      box-shadow: 0 0 0 4px rgba(12,27,42,.06);
    }
    .led.live{
      background:
        radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.25) 35%),
        linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: 0 0 0 6px rgba(25,211,255,.10), 0 0 22px rgba(25,211,255,.28);
      animation: blink 1.4s var(--ease) infinite;
    }
    @keyframes blink{ 0%,100%{ filter:saturate(1); } 50%{ filter:saturate(1.25) brightness(1.04); } }

    .fieldRow{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    @media (max-width: 520px){ .fieldRow{ grid-template-columns:1fr; } }

    .field{
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(12,27,42,.10);
      background: rgba(255,255,255,.58);
      display:flex; flex-direction:column; gap:8px;
    }
    .field label{
      font-size:11px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: rgba(12,27,42,.52);
    }
    .field input{
      border:none; outline:none;
      font-size:14px;
      background:transparent;
      color: rgba(12,27,42,.92);
      padding:0;
    }

    .scanPane{
      position:relative;
      border-radius: 18px;
      border:1px solid rgba(12,27,42,.10);
      background:
        radial-gradient(420px 180px at 15% 10%, rgba(25,211,255,.18), transparent 60%),
        radial-gradient(420px 180px at 85% 20%, rgba(124,92,255,.14), transparent 60%),
        rgba(255,255,255,.52);
      overflow:hidden;
      height: 150px;
    }
    .scanGrid{
      position:absolute; inset:0;
      background-image:
        linear-gradient(to right, rgba(12,27,42,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(12,27,42,.06) 1px, transparent 1px);
      background-size: 22px 22px;
      opacity:.55;
      mask-image: radial-gradient(circle at 30% 40%, black 0 55%, transparent 75%);
    }
    .scanLine{
      position:absolute; left:-20%; right:-20%;
      height:2px;
      top:-10%;
      background: linear-gradient(90deg, transparent, rgba(25,211,255,.95), transparent);
      box-shadow: 0 0 18px rgba(25,211,255,.50);
      opacity:0;
      transform: rotate(-7deg);
    }
    .scanPulse{
      position:absolute; inset:-40px;
      background: radial-gradient(circle at 30% 40%, rgba(25,211,255,.18), transparent 62%);
      opacity:.85;
      filter: blur(2px);
      animation: float 6.5s var(--ease) infinite;
    }
    @keyframes float{
      0%,100%{ transform: translate3d(0,0,0) scale(1); }
      50%{ transform: translate3d(8px,-10px,0) scale(1.02); }
    }
    .scanning .scanLine{ opacity:1; animation: scan 1.35s var(--ease) infinite; }
    @keyframes scan{
      0%{ top:-20%; opacity:0; }
      12%{ opacity:1; }
      50%{ top:55%; opacity:1; }
      88%{ opacity:1; }
      100%{ top:120%; opacity:0; }
    }

    .miniHint{
      font-size:12px;
      color: rgba(12,27,42,.56);
      line-height:1.45;
      margin-top:2px;
    }

    /* Modal */
    .modalBack{
      position:fixed; inset:0;
      background: rgba(5, 18, 34, .28);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:100;
      padding:16px;
    }
    .modalBack.show{ display:flex; }

    .modal{
      width:min(1100px, 100%);
      border-radius: 28px;
      border:1px solid rgba(255,255,255,.30);
      background:
        radial-gradient(1000px 500px at 20% 0%, rgba(25,211,255,.20), transparent 60%),
        radial-gradient(1000px 500px at 90% 10%, rgba(124,92,255,.18), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.45));
      box-shadow: 0 55px 140px rgba(6,22,44,.35);
      overflow:hidden;
      position:relative;
    }
    .modalHead{
      padding:14px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom:1px solid rgba(12,27,42,.10);
    }
    .modalTitle{
      display:flex; align-items:center; gap:10px;
      font-size:12px; letter-spacing:.18em; text-transform:uppercase;
      color: rgba(12,27,42,.70);
      font-weight:800;
    }
    .close{
      border:1px solid rgba(12,27,42,.12);
      background: rgba(255,255,255,.60);
      border-radius: 999px;
      padding:8px 10px;
      cursor:pointer;
      font-size:13px;
      white-space:nowrap;
    }

    .modalBody{
      padding:16px;
      display:grid;
      grid-template-columns: .9fr 1.1fr;
      gap:14px;
    }
    @media (max-width: 980px){ .modalBody{ grid-template-columns:1fr; } }

    /* PASS cards */
    .stack{ display:grid; gap:12px; }
    .pass{
      border-radius: 26px;
      border:1px solid rgba(12,27,42,.10);
      background:
        linear-gradient(135deg, rgba(255,255,255,.80), rgba(255,255,255,.40)),
        radial-gradient(900px 360px at 20% 0%, rgba(25,211,255,.18), transparent 60%),
        radial-gradient(900px 360px at 80% 10%, rgba(124,92,255,.14), transparent 60%);
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
    }
    .pass::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        linear-gradient(90deg, rgba(12,27,42,.06) 1px, transparent 1px),
        linear-gradient(0deg, rgba(12,27,42,.06) 1px, transparent 1px);
      background-size: 26px 26px;
      opacity:.28;
      mask-image: radial-gradient(circle at 30% 30%, black 0 55%, transparent 78%);
      pointer-events:none;
    }

    .seal{
      width:84px; height:84px;
      border-radius:999px;
      position:relative;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,.9), rgba(255,255,255,.25) 35%, rgba(255,255,255,.0) 65%),
        conic-gradient(from 120deg, rgba(25,211,255,.55), rgba(124,92,255,.40), rgba(25,211,255,.55));
      box-shadow: 0 18px 55px rgba(6,22,44,.16), 0 0 0 10px rgba(25,211,255,.08);
      filter: saturate(1.05);
    }
    .seal::before{
      content:"";
      position:absolute; inset:10px;
      border-radius:999px;
      border:1px dashed rgba(255,255,255,.72);
      opacity:.9;
    }
    .seal::after{
      content:"STAMP";
      position:absolute; inset:0;
      display:grid; place-items:center;
      font-size:11px;
      letter-spacing:.20em;
      font-weight:900;
      color: rgba(12,27,42,.72);
      text-transform:uppercase;
      transform: rotate(-12deg);
      text-shadow: 0 1px 0 rgba(255,255,255,.55);
    }

    /* Mini ID (как права) */
    .mini{
      padding:14px;
      display:grid;
      grid-template-columns: 92px 1fr;
      gap:12px;
      align-items:stretch;
      min-height: 170px;
    }
    .miniHead{
      grid-column: 1 / -1;
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
      margin-bottom:2px;
    }
    .miniHead .t{
      display:flex; flex-direction:column; gap:6px;
    }
    .miniHead .t1{
      font-size:12px; font-weight:900;
      letter-spacing:.18em; text-transform:uppercase;
      color: rgba(12,27,42,.70);
    }
    .miniHead .t2{
      font-size:12px; color: rgba(12,27,42,.58);
      letter-spacing:.12em; text-transform:uppercase;
    }

    .avatarFace{
      width:92px; height:110px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(12,27,42,.12);
      background: rgba(255,255,255,.60);
      position:relative;
    }
    .avatarFace img{
      width:100%; height:100%;
      object-fit:cover;
      /* делаем "фото лица" из одной картинки */
      object-position: 50% 18%;
      transform: scale(1.08);
      display:block;
      filter: saturate(1.02) contrast(1.02);
    }

    .miniInfo{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      align-content:start;
    }
    .kv{
      padding:10px 10px;
      border-radius: 16px;
      border:1px solid rgba(12,27,42,.10);
      background: rgba(255,255,255,.56);
    }
    .kv .k{
      font-size:10px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: rgba(12,27,42,.55);
      margin-bottom:6px;
    }
    .kv .v{
      font-size:14px;
      color: rgba(12,27,42,.90);
      font-weight:700;
      word-break:break-word;
    }

    .miniFoot{
      grid-column: 1 / -1;
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      border-top:1px solid rgba(12,27,42,.10);
      padding-top:10px;
      margin-top:2px;
      font-size:12px;
      color: rgba(12,27,42,.62);
    }
    .protoSig{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      letter-spacing:.06em;
      white-space:nowrap;
    }

    /* Full card (в полный рост + подробная характеристика) */
    .full{
      padding:14px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    .fullTop{
      display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
    }
    .fullTop .ttl{
      display:flex; flex-direction:column; gap:6px;
    }
    .fullTop .ttl .t1{
      font-size:12px; font-weight:900;
      letter-spacing:.18em; text-transform:uppercase;
      color: rgba(12,27,42,.70);
    }
    .fullTop .ttl .t2{
      font-size:22px; letter-spacing:-.02em;
      font-weight:850;
      color: rgba(12,27,42,.92);
    }

    .fullBody{
      display:grid;
      grid-template-columns: 1fr 1.2fr;
      gap:12px;
      align-items:stretch;
    }
    @media (max-width: 520px){
      .fullBody{ grid-template-columns:1fr; }
    }

    .avatarFull{
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(12,27,42,.12);
      background: rgba(255,255,255,.60);
      min-height: 320px;
      position:relative;
    }
    .avatarFull img{
      width:100%; height:100%;
      object-fit:cover;
      object-position: 50% 45%;
      display:block;
      transform: scale(1.02);
      filter: saturate(1.02) contrast(1.02);
    }
    .stats{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      align-content:start;
    }
    .line{
      padding:12px 12px;
      border-radius: 18px;
      border:1px solid rgba(12,27,42,.10);
      background: rgba(255,255,255,.56);
      color: rgba(12,27,42,.86);
      font-size:14px;
      line-height:1.45;
    }
    .line b{ color: rgba(12,27,42,.92); }

    /* Right panel (Terminal / upsell) */
    .panel{
      border-radius: 26px;
      border:1px solid rgba(12,27,42,.10);
      background: rgba(255,255,255,.52);
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
      min-height: 520px;
    }
    .panelHead{
      padding:14px 14px;
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      border-bottom: 1px solid rgba(12,27,42,.10);
    }
    .panelTitle{
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-weight:900;
      color: rgba(12,27,42,.70);
      display:flex; align-items:center; gap:10px;
    }
    .lights{ display:flex; gap:8px; }
    .lights span{ width:10px; height:10px; border-radius:999px; background: rgba(12,27,42,.14); }
    .lights span:nth-child(1){ background: rgba(25,211,255,.35); }
    .lights span:nth-child(2){ background: rgba(124,92,255,.25); }
    .lights span:nth-child(3){ background: rgba(12,27,42,.14); }

    .panelBody{ padding:14px; }
    .log{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size:12px;
      line-height:1.6;
      color: rgba(12,27,42,.78);
      margin:0;
      white-space:pre-wrap;
    }
    .log .muted{ color: rgba(12,27,42,.52); }
    .log .ok{ color: rgba(0,120,120,.85); }
    .log .warn{ color: rgba(124,92,255,.85); }

    .paybox{
      margin-top:12px;
      padding:12px 12px;
      border-radius: 18px;
      border:1px solid rgba(25,211,255,.20);
      background:
        radial-gradient(260px 120px at 20% 20%, rgba(25,211,255,.18), transparent 60%),
        radial-gradient(260px 120px at 80% 25%, rgba(124,92,255,.12), transparent 60%),
        rgba(255,255,255,.56);
    }
    .paybox h4{
      margin:0 0 6px;
      font-size:14px;
      letter-spacing:-.01em;
    }
    .paybox p{
      margin:0 0 10px;
      font-size:12px;
      color: rgba(12,27,42,.62);
      line-height:1.45;
    }
    .footer{
      max-width:1120px;
      margin:0 auto;
      padding: 0 18px 28px;
      color: rgba(12,27,42,.56);
      font-size:12px;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .footer .p{
      letter-spacing:.14em;
      text-transform:uppercase;
      font-weight:900;
      color: rgba(12,27,42,.62);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header class="topbar">
      <div class="inner">
        <div class="brand">
          <span class="dot"></span>
          <span>protocol</span>
          <span style="opacity:.65">/</span>
          <span style="opacity:.85">ADM MODE</span>
        </div>

        <button class="btn primary" id="scanTopBtn">
          сканировать multipass <span style="opacity:.65">↳</span>
        </button>
      </div>
    </header>

    <main class="hero" id="top">
      <!-- Minimal hero -->
      <section class="card heroMain">
        <div class="kicker">
          <span class="chip">быстро</span>
          <span class="chip">понятно</span>
          <span class="chip">по делу</span>
        </div>

        <h1 class="title">
          <span class="adm">ADM MODE</span>
          <span style="display:block; margin-top:6px;">скан персонажа</span>
        </h1>

        <p class="sub">
          Введи дату рождения (время — если знаешь). Получишь базовые характеристики.
          Полная карточка откроет подробную расшифровку.
        </p>

        <div class="manifest" aria-live="polite">
          <div class="label">
            <span>фраза протокола</span>
            <span class="sig">protocol // signed</span>
          </div>
          <div id="manifestText">Я не ищу объяснений. Я собираю свой билд.</div>
        </div>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn primary" id="scanMainBtn">сканировать multipass</button>
          <button class="btn" id="shuffleManifest">обновить фразу</button>
        </div>

        <div class="miniHint">
          Время рождения — не обязательно. Если нет — оставь пустым.
        </div>
      </section>

      <!-- Scanner -->
      <aside class="card scanner">
        <div class="scannerTop">
          <h3>сканер</h3>
          <div class="status">
            <span class="led" id="led"></span>
            <span id="statusText">жду дату</span>
          </div>
        </div>

        <div class="fieldRow">
          <div class="field">
            <label for="dob">дата рождения</label>
            <input id="dob" type="date" />
          </div>
          <div class="field">
            <label for="tob">время (если знаешь)</label>
            <input id="tob" type="time" />
          </div>
        </div>

        <div class="scanPane" id="scanPane" aria-hidden="true">
          <div class="scanPulse"></div>
          <div class="scanGrid"></div>
          <div class="scanLine"></div>
        </div>

        <button class="btn primary" id="scanBtn">start scan</button>
        <div class="miniHint">
          После скана появятся 2 MULTIPASS: маленький (как права) и полный (в рост).
        </div>
      </aside>
    </main>

    <section class="hero" style="padding-top:0; grid-template-columns: 1fr; gap:16px;">
      <div class="panel">
        <div class="panelHead">
          <div class="panelTitle">terminal</div>
          <div class="lights" aria-hidden="true"><span></span><span></span><span></span></div>
        </div>
        <div class="panelBody">
<pre class="log" id="termLog"><span class="muted">[system]</span> ready
<span class="muted">[hint]</span> scan starts after date input
<span class="muted">[protocol]</span> signature embedded</pre>

          <div class="paybox">
            <h4>полная карточка игрока</h4>
            <p>
              В базовом скане ты видишь характеристики. В полной карточке — что с этим делать:
              сильные стороны, слабые места, триггеры и понятные шаги.
            </p>
            <button class="btn primary" id="buyBtn">открыть полный доступ</button>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="p">PROTOCOL</div>
      <div>© <span id="year"></span> ADM MODE — signature inside.</div>
    </footer>
  </div>

  <!-- MODAL with 2 images: mini (face) + full (full body) -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true" aria-label="MULTIPASS">
    <div class="modal">
      <div class="modalHead">
        <div class="modalTitle">
          <span class="dot" style="animation:none; box-shadow:0 0 0 8px rgba(25,211,255,.10);"></span>
          <span>multipass / generated</span>
        </div>
        <button class="close" id="closeModal">закрыть</button>
      </div>

      <div class="modalBody">
        <div class="stack">
          <!-- MINI ID (face photo) -->
          <div class="pass">
            <div class="mini">
              <div class="miniHead">
                <div class="t">
                  <div class="t1">MULTIPASS</div>
                  <div class="t2">ADM MODE</div>
                </div>
                <div class="seal" aria-hidden="true" title="STAMP"></div>
              </div>

              <div class="avatarFace" title="Фото лица">
                <!-- ВАЖНО:
                  Положи картинку персонажа в assets/character-full.jpg
                  Это будет и "фото лица" (автокроп), и "в полный рост" ниже.
                -->
                <img id="faceImg" src="assets/character-full.jpg" alt="Фото лица">
              </div>

              <div class="miniInfo">
                <div class="kv">
                  <div class="k">id</div>
                  <div class="v" id="p_id">—</div>
                </div>
                <div class="kv">
                  <div class="k">доступ</div>
                  <div class="v" id="p_access">BASIC</div>
                </div>
                <div class="kv">
                  <div class="k">роль</div>
                  <div class="v" id="p_role">—</div>
                </div>
                <div class="kv">
                  <div class="k">энергия</div>
                  <div class="v" id="p_energy">—</div>
                </div>
              </div>

              <div class="miniFoot">
                <div class="protoSig" id="p_sig">protocol // signed</div>
                <div id="p_time">—</div>
              </div>
            </div>
          </div>

          <!-- FULL CARD (full body + detailed stats) -->
          <div class="pass">
            <div class="full">
              <div class="fullTop">
                <div class="ttl">
                  <div class="t1">FULL PLAYER CARD</div>
                  <div class="t2">характеристики</div>
                </div>
                <div class="seal" aria-hidden="true" style="transform:scale(.92) rotate(6deg);"></div>
              </div>

              <div class="fullBody">
                <div class="avatarFull" title="Фото в полный рост">
                  <img id="fullImg" src="assets/character-full.jpg" alt="Фото в полный рост">
                </div>

                <div class="stats">
                  <div class="line"><b>Роль:</b> <span id="d_role">—</span></div>
                  <div class="line"><b>Как действуешь:</b> <span id="d_action">—</span></div>
                  <div class="line"><b>Общение:</b> <span id="d_social">—</span></div>
                  <div class="line"><b>Сильная сторона:</b> <span id="d_strong">—</span></div>
                  <div class="line"><b>Слабое место:</b> <span id="d_weak">—</span></div>
                  <div class="line"><b>Триггер:</b> <span id="d_trigger">—</span></div>
                  <div class="line"><b>Навык:</b> <span id="d_skill">—</span></div>
                  <div class="line"><b>Бонус:</b> <span id="d_bonus">—</span></div>
                  <div class="line"><b>Задача сейчас:</b> <span id="d_quest">—</span></div>
                </div>
              </div>

              <div style="display:flex; gap:10px; flex-wrap:wrap;">
                <button class="btn primary" id="copyBtn">копировать</button>
                <button class="btn" id="regenBtn">пересканировать</button>
              </div>

              <div class="miniHint">
                Базовый скан показывает характеристики. Полный доступ — расшифровка и пошаговые действия.
              </div>
            </div>
          </div>
        </div>

        <!-- Right: output / upsell -->
        <div class="panel" style="min-height: 540px;">
          <div class="panelHead">
            <div class="panelTitle">terminal / output</div>
            <div class="lights" aria-hidden="true"><span></span><span></span><span></span></div>
          </div>
          <div class="panelBody">
<pre class="log" id="termOut"><span class="muted">[scan]</span> waiting...</pre>

            <div class="paybox" style="margin-top:12px;">
              <h4>unlock: полный доступ</h4>
              <p>Откроем подробную карточку: “почему так”, “что с этим делать” и “как качаться”.</p>
              <button class="btn primary" id="buyBtn2">открыть полный доступ</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ==========================
    // НАСТРОЙКА ФОТО ДЛЯ MULTIPASS
    // ==========================
    // Положи один файл с персонажем в полный рост:
    //   assets/character-full.jpg
    // Он будет автоматически:
    // - использован как "фото лица" (кроп сверху)
    // - и как "в полный рост" (без кропа)
    //
    // Если хочешь разные файлы:
    //   assets/character-face.jpg
    //   assets/character-full.jpg
    // Тогда просто поменяй src у faceImg ниже.
    //
    // document.getElementById("faceImg").src = "assets/character-face.jpg";

    // ==========================
    // Простые игровые термины (без пафоса)
    // ==========================
    const phrases = [
      "я не ищу объяснений. я собираю свой билд.",
      "мне не нужен знак. мне нужна ясность.",
      "меньше шума. больше точности.",
      "я выбираю то, что работает.",
      "я не ломаюсь. я настраиваюсь."
    ];

    const ROLES = ["исследователь", "сборщик", "стратег", "наблюдатель", "проводник", "ускоритель"];
    const ENERGY = ["ровная", "рывками", "высокая", "бережная", "творческая", "боевой режим"];
    const ACTION = ["сначала думаю, потом делаю", "делаю быстро, потом правлю", "делаю только когда ясно", "делаю через вдохновение"];
    const SOCIAL = ["узкий круг", "легко знакомлюсь", "мне нужна дистанция", "я лидер в общении", "я мягко веду"];
    const STRONG = ["ясность", "скорость", "интуиция", "выдержка", "влияние", "честность"];
    const WEAK = ["перегруз", "самокритика", "откладывание", "резкость", "усталость", "эмо-качели"];
    const TRIGGER = ["давление", "контроль", "неопределённость", "несправедливость", "хаос", "обесценивание"];
    const SKILL = ["держать границы", "видеть суть", "резать лишнее", "собирать план", "поднимать себя", "вести людей"];
    const BONUS = ["чувство правды", "быстрое обучение", "сильный фокус", "высокая чувствительность", "холодная голова"];
    const QUEST = ["настроить режим", "почистить окружение", "собрать цель", "усилить тело", "выстроить деньги", "сделать шаг в новое"];

    const $ = (id)=>document.getElementById(id);

    const led = $("led");
    const statusText = $("statusText");
    const scanPane = $("scanPane");
    const termLog = $("termLog");
    const termOut = $("termOut");
    const modalBack = $("modalBack");

    function pad2(n){ return String(n).padStart(2,"0"); }
    function nowStamp(){
      const d = new Date();
      return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
    }

    // лёгкий детерминизм от даты/времени (чтобы "похоже на тебя")
    function hashLike(str){
      let h = 2166136261;
      for(let i=0;i<str.length;i++){
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return (h>>>0);
    }
    function pick(list, seed){
      return list[seed % list.length];
    }

    function canScan(){
      return $("dob").value.trim().length > 0;
    }

    function setReadyState(){
      if(canScan()){
        led.classList.add("live");
        statusText.textContent = "готово";
      } else {
        led.classList.remove("live");
        statusText.textContent = "жду дату";
      }
    }

    function logLine(text){
      termLog.textContent += "\n" + text;
      termLog.parentElement.scrollTop = termLog.parentElement.scrollHeight;
    }

    function openModal(){
      modalBack.classList.add("show");
      document.body.style.overflow = "hidden";
    }
    function closeModal(){
      modalBack.classList.remove("show");
      document.body.style.overflow = "";
    }

    function buildPayload(){
      const dob = $("dob").value.trim();
      const tob = $("tob").value.trim() || "00:00";
      const seed = hashLike(`${dob}|${tob}|ADM`);
      const id = "ADM-" + String(seed).slice(0,10);

      const role = pick(ROLES, seed);
      const energy = pick(ENERGY, seed >>> 1);
      const action = pick(ACTION, seed >>> 2);
      const social = pick(SOCIAL, seed >>> 3);
      const strong = pick(STRONG, seed >>> 4);
      const weak = pick(WEAK, seed >>> 5);
      const trigger = pick(TRIGGER, seed >>> 6);
      const skill = pick(SKILL, seed >>> 7);
      const bonus = pick(BONUS, seed >>> 8);
      const quest = pick(QUEST, seed >>> 9);

      return {
        dob, tob, id,
        access: "BASIC",
        sig: "protocol // signed",
        time: nowStamp(),
        role, energy, action, social, strong, weak, trigger, skill, bonus, quest
      };
    }

    function render(p){
      // MINI
      $("p_id").textContent = p.id;
      $("p_access").textContent = p.access;
      $("p_role").textContent = p.role;
      $("p_energy").textContent = p.energy;
      $("p_sig").textContent = p.sig;
      $("p_time").textContent = p.time;

      // FULL
      $("d_role").textContent = p.role;
      $("d_action").textContent = p.action;
      $("d_social").textContent = p.social;
      $("d_strong").textContent = p.strong;
      $("d_weak").textContent = p.weak;
      $("d_trigger").textContent = p.trigger;
      $("d_skill").textContent = p.skill;
      $("d_bonus").textContent = p.bonus;
      $("d_quest").textContent = p.quest;

      termOut.innerHTML =
`<span class="muted">[scan]</span> <span class="ok">complete</span>
<span class="muted">[input]</span> dob=${p.dob}  tob=${(p.tob==="00:00" ? "—" : p.tob)}
<span class="muted">[id]</span> ${p.id}
<span class="muted">[basic]</span> роль=${p.role} | энергия=${p.energy}
<span class="muted">[traits]</span> сильное=${p.strong} | слабое=${p.weak}
<span class="muted">[trigger]</span> ${p.trigger}
<span class="muted">[skill]</span> ${p.skill}  (+${p.bonus})
<span class="muted">[quest]</span> ${p.quest}
<span class="muted">[stamp]</span> embedded
<span class="muted">[protocol]</span> ${p.sig}
<span class="muted">[time]</span> ${p.time}`;
    }

    let lastPayload = null;

    function startScan(){
      if(!canScan()){
        logLine("[warn] add: date of birth");
        statusText.textContent = "нужна дата";
        return;
      }

      // UI scan feel
      scanPane.classList.add("scanning");
      statusText.textContent = "сканирую...";
      led.classList.add("live");

      logLine("[scan] init...");
      logLine("[scan] reading input...");
      logLine("[scan] building multipass...");

      setTimeout(()=> logLine("[stamp] applied"), 520);
      setTimeout(()=> logLine("[protocol] signed"), 820);

      setTimeout(()=>{
        scanPane.classList.remove("scanning");
        statusText.textContent = "готово";
        const p = buildPayload();
        lastPayload = p;
        render(p);
        openModal();
      }, 1450);
    }

    // Manifest rotation
    function shufflePhrase(){
      const txt = phrases[Math.floor(Math.random() * phrases.length)];
      const el = $("manifestText");
      el.style.opacity = 0;
      setTimeout(()=>{
        el.textContent = txt;
        el.style.opacity = 1;
      }, 140);
    }

    // Events
    $("scanBtn").addEventListener("click", startScan);
    $("scanMainBtn").addEventListener("click", startScan);
    $("scanTopBtn").addEventListener("click", startScan);

    $("closeModal").addEventListener("click", closeModal);
    modalBack.addEventListener("click", (e)=>{ if(e.target === modalBack) closeModal(); });

    $("shuffleManifest").addEventListener("click", shufflePhrase);
    shufflePhrase();

    ["dob","tob"].forEach(id=>{
      $(id).addEventListener("input", setReadyState);
    });
    setReadyState();

    $("regenBtn").addEventListener("click", ()=>{
      if(!canScan()) return;
      const p = buildPayload();
      lastPayload = p;
      render(p);
    });

    $("copyBtn").addEventListener("click", async ()=>{
      if(!lastPayload) return;
      const t =
`MULTIPASS / ADM MODE
ID: ${lastPayload.id}
Роль: ${lastPayload.role}
Энергия: ${lastPayload.energy}
Как действуешь: ${lastPayload.action}
Общение: ${lastPayload.social}
Сильная сторона: ${lastPayload.strong}
Слабое место: ${lastPayload.weak}
Триггер: ${lastPayload.trigger}
Навык: ${lastPayload.skill}
Бонус: ${lastPayload.bonus}
Задача сейчас: ${lastPayload.quest}
Подпись: ${lastPayload.sig}
Время: ${lastPayload.time}`;
      try{
        await navigator.clipboard.writeText(t);
        termOut.innerHTML += `\n<span class="muted">[clipboard]</span> <span class="ok">copied</span>`;
      }catch(e){
        termOut.innerHTML += `\n<span class="muted">[clipboard]</span> <span class="warn">blocked</span>`;
      }
    });

    function fakeBuy(){
      // сюда позже подключим оплату/страницу тарифа
      alert("Здесь будет оплата и выдача полной расшифровки.");
    }
    $("buyBtn").addEventListener("click", fakeBuy);
    $("buyBtn2").addEventListener("click", fakeBuy);

    $("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
