<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PRTCL 108</title>
  <meta name="description" content="PRTCL 108 ‚Äî —Å–∫–∞–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–∞–≤—ã–∫–∏, –±–ª–æ–∫–µ—Ä—ã –∏ –ø—É—Ç—å –ø—Ä–æ–∫–∞—á–∫–∏."/>
  <style>
    :root{
      /* –•–æ–ª–æ–¥–Ω–∞—è —Å—Ç–∞–ª—å / –Ω–µ–±–æ / –∑–µ—Ä–∫–∞–ª–æ */
      --bg0:#050b10;
      --bg1:#070f16;
      --sky0:#0f2434;
      --sky1:#1a3a52;

      --steel0:#aab7c3;
      --steel1:#7e90a1;
      --steel2:#5e7286;

      --iceGlow:#c8f5ff;
      --iceGlow2:#dffcff;

      --warmGlass: rgba(235, 220, 205, .10);
      --danger:#ff5b6a;

      --border:rgba(255,255,255,.12);
      --glass:rgba(10,18,26,.58);
      --glass2:rgba(255,255,255,.06);

      --r14:14px;
      --r18:18px;
      --r22:22px;
      --r28:28px;

      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 10px 40px rgba(0,0,0,.42);

      --font: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display",
              "Inter", "Segoe UI", Roboto, Helvetica, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:rgba(255,255,255,.92);
      background:
        radial-gradient(1100px 800px at 20% 15%, rgba(223,252,255,.10), transparent 60%),
        radial-gradient(900px 700px at 80% 20%, rgba(126,144,161,.18), transparent 60%),
        radial-gradient(1200px 900px at 55% 95%, rgba(15,36,52,.55), transparent 65%),
        linear-gradient(180deg, var(--bg0), var(--sky0) 35%, var(--bg1) 70%, var(--bg0));
      overflow-x:hidden;
    }

    .stars{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.55;
      mix-blend-mode:screen;
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.35) 50%, transparent 52%),
        radial-gradient(1px 1px at 80% 35%, rgba(255,255,255,.25) 50%, transparent 52%),
        radial-gradient(1px 1px at 55% 12%, rgba(255,255,255,.22) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 70%, rgba(255,255,255,.20) 50%, transparent 52%),
        radial-gradient(1px 1px at 65% 82%, rgba(255,255,255,.18) 50%, transparent 52%),
        radial-gradient(1px 1px at 15% 88%, rgba(255,255,255,.16) 50%, transparent 52%),
        radial-gradient(1px 1px at 92% 78%, rgba(255,255,255,.14) 50%, transparent 52%);
      filter: blur(.1px);
    }

    .wrap{
      width:min(1180px, calc(100% - 40px));
      margin:0 auto;
      padding:22px 0 90px;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
      padding:14px 16px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow2);
      position:sticky;
      top:14px;
      z-index:50;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      font-weight:750;
    }
    .brand .mark{
      width:12px;height:12px;border-radius:4px;
      background:rgba(223,252,255,.18);
      border:1px solid rgba(223,252,255,.22);
      box-shadow:0 0 26px rgba(200,245,255,.18)
    }
    .badge{
      font-family:var(--mono);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(200,245,255,.22);
      background: rgba(200,245,255,.07);
      color: rgba(223,252,255,.95);
      white-space:nowrap;
    }
    .nav{display:flex; gap:10px; align-items:center;}
    .nav a{
      font-size:13px;
      color:rgba(255,255,255,.74);
      text-decoration:none;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid transparent;
    }
    .nav a:hover{
      color:rgba(255,255,255,.92);
      border-color:rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
    }

    .panel{
      border:1px solid var(--border);
      border-radius:var(--r28);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* HERO */
    .hero{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
      align-items:stretch;
    }
    .heroLeft{
      padding:32px 28px 22px;
      min-height:560px;
      position:relative;
    }

    /* –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞, —Å—Ç–∞–ª—å/–∑–µ—Ä–∫–∞–ª–æ */
    .centerTitle{
      position:absolute;
      left:50%;
      top:22px;
      transform:translateX(-50%);
      width:calc(100% - 40px);
      text-align:center;
      pointer-events:none;
      z-index:2;
    }
    .steelText{
      font-weight:900;
      font-size:62px;
      letter-spacing:.18em;
      text-transform:uppercase;
      margin:0;
      line-height:1.0;
      background: linear-gradient(180deg,
        rgba(255,255,255,.92),
        rgba(170,183,195,.88),
        rgba(120,140,158,.92),
        rgba(255,255,255,.65)
      );
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow:
        0 0 22px rgba(223,252,255,.10),
        0 18px 60px rgba(0,0,0,.55);
      filter: saturate(1.05) contrast(1.08);
      opacity:.95;
    }
    .steelSub{
      margin-top:10px;
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.62);
    }

    .kicker{
      margin-top:120px;
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:rgba(223,252,255,.72);
      display:flex;
      gap:12px;
      align-items:center;
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background: rgba(200,245,255,.85);
      box-shadow:0 0 18px rgba(200,245,255,.55);
    }

    h1{
      margin:14px 0 10px;
      font-size:44px;
      line-height:1.05;
      letter-spacing:.02em;
    }
    .sub{
      margin:0 0 20px;
      font-size:15px;
      line-height:1.65;
      color:rgba(255,255,255,.78);
      max-width:62ch;
    }
    .sub b{color:rgba(255,255,255,.95)}
    .ctaRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:16px;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius:var(--r14);
      padding:14px 16px;
      font-weight:800;
      letter-spacing:.02em;
      color:rgba(255,255,255,.95);
      background:
        radial-gradient(120% 160% at 20% 10%, rgba(223,252,255,.28), transparent 55%),
        linear-gradient(180deg, rgba(200,245,255,.16), rgba(200,245,255,.07));
      border:1px solid rgba(200,245,255,.22);
      box-shadow: 0 0 60px rgba(200,245,255,.10);
      transition: transform .15s ease, filter .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.06); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btnGhost{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.14);
      color:rgba(255,255,255,.82);
    }
    .micro{
      font-family:var(--mono);
      font-size:12px;
      color:rgba(255,255,255,.62);
      line-height:1.45;
    }
    .divider{
      height:1px;
      background: rgba(255,255,255,.10);
      margin:16px 0;
    }
    .miniList{display:grid; gap:10px; margin-top:8px;}
    .miniItem{display:flex; gap:10px; align-items:flex-start;}
    .chip{
      margin-top:2px;
      font-family:var(--mono);
      font-size:11px;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(200,245,255,.18);
      background: rgba(200,245,255,.06);
      color: rgba(223,252,255,.92);
      white-space:nowrap;
    }
    .miniItem div{
      color:rgba(255,255,255,.74);
      font-size:13px;
      line-height:1.45;
    }

    /* HERO RIGHT */
    .heroRight{min-height:560px; display:flex; flex-direction:column;}
    .characterFrame{flex:1; position:relative; overflow:hidden;}
    .characterFrame::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(650px 420px at 55% 25%, rgba(223,252,255,.16), transparent 60%),
        radial-gradient(780px 520px at 40% 85%, rgba(126,144,161,.18), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.00));
      pointer-events:none;
      z-index:2;
    }
    .charImg{
      position:absolute;
      inset:0;
      width:100%; height:100%;
      object-fit:cover;
      filter: contrast(1.07) saturate(1.02);
      transform: scale(1.02);
    }
    .hud{
      position:absolute;
      left:18px; right:18px; bottom:16px;
      padding:14px 14px;
      border-radius:var(--r18);
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,18,26,.60);
      backdrop-filter: blur(10px);
      z-index:3;
      display:grid;
      gap:8px;
    }
    .hudTop{display:flex; justify-content:space-between; align-items:center; gap:10px;}
    .hudTitle{
      font-weight:800;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(223,252,255,.86);
      font-family:var(--mono);
    }
    .hudTag{
      font-family:var(--mono);
      font-size:11px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(170,183,195,.22);
      background: rgba(170,183,195,.06);
      color: rgba(255,255,255,.86);
      white-space:nowrap;
    }
    .hudLine{font-size:13px; color:rgba(255,255,255,.76); line-height:1.4;}

    /* Forms / text */
    .grid2{display:grid; grid-template-columns: 1fr 1fr; gap:18px; margin-top:0; align-items:start;}
    .card{padding:22px 22px;}
    .card h2{margin:0 0 8px; font-size:18px; letter-spacing:.02em;}
    .card p{margin:0 0 14px; color:rgba(255,255,255,.72); line-height:1.6; font-size:14px;}

    .scanBox{padding:22px; position:relative; overflow:hidden;}
    .scanBox::after{
      content:"";
      position:absolute;
      left:-10%;
      width:120%;
      height:2px;
      top:20%;
      background: linear-gradient(90deg, transparent, rgba(223,252,255,.80), transparent);
      filter: blur(.4px);
      animation: scanline 3.2s ease-in-out infinite;
      opacity:.65;
      pointer-events:none;
    }
    @keyframes scanline{
      0%{ top:18%; opacity:.15;}
      40%{ top:52%; opacity:.75;}
      80%{ top:86%; opacity:.25;}
      100%{ top:18%; opacity:.12;}
    }

    form{display:grid; gap:12px; margin-top:10px;}
    .row2{display:grid; grid-template-columns: 1fr 1fr; gap:12px;}
    label{
      font-size:12px;
      color:rgba(255,255,255,.70);
      font-family:var(--mono);
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .field{display:grid; gap:8px;}
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:var(--r14);
      border:1px solid rgba(255,255,255,.14);
      outline:none;
      background: rgba(255,255,255,.05);
      color:rgba(255,255,255,.92);
      font-size:14px;
    }
    input::placeholder, textarea::placeholder{ color:rgba(255,255,255,.35); }
    .hint{font-size:12px; color:rgba(255,255,255,.60); line-height:1.45;}
    .warn{color:rgba(255,255,255,.70); font-family:var(--mono); font-size:12px;}
    .warn b{color:rgba(255,255,255,.92)}
    .warn .red{color:rgba(255,91,106,.92)}

    /* Signature */
    .contract{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius:18px;
      padding:12px;
    }
    .contractTitle{
      font-family:var(--mono);
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(223,252,255,.86);
      margin:0 0 8px;
    }
    .contractText{
      font-size:13px;
      line-height:1.55;
      color:rgba(255,255,255,.74);
      margin:0;
    }
    .sigWrap{
      margin-top:10px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      overflow:hidden;
      background: rgba(10,18,26,.48);
      position:relative;
    }
    canvas#sig{
      width:100%;
      height:110px;
      display:block;
      touch-action:none;
    }
    .sigHint{
      position:absolute;
      left:12px; top:10px;
      font-family:var(--mono);
      font-size:11px;
      color:rgba(255,255,255,.55);
      letter-spacing:.06em;
      text-transform:uppercase;
      pointer-events:none;
    }
    .sigActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
      align-items:center;
    }
    .btnMini{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius:12px;
      padding:10px 12px;
      font-weight:800;
      color:rgba(255,255,255,.88);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
    }
    .btnMini:hover{ filter:brightness(1.06); }

    /* Overlays */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.52);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:200;
    }
    .modal{
      width:min(980px, 100%);
      border:1px solid rgba(255,255,255,.14);
      border-radius:var(--r28);
      background: rgba(10,18,26,.72);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .modalHead{
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.10);
      position:relative;
    }
    .modalHead .title{
      font-family:var(--mono);
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(223,252,255,.85);
    }

    /* –ö—Ä–µ—Å—Ç–∏–∫ —Å–ø—Ä–∞–≤–∞ (—è–≤–Ω—ã–π, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π) */
    .x{
      appearance:none; border:none; cursor:pointer;
      width:40px; height:40px; border-radius:12px;
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.14);
      color:rgba(255,255,255,.90);
      font-size:18px;
      display:grid;
      place-items:center;
      margin-left:auto;
    }
    .x:hover{ filter:brightness(1.08); }
    .x:active{ transform:scale(.98); }

    /* Processing */
    .processing{ display:grid; place-items:center; }
    .procInner{ width:min(680px, 100%); padding:26px 22px; }
    .procTitle{ font-size:22px; margin:0 0 10px; letter-spacing:.02em; }
    .log{
      margin-top:14px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:14px 14px;
      background: rgba(255,255,255,.04);
      font-family:var(--mono);
      font-size:12px;
      line-height:1.65;
      color:rgba(223,252,255,.82);
      min-height:140px;
      white-space:pre-line;
    }
    .bar{
      height:10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      margin-top:12px;
    }
    .bar > i{
      display:block; height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(200,245,255,.15), rgba(223,252,255,.55), rgba(200,245,255,.15));
      box-shadow: 0 0 36px rgba(200,245,255,.18);
      transition: width .2s ease;
    }

    /* DASHBOARD */
    .dashWrap{margin-top:18px; display:none;}
    .dashHeader{padding:20px 22px;}
    .dashHeader h2{margin:0 0 6px; font-size:18px;}
    .dashHeader p{margin:0; color:rgba(255,255,255,.72); line-height:1.6; font-size:14px;}

    .dash{
      padding:18px;
      display:grid;
      grid-template-columns: .9fr 1.1fr;
      gap:18px;
      align-items:stretch;
    }
    .dashLeft{
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--r22);
      overflow:hidden;
      background: rgba(255,255,255,.03);
      position:relative;
      min-height:520px;
    }
    .dashLeft img{width:100%; height:100%; object-fit:cover;}
    .dashLeft .tag{
      position:absolute; left:14px; top:14px;
      font-family:var(--mono);
      font-size:11px;
      letter-spacing:.12em;
      text-transform:uppercase;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(223,252,255,.18);
      background: rgba(223,252,255,.06);
      color: rgba(223,252,255,.92);
    }

    .dashRight{ display:grid; gap:14px; }
    .box{
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--r22);
      background: rgba(255,255,255,.03);
      padding:16px 16px;
      position:relative;
    }
    .boxTitle{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(223,252,255,.85);
      margin-bottom:10px;
    }
    .pill{
      font-family:var(--mono);
      font-size:11px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(170,183,195,.20);
      background: rgba(170,183,195,.06);
      color: rgba(255,255,255,.86);
      white-space:nowrap;
    }
    .meter{
      display:grid;
      grid-template-columns: 140px 1fr 52px;
      gap:10px;
      align-items:center;
      padding:8px 0;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .meter:first-of-type{border-top:none}
    .meter .name{color:rgba(255,255,255,.78); font-size:13px;}
    .meter .val{font-family:var(--mono); color:rgba(223,252,255,.88); font-size:12px; text-align:right;}
    .track{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(200,245,255,.12), rgba(223,252,255,.55), rgba(200,245,255,.12));
      box-shadow: 0 0 24px rgba(200,245,255,.14);
      transition: width .35s ease;
    }

    .modeText, .blkText, .listText{
      color:rgba(255,255,255,.74);
      line-height:1.6;
      font-size:14px;
      margin:0;
    }

    .kv{
      display:grid;
      grid-template-columns: 1fr;
      gap:8px;
    }
    .kvRow{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding-top:8px;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .kvRow:first-child{border-top:none; padding-top:0;}
    .kvKey{
      font-family:var(--mono);
      font-size:11px;
      letter-spacing:.10em;
      text-transform:uppercase;
      color:rgba(223,252,255,.78);
      min-width:150px;
    }
    .kvVal{
      color:rgba(255,255,255,.72);
      font-size:13px;
      line-height:1.45;
    }

    .lockLine{
      display:flex;
      gap:10px;
      align-items:center;
      font-family:var(--mono);
      font-size:12px;
      color:rgba(255,255,255,.72);
      margin:6px 0 0;
    }
    .lockIco{
      width:26px; height:26px; border-radius:10px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
    }

    /* Locked blur block */
    .lockedBlock{
      margin-top:10px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:12px;
      background: rgba(255,255,255,.03);
      position:relative;
      overflow:hidden;
    }
    .lockedBlock .blur{
      filter: blur(6px);
      opacity:.9;
      user-select:none;
    }
    .lockedBlock .overlayLock{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:10px;
      background: radial-gradient(260px 180px at 50% 40%, rgba(223,252,255,.10), transparent 65%);
      pointer-events:none;
    }
    .unlockTag{
      font-family:var(--mono);
      font-size:11px;
      letter-spacing:.14em;
      text-transform:uppercase;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(223,252,255,.18);
      background: rgba(223,252,255,.06);
      color: rgba(223,252,255,.92);
    }
    .unlockHint{
      color:rgba(255,255,255,.66);
      font-size:13px;
      text-align:center;
      max-width:46ch;
      line-height:1.4;
    }

    .payRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:12px;
    }

    .footer{
      margin-top:18px;
      padding:18px 22px;
      display:flex;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
      color:rgba(255,255,255,.58);
      font-size:12px;
    }
    .footer .mono{ font-family:var(--mono); letter-spacing:.08em; text-transform:uppercase; }

    @media (max-width: 980px){
      .hero{ grid-template-columns: 1fr; }
      .heroLeft{ padding:28px 22px; min-height:auto;}
      .steelText{ font-size:46px; }
      h1{ font-size:38px; }
      .grid2{ grid-template-columns:1fr; }
      .dash{ grid-template-columns:1fr; }
      .kicker{ margin-top:105px; }
    }
    @media (max-width: 520px){
      .nav{ display:none; }
      .steelText{ font-size:40px; letter-spacing:.14em; }
      h1{ font-size:34px; }
      .row2{ grid-template-columns:1fr; }
      .kvKey{ min-width:120px; }
    }
  </style>
</head>

<body>
  <div class="stars" aria-hidden="true"></div>

  <div class="wrap">
    <header class="top">
      <div class="brand">
        <span class="mark"></span>
        <span>PRTCL 108</span>
        <span class="badge" id="accessBadge">access: locked</span>
      </div>
      <nav class="nav">
        <a href="#top">–í—Ö–æ–¥</a>
        <a href="#dashboard">–î–∞—à–±–æ—Ä–¥</a>
      </nav>
    </header>

    <!-- HERO / ENTRY -->
    <section class="hero" id="top">
      <div class="panel heroLeft">
        <div class="centerTitle">
          <h2 class="steelText">PRTCL 108</h2>
          <div class="steelSub">cold protocol / mirror interface</div>
        </div>

        <div class="kicker"><span class="dot"></span> –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è <span style="opacity:.55">/</span> <span style="font-family:var(--mono);opacity:.78">SCAN</span></div>
        <h1>–°–∫–∞–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.</h1>
        <p class="sub">
          –¢—ã –≤–≤–æ–¥–∏—à—å –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî PRTCL –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç <b>–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</b>: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–∞–≤—ã–∫–∏, –±–ª–æ–∫–µ—Ä—ã –∏ –ø—É—Ç—å –ø—Ä–æ–∫–∞—á–∫–∏.
          –≠—Ç–æ –Ω–µ ‚Äú–≤–µ—Ä–∞‚Äù. –≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
        </p>

        <div class="ctaRow">
          <button class="btn" id="openScan">–ù–ê–ß–ê–¢–¨ –°–ö–ê–ù</button>
          <button class="btn btnGhost" id="viewDemo">–ü–û–°–ú–û–¢–†–ï–¢–¨ –î–ê–®–ë–û–†–î</button>
          <span class="micro">single-player mode<br/>–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è</span>
        </div>

        <div class="divider"></div>

        <div class="miniList">
          <div class="miniItem"><span class="chip">CONFIG</span><div>–ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + —Ç–∏–ø —Ä–µ–∞–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã.</div></div>
          <div class="miniItem"><span class="chip">SKILLS</span><div>–ü–∞—Å—Å–∏–≤–Ω—ã–µ/–∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –∏ —Å—Ç–∏–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è.</div></div>
          <div class="miniItem"><span class="chip">BLOCKERS</span><div>–ì–¥–µ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –≤—ã–±–æ—Ä. –ü–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä ‚Äî –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ.</div></div>
          <div class="miniItem"><span class="chip">UPGRADE</span><div>–ö—É–¥–∞ –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å –ø–µ—Ä–≤—ã–º ‚Äî —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.</div></div>
        </div>

        <div class="divider"></div>

        <div class="warn"><span class="red">warning:</span> —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö–æ–ª–æ–¥–Ω—ã–º. <b>—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ</b>.</div>
      </div>

      <div class="panel heroRight">
        <div class="characterFrame">
          <img class="charImg" id="heroImg" src="assets/helm-f.jpg" alt="PRTCL character"/>
          <div class="hud">
            <div class="hudTop">
              <div class="hudTitle">character preview</div>
              <div class="hudTag" id="hudTag">FEMALE / HELM</div>
            </div>
            <div class="hudLine" id="hudLine">–û–±—Ä–∞–∑ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–º—ã—Å–ª ‚Äî —Ö–æ–ª–æ–¥–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section class="panel dashWrap" id="dashboard">
      <div class="dashHeader">
        <h2>RESULT / DASHBOARD</h2>
        <p>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ä–µ–∂–∏–º, –Ω–∞–≤—ã–∫–∏, –±–ª–æ–∫–µ—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –ó–∞–∫—Ä—ã—Ç—ã–µ —Å–ª–æ–∏ ‚Äî –ø–æ–¥ –∑–∞–º–∫–æ–º.</p>
      </div>

      <div class="dash">
        <div class="dashLeft">
          <span class="tag">current character</span>
          <img id="dashAvatar" src="assets/helm-f.jpg" alt="character"/>
        </div>

        <div class="dashRight">
          <!-- BASE -->
          <div class="box">
            <div class="boxTitle">
              <span>BASE PARAMETERS</span>
              <span class="pill" id="seedPill">seed: ‚Äî</span>
            </div>

            <div class="meter"><div class="name">Energy</div><div class="track"><div class="fill" id="mEnergy"></div></div><div class="val" id="vEnergy">‚Äî</div></div>
            <div class="meter"><div class="name">Focus</div><div class="track"><div class="fill" id="mFocus"></div></div><div class="val" id="vFocus">‚Äî</div></div>
            <div class="meter"><div class="name">Stability</div><div class="track"><div class="fill" id="mStability"></div></div><div class="val" id="vStability">‚Äî</div></div>
            <div class="meter"><div class="meter"><div class="name">Drive</div><div class="track"><div class="fill" id="mDrive"></div></div><div class="val" id="vDrive">‚Äî</div></div>
            <div class="meter"><div class="name">Adaptation</div><div class="track"><div class="fill" id="mAdapt"></div></div><div class="val" id="vAdapt">‚Äî</div></div>

            <p class="modeText" id="modeText" style="margin-top:10px;">‚Äî</p>
          </div>

          <!-- CONFIG -->
          <div class="box">
            <div class="boxTitle">
              <span>CONFIG</span>
              <span class="pill" id="modePill">‚Äî</span>
            </div>

            <div class="kv">
              <div class="kvRow"><div class="kvKey">CLASS</div><div class="kvVal"><b id="clsName">‚Äî</b><div class="listText" id="clsDesc">‚Äî</div></div></div>
              <div class="kvRow"><div class="kvKey">ROLE</div><div class="kvVal"><b id="roleName">‚Äî</b><div class="listText" id="roleDesc">‚Äî</div></div></div>
              <div class="kvRow"><div class="kvKey">TRAIT</div><div class="kvVal"><b id="traitName">‚Äî</b><div class="listText" id="traitDesc">‚Äî</div></div></div>
            </div>
          </div>

          <!-- SKILLS -->
          <div class="box">
            <div class="boxTitle">
              <span>SKILLS & PERKS</span>
              <span class="pill">public</span>
            </div>
            <div class="kv" id="skillsList"></div>
          </div>

          <!-- BLOCKERS -->
          <div class="box">
            <div class="boxTitle">
              <span>BLOCKERS</span>
              <span class="pill">partial</span>
            </div>

            <div class="lockLine">
              <span class="lockIco">üîí</span>
              <span><b id="blkName">‚Äî</b> / –¥–µ—Ä–µ–≤–æ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã ‚Äî –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —Å–ª–æ–µ</span>
            </div>

            <p class="blkText" id="blkText" style="margin-top:10px;">‚Äî</p>

            <div class="lockedBlock">
              <div class="blur">
                <div class="kv">
                  <div class="kvRow"><div class="kvKey">TRIGGER</div><div class="kvVal"><b id="t1">‚Äî</b><div class="listText" id="t1d">‚Äî</div></div></div>
                  <div class="kvRow"><div class="kvKey">LOOP</div><div class="kvVal"><b id="t2">‚Äî</b><div class="listText" id="t2d">‚Äî</div></div></div>
                  <div class="kvRow"><div class="kvKey">COUNTER</div><div class="kvVal"><b id="t3">‚Äî</b><div class="listText" id="t3d">‚Äî</div></div></div>
                </div>
              </div>

              <div class="overlayLock">
                <div class="unlockTag">CAMPAIGN MODE / LOCKED</div>
                <div class="unlockHint">–ì–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞: –¥–µ—Ä–µ–≤–æ –±–ª–æ–∫–µ—Ä–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∫–æ–Ω—Ç—Ä-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –º–∞—Ä—à—Ä—É—Ç upgrade.</div>
              </div>
            </div>

            <div class="payRow">
              <button class="btn btnGhost" id="openPaywall">–û–¢–ö–†–´–¢–¨ –ó–ê–ö–†–´–¢–´–ô –°–õ–û–ô</button>
              <span class="hint">—Ü–µ–Ω–Ω–∏–∫ —Å–∫—Ä—ã—Ç. —ç—Ç–æ –¥–µ–º–æ-–≤–æ—Ä–æ—Ç–∞.</span>
            </div>
          </div>

          <!-- QUESTS -->
          <div class="box">
            <div class="boxTitle">
              <span>QUESTS</span>
              <span class="pill">starter</span>
            </div>
            <div class="kv" id="questsList"></div>
          </div>

        </div>
      </div>
    </section>

    <footer class="panel footer">
      <div class="mono">PRTCL 108</div>
      <div>UI: <span class="mono">steel / sky / mirror</span></div>
      <div>¬© <span id="year"></span></div>
    </footer>
  </div>

  <!-- SCAN MODAL -->
  <div class="overlay" id="scanOverlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">SCAN / INITIALIZATION</div>
        <button class="x" id="closeScan" aria-label="Close">√ó</button>
      </div>

      <div class="grid2" style="padding:18px;">
        <div class="panel scanBox" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 6px;">–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö</h2>
            <p style="margin:0 0 12px;">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî –∫–ª—é—á –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –í—Ä–µ–º—è (optional) –ø–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏.</p>

            <form id="scanForm">
              <div class="row2">
                <div class="field">
                  <label for="dob">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                  <input id="dob" type="date" required/>
                </div>
                <div class="field">
                  <label for="tob">–í—Ä–µ–º—è (optional)</label>
                  <input id="tob" type="time"/>
                </div>
              </div>

              <div class="field">
                <label>–ú–∏–Ω–∏-–¥–æ–≥–æ–≤–æ—Ä</label>
                <div class="contract">
                  <div class="contractTitle">PRTCL / CONSENT</div>
                  <p class="contractText">
                    –Ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é, —á—Ç–æ –ø—Ä–æ—Ö–æ–∂—É SCAN –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ.
                    –Ø –ø–æ–Ω–∏–º–∞—é: —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
                    –Ø –±–µ—Ä—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Ä–µ—à–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∞.
                  </p>

                  <div class="sigWrap">
                    <div class="sigHint" id="sigHint">–ø–æ–¥–ø–∏—Å—å –ø–∞–ª—å—Ü–µ–º / —Å—Ç–∏–ª—É—Å–æ–º</div>
                    <canvas id="sig"></canvas>
                  </div>

                  <div class="sigActions">
                    <button class="btnMini" type="button" id="clearSig">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    <span class="hint" id="sigStatus">–ø–æ–¥–ø–∏—Å—å: –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</span>
                  </div>
                </div>
              </div>

              <button class="btn" type="submit">START SCAN ‚Üí</button>
              <div class="hint">–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (demo). –î–∞–ª—å—à–µ –ø–æ–¥–∫–ª—é—á–∏–º –∞–∫–∫–∞—É–Ω—Ç—ã/–±—ç–∫–µ–Ω–¥.</div>
            </form>
          </div>
        </div>

        <div class="panel" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 6px;">–ß—Ç–æ —Ç—ã —É–≤–∏–¥–∏—à—å</h2>
            <p style="margin:0 0 12px;">–≠—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.</p>

            <div class="kv">
              <div class="kvRow"><div class="kvKey">CONFIG</div><div class="kvVal">–∫–ª–∞—Å—Å / —Ä–æ–ª—å / —Ä–µ–∞–∫—Ü–∏—è</div></div>
              <div class="kvRow"><div class="kvKey">SKILLS</div><div class="kvVal">–Ω–∞–≤—ã–∫–∏ –∏ –¥–µ–±–∞—Ñ—Ñ—ã</div></div>
              <div class="kvRow"><div class="kvKey">BLOCKERS</div><div class="kvVal">–≥–¥–µ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –≤—ã–±–æ—Ä (–≥–ª—É–±–∏–Ω–∞ ‚Äî locked)</div></div>
              <div class="kvRow"><div class="kvKey">QUESTS</div><div class="kvVal">–ø—É—Ç—å –ø—Ä–æ–∫–∞—á–∫–∏ –≤–º–µ—Å—Ç–æ –º–æ—Ç–∏–≤–∞—Ü–∏–∏</div></div>
            </div>

            <div class="divider"></div>
            <div class="hint">–ü–æ—Å–ª–µ —Å–∫–∞–Ω–∞ —Ç—ã –ø–æ–ø–∞–¥—ë—à—å –≤ –¥–∞—à–±–æ—Ä–¥. –û—Ç—Ç—É–¥–∞ ‚Äî –≤—Ö–æ–¥ –≤ –∑–∞–∫—Ä—ã—Ç—ã–π —Å–ª–æ–π.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROCESSING OVERLAY -->
  <div class="overlay processing" id="procOverlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">PROCESSING</div>
        <button class="x" id="cancelProc" aria-label="Close">√ó</button>
      </div>
      <div class="procInner">
        <h3 class="procTitle">–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏‚Ä¶</h3>
        <div class="bar"><i id="pbar"></i></div>
        <div class="log" id="plog"></div>
        <div class="hint" style="margin-top:10px;">*–Ω–∞ –ø—Ä–æ–¥–µ –ø–æ–¥–∫–ª—é—á–∏–º —Ä–µ–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è</div>
      </div>
    </div>
  </div>

  <!-- PAYWALL OVERLAY -->
  <div class="overlay" id="payOverlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHead">
        <div class="title">CAMPAIGN MODE / ACCESS</div>
        <button class="x" id="closePay" aria-label="Close">√ó</button>
      </div>
      <div style="padding:18px;">
        <div class="panel" style="box-shadow:none;">
          <div class="card" style="padding:18px;">
            <h2 style="margin:0 0 8px;">PRTCL 108 ‚Äî CAMPAIGN MODE</h2>
            <p style="margin:0 0 12px;">
              –ó–∞–∫—Ä—ã—Ç—ã–π —Å–ª–æ–π: –¥–µ—Ä–µ–≤–æ –±–ª–æ–∫–µ—Ä–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∫–æ–Ω—Ç—Ä-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –º–∞—Ä—à—Ä—É—Ç upgrade.
            </p>

            <div class="kv">
              <div class="kvRow"><div class="kvKey">UNLOCK</div><div class="kvVal">–ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ BLOCKERS</div></div>
              <div class="kvRow"><div class="kvKey">QUESTS</div><div class="kvVal">–ø–æ—à–∞–≥–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –Ω–∞ 4‚Äì6 –Ω–µ–¥–µ–ª—å</div></div>
              <div class="kvRow"><div class="kvKey">RESCAN</div><div class="kvVal">–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–∫–∞–Ω—ã –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏</div></div>
              <div class="kvRow"><div class="kvKey">PATH</div><div class="kvVal">upgrade-–º–∞—Ä—à—Ä—É—Ç –≤–º–µ—Å—Ç–æ —Ö–∞–æ—Å–∞</div></div>
            </div>

            <div class="divider"></div>

            <div class="payRow">
              <button class="btn" id="activateCampaign">ACTIVATE ACCESS</button>
              <span class="micro">—Ü–µ–Ω–Ω–∏–∫ —Å–∫—Ä—ã—Ç. –ø–æ–¥–∫–ª—é—á–∏–º –æ–ø–ª–∞—Ç—É/–∏–Ω–≤–∞–π—Ç—ã –ø–æ–∑–∂–µ.</span>
            </div>

            <div class="hint" style="margin-top:10px;">
              *—Å–µ–π—á–∞—Å —ç—Ç–æ –¥–µ–º–æ-–∫–Ω–æ–ø–∫–∞. —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –æ–ø–ª–∞—Ç–∞/–∏–Ω–≤–∞–π—Ç—ã/–∞–∫–∫–∞—É–Ω—Ç.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const $ = (s, r=document) => r.querySelector(s);

    $("#year").textContent = new Date().getFullYear();

    const scanOverlay = $("#scanOverlay");
    const procOverlay = $("#procOverlay");
    const payOverlay  = $("#payOverlay");

    const openScan  = () => { scanOverlay.style.display = "flex"; initSignature(); };
    const closeScan = () => { scanOverlay.style.display = "none"; };

    $("#openScan").addEventListener("click", openScan);
    $("#closeScan").addEventListener("click", closeScan);

    // –ö—Ä–µ—Å—Ç–∏–∫–∏ —Å–ø—Ä–∞–≤–∞ ‚Äî —É –∫–∞–∂–¥–æ–≥–æ –æ–≤–µ—Ä–ª–µ—è
    $("#cancelProc").addEventListener("click", () => procOverlay.style.display = "none");
    $("#closePay").addEventListener("click", () => payOverlay.style.display = "none");

    // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω (–Ω–µ –Ω–∞ –º–æ–¥–∞–ª–∫—É)
    [scanOverlay, procOverlay, payOverlay].forEach(ov=>{
      ov.addEventListener("mousedown", (e)=>{
        if(e.target === ov){
          ov.style.display = "none";
        }
      });
    });

    $("#viewDemo").addEventListener("click", () => {
      ensureProfile();
      showDashboard();
      document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
    });

    $("#openPaywall").addEventListener("click", () => payOverlay.style.display = "flex");

    // Storage
    const KEY = "prtcl108_profile";
    const loadState = () => { try { return JSON.parse(localStorage.getItem(KEY) || "{}"); } catch { return {}; } };
    const saveState = (patch) => {
      const cur = loadState();
      const next = {...cur, ...patch};
      localStorage.setItem(KEY, JSON.stringify(next));
      return next;
    };

    // Deterministic seed
    function hashStr(str){
      let h = 2166136261;
      for (let i=0; i<str.length; i++){
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return (h >>> 0);
    }
    function rng(seed){
      let x = seed || 123456789;
      return () => {
        x ^= x << 13; x >>>= 0;
        x ^= x >> 17; x >>>= 0;
        x ^= x << 5;  x >>>= 0;
        return (x >>> 0) / 4294967296;
      };
    }
    const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
    const pct = (r)=>Math.round(clamp(35 + r()*60, 20, 98));

    const MODES = [
      {id:"survival",  name:"survival",  text:"–†–µ–∂–∏–º: —ç–∫–æ–Ω–æ–º–∏—è. –°–∏—Å—Ç–µ–º–∞ –¥–µ—Ä–∂–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –ù–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∞–µ—Ç –æ—Ç—Å—Ä–æ—á–∫—É."},
      {id:"stabilize", name:"stabilization", text:"–†–µ–∂–∏–º: —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è. –î–≤–∏–∂–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –æ–ø–æ—Ä—ã –∏ —Ä–∏—Ç–º–∞."},
      {id:"comp",      name:"compensation", text:"–†–µ–∂–∏–º: –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è. –í–Ω–µ—à–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–∫—Ä—ã–≤–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç. –ú–Ω–æ–≥–æ —É—Å–∏–ª–∏–π ‚Äî –º–∞–ª–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è."},
      {id:"growth",    name:"growth",    text:"–†–µ–∂–∏–º: —Ä–æ—Å—Ç. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è. –û—à–∏–±–∫–∞ ‚Äî —Ä–∞—Å–ø—ã–ª–µ–Ω–∏–µ."},
      {id:"overheat",  name:"overheat",  text:"–†–µ–∂–∏–º: –ø–µ—Ä–µ–≥—Ä–µ–≤. –ù—É–∂–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç —Å—Ä—ã–≤."},
    ];

    const CLASSES = [
      {name:"SENTINEL", desc:"–î–µ—Ä–∂–∏—Ç –≥—Ä–∞–Ω–∏—Ü—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –°–∏–ª–∞ ‚Äî —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å. –†–∏—Å–∫ ‚Äî –∂—ë—Å—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å."},
      {name:"ORACLE", desc:"–°—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö. –°–∏–ª–∞ ‚Äî —Ç–æ—á–Ω–æ—Å—Ç—å. –†–∏—Å–∫ ‚Äî –∑–∞—Å—Ç—Ä—è—Ç—å –≤ –∞–Ω–∞–ª–∏–∑–µ."},
      {name:"FORGE", desc:"–°–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏–µ. –°–∏–ª–∞ ‚Äî –Ω–∞–ø–æ—Ä. –†–∏—Å–∫ ‚Äî –≤—ã–≥–æ—Ä–∞–Ω–∏–µ."},
      {name:"SPECTRE", desc:"–ú–µ–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –ø–æ–¥ —Å—Ä–µ–¥—É. –°–∏–ª–∞ ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è. –†–∏—Å–∫ ‚Äî –ø–æ—Ç–µ—Ä—è—Ç—å —è–¥—Ä–æ."},
      {name:"CIPHER", desc:"–ñ–∏–≤—ë—Ç –≤ —Å–º—ã—Å–ª–∞—Ö –∏ –∫–æ–¥–∞—Ö. –°–∏–ª–∞ ‚Äî –≥–ª—É–±–∏–Ω–∞. –†–∏—Å–∫ ‚Äî –∏–∑–æ–ª—è—Ü–∏—è."},
    ];

    const ROLES = [
      {name:"STRATEGIST", desc:"–≤–∏–¥–∏—Ç —Å–∏—Å—Ç–µ–º—É —Ü–µ–ª–∏–∫–æ–º –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ö–æ–¥"},
      {name:"EXECUTOR", desc:"–±–µ—Ä—ë—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∏ –¥–æ–≤–æ–¥–∏—Ç –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞"},
      {name:"NEGOTIATOR", desc:"—É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤—è–∑—è–º–∏ –∏ –≤–ª–∏—è–Ω–∏–µ–º"},
      {name:"ARCHITECT", desc:"—Å—Ç—Ä–æ–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø—Ä–∞–≤–∏–ª–∞"},
      {name:"SCOUT", desc:"–Ω–∞—Ö–æ–¥–∏—Ç –º–∞—Ä—à—Ä—É—Ç—ã –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å"},
    ];

    const TRAITS = [
      {name:"COLD CLARITY", desc:"—Ö–æ–ª–æ–¥–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å. –±—ã—Å—Ç—Ä–æ –≤–∏–¥–∏—à—å –ª–æ–∂—å –∏ –∏–≥—Ä—É"},
      {name:"SILENT DRIVE", desc:"—Ç–∏—Ö–∏–π –Ω–∞–ø–æ—Ä. —Å–∏—Å—Ç–µ–º–∞ –¥–≤–∏–∂–µ—Ç—Å—è –±–µ–∑ —à—É–º–∞"},
      {name:"EDGE CONTROL", desc:"–∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ –≥—Ä–∞–Ω–∏. —Å–∏–ª–∞ –µ—Å—Ç—å, –Ω–æ –ª–µ–≥–∫–æ –∑–∞–∂–∞—Ç—å —Å–µ–±—è"},
      {name:"NEON INSTINCT", desc:"–∏–Ω—Å—Ç–∏–Ω–∫—Ç —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–Ω—å—à–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π"},
      {name:"STEEL HEART", desc:"–Ω–µ –ª–æ–º–∞–µ—Ç—Å—è –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º. —Ä–∏—Å–∫ ‚Äî –Ω–µ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å"},
    ];

    const SKILLS = [
      {tag:"ACTIVE", name:"SCAN PULSE", desc:"—Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ –º–æ–º–µ–Ω—Ç–µ. +—Ç–æ—á–Ω–æ—Å—Ç—å, -–∏–ª–ª—é–∑–∏–∏."},
      {tag:"ACTIVE", name:"BOUNDARY CUT", desc:"–æ—Ç—Ä–µ–∑–∞—Ç—å –ª–∏—à–Ω–µ–µ –±–µ–∑ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–π. –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É—Ç–µ—á–∫–∏ —ç–Ω–µ—Ä–≥–∏–∏."},
      {tag:"ACTIVE", name:"FOCUS LOCK", desc:"—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Ü–µ–ª—å –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Ä–∞—Å–ø—ã–ª–µ–Ω–∏—è."},
      {tag:"PASSIVE", name:"NOISE FILTER", desc:"—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á—É–∂–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è. –º–µ–Ω—å—à–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏."},
      {tag:"PASSIVE", name:"STABILITY CORE", desc:"–¥–µ—Ä–∂–∏—Ç –æ–ø–æ—Ä—É –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º. –ø–æ–≤—ã—à–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å."},
      {tag:"PASSIVE", name:"ADAPTIVE SKIN", desc:"–±—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å—Ä–µ–¥—É."},
      {tag:"DEBUFF", name:"OVERTHINK LOOP", desc:"–¥—É–º–∞–µ—à—å –≤–º–µ—Å—Ç–æ –¥–µ–ª–∞. —Å–Ω–∏–∂–∞–µ—Ç –∏–º–ø—É–ª—å—Å."},
      {tag:"DEBUFF", name:"CONTROL FOG", desc:"–ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞/–æ—Ç—Å—Ä–æ—á–∫–∞. —Å–∫—Ä—ã—Ç—ã–π —Å–∞–±–æ—Ç–∞–∂."},
      {tag:"DEBUFF", name:"SELF-DEVALUE", desc:"–æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ –∫–∞–∫ —Å–ø–æ—Å–æ–± —Å–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ."},
    ];

    const BLOCKERS = [
      {name:"AVOIDANCE / CONTROL", text:"–ó–∞—â–∏—Ç–∞: –∏–∑–±–µ–≥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–µ—Ç–∞–ª–µ–π –∏ –æ—Ç—Å—Ä–æ—á–∫–∏. –ò–ª–ª—é–∑–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Üí –ø–æ—Ç–µ—Ä—è –¥–≤–∏–∂–µ–Ω–∏—è."},
      {name:"SELF-DEVALUATION LOOP", text:"–ó–∞—â–∏—Ç–∞: –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ —Å–µ–±—è/—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, —á—Ç–æ–±—ã —Å–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –°–Ω–∏–º–∞–µ—Ç –±–æ–ª—å ‚Üí —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫—É."},
      {name:"OVERTHINKING LOCK", text:"–ó–∞—â–∏—Ç–∞: –¥—É–º–∞—Ç—å –≤–º–µ—Å—Ç–æ –¥–µ–ª–∞—Ç—å. –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—à–∏–±–∫–∏ ‚Üí –ª–∏—à–∞–µ—Ç –æ–ø—ã—Ç–∞."},
      {name:"PEOPLE-PLEASING MASK", text:"–ó–∞—â–∏—Ç–∞: –±—ã—Ç—å —É–¥–æ–±–Ω—ã–º —Ä–∞–¥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –¢–µ—Ä—è—é—Ç—Å—è –≥—Ä–∞–Ω–∏—Ü—ã –∏ –≥–æ–ª–æ—Å."},
      {name:"HYPER-INDEPENDENCE", text:"–ó–∞—â–∏—Ç–∞: –Ω–µ –ø—Ä–æ—Å–∏—Ç—å –∏ –Ω–µ –æ–ø–∏—Ä–∞—Ç—å—Å—è. –î–µ—Ä–∂–∏—Ç —Å–∏–ª—É ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É."},
    ];

    const TRIGGERS = [
      {t:"UNCERTAINTY", d:"–Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å. –∑–∞—â–∏—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –¥–æ –æ—Å–æ–∑–Ω–∞–Ω–∏—è"},
      {t:"HIGH STAKES", d:"–≤—ã—Å–æ–∫–∞—è —Ü–µ–Ω–∞ –æ—à–∏–±–∫–∏. –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å"},
      {t:"EXTERNAL PRESSURE", d:"–æ–∂–∏–¥–∞–Ω–∏—è –∏–∑–≤–Ω–µ. –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–∞—Å–∫—É"},
      {t:"LOSS OF CONTROL", d:"—á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–¥–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—é. —Å–∏—Å—Ç–µ–º–∞ ¬´–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–ª–∞—Å—Ç—å¬ª"},
      {t:"INTIMACY", d:"–ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ. —Å–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏—é/—Ä–æ–ª—å"},
    ];

    const COUNTERS = [
      {t:"PAUSE PROTOCOL", d:"–ø–∞—É–∑–∞ 12 —Å–µ–∫—É–Ω–¥. –≤–µ—Ä–Ω—É—Ç—å –≤—ã–±–æ—Ä –¥–æ —Ä–µ–∞–∫—Ü–∏–∏"},
      {t:"SINGLE ACTION", d:"–æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤–º–µ—Å—Ç–æ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π. —Ä–∞–∑—Ä—ã–≤ –ø–µ—Ç–ª–∏"},
      {t:"ENERGY AUDIT", d:"–Ω–∞–π—Ç–∏ —É—Ç–µ—á–∫—É –∏ –∑–∞–∫—Ä—ã—Ç—å –µ—ë"},
      {t:"BOUNDARY LINE", d:"–æ–¥–Ω–∞ —á—ë—Ç–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞. –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π"},
      {t:"TRUTH SNAP", d:"–æ–¥–Ω–∞ —Ñ—Ä–∞–∑–∞ –ø—Ä–∞–≤–¥—ã. –±–µ–∑ —É–∫—Ä–∞—à–µ–Ω–∏—è"},
    ];

    const QUESTS = [
      {tag:"QUEST", name:"LOG THE TRIGGER", desc:"48 —á–∞—Å–æ–≤ –æ—Ç–º–µ—á–∞—Ç—å –º–æ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–∞—â–∏—Ç—ã. –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞."},
      {tag:"QUEST", name:"CUT ONE NOISE", desc:"—É–±—Ä–∞—Ç—å –æ–¥–Ω—É –ª–∏—à–Ω—é—é –∑–∞–¥–∞—á—É/–∫–æ–Ω—Ç–∞–∫—Ç. –≤–µ—Ä–Ω—É—Ç—å —ç–Ω–µ—Ä–≥–∏—é."},
      {tag:"QUEST", name:"SINGLE DECISION", desc:"–ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç. –±–µ–∑ ¬´–∏–¥–µ–∞–ª—å–Ω–æ¬ª."},
      {tag:"QUEST", name:"BOUNDARY MESSAGE", desc:"–æ–¥–Ω–∞ –∫–æ—Ä–æ—Ç–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ. –±–µ–∑ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–π."},
      {tag:"QUEST", name:"RECOVERY WINDOW", desc:"30 –º–∏–Ω—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ —Å—Ç–∏–º—É–ª–æ–≤ –∏ —ç–∫—Ä–∞–Ω–∞."},
    ];

    function pick(r, arr){ return arr[Math.floor(r()*arr.length)]; }
    function pickN(r, arr, n){
      const copy = arr.slice();
      const out = [];
      for(let i=0;i<n && copy.length;i++){
        const idx = Math.floor(r()*copy.length);
        out.push(copy.splice(idx,1)[0]);
      }
      return out;
    }

    function generateProfile(dob, tob){
      const seedStr = `${dob || "0000-00-00"}|${tob || "00:00"}`;
      const seed = hashStr(seedStr);
      const r = rng(seed);

      const params = {
        energy: pct(r),
        focus: pct(r),
        stability: pct(r),
        drive: pct(r),
        adapt: pct(r),
      };

      const mode = pick(r, MODES);
      const cls  = pick(r, CLASSES);
      const role = pick(r, ROLES);
      const trait= pick(r, TRAITS);

      const skills = [
        ...pickN(r, SKILLS.filter(s=>s.tag==="ACTIVE"), 2),
        ...pickN(r, SKILLS.filter(s=>s.tag==="PASSIVE"), 2),
        ...pickN(r, SKILLS.filter(s=>s.tag==="DEBUFF"), 1),
      ];

      const blocker = pick(r, BLOCKERS);
      const tr = pickN(r, TRIGGERS, 2);
      const ct = pickN(r, COUNTERS, 1);

      const qs = pickN(r, QUESTS, 3);

      return { seedStr, seed, params, mode, cls, role, trait, skills, blocker, deep:{tr, ct}, quests: qs };
    }

    function ensureProfile(){
      const st = loadState();
      if(st && st.dob) return st;
      const demo = generateProfile("1996-08-01","01:30");
      return saveState({
        dob:"1996-08-01", tob:"01:30",
        seedStr:demo.seedStr, seed:demo.seed,
        params:demo.params, mode:demo.mode,
        cls:demo.cls, role:demo.role, trait:demo.trait,
        skills:demo.skills, blocker:demo.blocker, deep:demo.deep,
        quests:demo.quests,
        campaignUnlocked:false,
        avatar:"helm-f"
      });
    }

    function setMeter(fillId, valId, v){
      $(fillId).style.width = `${v}%`;
      $(valId).textContent = `${v}/100`;
    }

    function renderKV(el, items, mode="skill"){
      el.innerHTML = "";
      items.forEach(it=>{
        const row = document.createElement("div");
        row.className = "kvRow";
        if(mode==="skill"){
          row.innerHTML = `<div class="kvKey">${it.tag}</div><div class="kvVal"><b>${it.name}</b><div class="listText">${it.desc}</div></div>`;
        } else {
          row.innerHTML = `<div class="kvKey">${it.tag}</div><div class="kvVal"><b>${it.name}</b><div class="listText">${it.desc}</div></div>`;
        }
        el.appendChild(row);
      });
    }

    function applyDashboard(st){
      $("#seedPill").textContent = `seed: ${st.dob}${st.tob ? " " + st.tob : ""}`;
      $("#accessBadge").textContent = st.campaignUnlocked ? "access: campaign" : "access: locked";

      setMeter("#mEnergy","#vEnergy", st.params.energy);
      setMeter("#mFocus","#vFocus", st.params.focus);
      setMeter("#mStability","#vStability", st.params.stability);
      setMeter("#mDrive","#vDrive", st.params.drive);
      setMeter("#mAdapt","#vAdapt", st.params.adapt);

      $("#modePill").textContent = st.mode.name;
      $("#modeText").textContent = st.mode.text;

      $("#clsName").textContent = st.cls.name;
      $("#clsDesc").textContent = st.cls.desc;
      $("#roleName").textContent = st.role.name;
      $("#roleDesc").textContent = st.role.desc;
      $("#traitName").textContent = st.trait.name;
      $("#traitDesc").textContent = st.trait.desc;

      $("#blkName").textContent = st.blocker.name;
      $("#blkText").textContent = st.blocker.text;

      $("#t1").textContent = st.deep.tr[0].t;
      $("#t1d").textContent = st.deep.tr[0].d;
      $("#t2").textContent = st.deep.tr[1].t;
      $("#t2d").textContent = st.deep.tr[1].d;
      $("#t3").textContent = st.deep.ct[0].t;
      $("#t3d").textContent = st.deep.ct[0].d;

      renderKV($("#skillsList"), st.skills, "skill");
      renderKV($("#questsList"), st.quests, "quest");

      // avatar swap (female/male)
      const heroImg = $("#heroImg");
      const dashAvatar = $("#dashAvatar");
      const isMale = st.avatar === "helm-m";
      heroImg.src = isMale ? "assets/helm-m.jpg" : "assets/helm-f.jpg";
      dashAvatar.src = heroImg.src;
      $("#hudTag").textContent = isMale ? "MALE / HELM" : "FEMALE / HELM";
    }

    function showDashboard(){
      const st = ensureProfile();
      applyDashboard(st);
      $("#dashboard").style.display = "block";
      document.querySelector(".dashWrap").style.display = "block";
    }

    // Processing (simple)
    const plog = $("#plog");
    const pbar = $("#pbar");
    let procTimer = null;

    function openProcessing(){
      procOverlay.style.display = "flex";
      plog.textContent = "";
      pbar.style.width = "0%";
    }
    function closeProcessing(){
      procOverlay.style.display = "none";
      if(procTimer) clearInterval(procTimer);
      procTimer = null;
    }

    // Signature pad
    let sigInited = false;
    let hasSignature = false;

    function initSignature(){
      if(sigInited) return;
      sigInited = true;

      const canvas = $("#sig");
      const hint = $("#sigHint");
      const status = $("#sigStatus");
      const clearBtn = $("#clearSig");
      const ctx = canvas.getContext("2d");

      function resize(){
        const rect = canvas.getBoundingClientRect();
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);
        ctx.lineWidth = 2.2;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.strokeStyle = "rgba(223,252,255,.85)";
      }
      setTimeout(resize,0);
      window.addEventListener("resize", resize);

      let drawing=false, last=null;

      function setSigned(v){
        hasSignature = v;
        if(v){
          hint.style.display="none";
          status.textContent="–ø–æ–¥–ø–∏—Å—å: –¥–æ–±–∞–≤–ª–µ–Ω–∞";
        } else {
          hint.style.display="block";
          status.textContent="–ø–æ–¥–ø–∏—Å—å: –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞";
        }
      }

      function pos(e){
        const r = canvas.getBoundingClientRect();
        const p = (e.touches && e.touches[0]) ? e.touches[0] : e;
        return {x:p.clientX - r.left, y:p.clientY - r.top};
      }

      function start(e){ e.preventDefault(); drawing=true; last=pos(e); }
      function move(e){
        if(!drawing) return;
        e.preventDefault();
        const p=pos(e);
        ctx.beginPath();
        ctx.moveTo(last.x,last.y);
        ctx.lineTo(p.x,p.y);
        ctx.stroke();
        last=p;
        setSigned(true);
      }
      function end(e){ if(!drawing) return; e.preventDefault(); drawing=false; last=null; }

      canvas.addEventListener("mousedown", start);
      canvas.addEventListener("mousemove", move);
      window.addEventListener("mouseup", end);

      canvas.addEventListener("touchstart", start, {passive:false});
      canvas.addEventListener("touchmove", move, {passive:false});
      window.addEventListener("touchend", end, {passive:false});

      clearBtn.addEventListener("click", ()=>{
        ctx.clearRect(0,0,canvas.width,canvas.height);
        setSigned(false);
      });

      setSigned(false);
    }

    // Scan submit
    $("#scanForm").addEventListener("submit", (e)=>{
      e.preventDefault();
      const dob = $("#dob").value;
      const tob = $("#tob").value;

      if(!dob){ alert("–í–≤–µ–¥–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è."); return; }
      if(!hasSignature){ alert("–ü–æ—Å—Ç–∞–≤—å –ø–æ–¥–ø–∏—Å—å –≤ –º–∏–Ω–∏-–¥–æ–≥–æ–≤–æ—Ä–µ."); return; }

      closeScan();
      openProcessing();

      const profile = generateProfile(dob, tob);

      const lines = [
        "reading input‚Ä¶",
        "initializing model‚Ä¶",
        "mapping config‚Ä¶",
        "binding skills‚Ä¶",
        "detecting blockers‚Ä¶",
        "generating quests‚Ä¶",
        "building dashboard‚Ä¶"
      ];

      let i=0, prog=0;
      procTimer = setInterval(()=>{
        if(i < lines.length){
          plog.textContent += (plog.textContent ? "\n":"") + lines[i];
          i++;
          prog = Math.min(100, prog + Math.round(100/lines.length));
          pbar.style.width = prog + "%";
        } else {
          clearInterval(procTimer); procTimer=null;
          saveState({
            dob, tob,
            seedStr:profile.seedStr, seed:profile.seed,
            params:profile.params, mode:profile.mode,
            cls:profile.cls, role:profile.role, trait:profile.trait,
            skills:profile.skills, blocker:profile.blocker, deep:profile.deep,
            quests:profile.quests,
            campaignUnlocked:false
          });
          closeProcessing();
          showDashboard();
          document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
        }
      }, 520);
    });

    // Demo: activate campaign
    $("#activateCampaign").addEventListener("click", ()=>{
      saveState({campaignUnlocked:true});
      payOverlay.style.display = "none";
      showDashboard();
    });

    // Init
    (function init(){
      const st = loadState();
      if(st && st.dob){
        // preload last
        $("#accessBadge").textContent = st.campaignUnlocked ? "access: campaign" : "access: locked";
      }
    })();
  </script>
</body>
</html>