<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PRTCL 108 — ADM MODE</title>
  <meta name="description" content="PRTCL 108 — интерфейс самосканирования: параметры, роль, навыки и BOSS. Без мистики.">

  <style>
    :root{
      --bg0:#05070c;
      --bg1:#070b12;

      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.16);
      --stroke2: rgba(255,255,255,.22);

      --text:#e9eef7;
      --muted: rgba(233,238,247,.72);
      --dim: rgba(233,238,247,.52);

      --ice:#c8f5ff;
      --lilac:#d9c6ff;
      --pearl:#f4f1ff;
      --warn:#ffd36a;
      --ok:#86ffd6;

      --shadow: 0 24px 90px rgba(0,0,0,.55);
      --radius: 18px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 5%, rgba(217,198,255,.22), transparent 60%),
        radial-gradient(1000px 700px at 85% 10%, rgba(200,245,255,.18), transparent 60%),
        radial-gradient(900px 600px at 55% 120%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* subtle noise */
    body:before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.08'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.45;
    }

    .wrap{
      width:min(1100px, 92vw);
      margin: 0 auto;
      padding: 28px 0 70px;
    }

    /* TOP */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 18px;
    }
    .badge{
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border:1px solid var(--stroke);
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      backdrop-filter: blur(14px);
    }
    .dot{
      width:9px; height:9px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--ok), rgba(134,255,214,.1));
      box-shadow: 0 0 18px rgba(134,255,214,.35);
    }
    .badge b{ font-family:var(--mono); font-size:12px; letter-spacing:.08em; }
    .badge span{ color:var(--muted); font-size:12px; font-family:var(--mono); letter-spacing:.06em; }

    .links{ display:flex; gap:10px; flex-wrap:wrap; }
    .ghost{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      font-family: var(--mono);
      font-size:12px;
      letter-spacing:.06em;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .ghost:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.22); }

    /* HERO POSTER */
    .hero{
      position:relative;
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      overflow:hidden;
      padding: 34px 20px 20px;
      min-height: min(78vh, 720px);
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* steel frame */
    .hero:before{
      content:"";
      position:absolute; inset:10px;
      border-radius: calc(var(--radius) - 6px);
      border:1px solid rgba(255,255,255,.18);
      box-shadow:
        0 0 0 1px rgba(255,255,255,.06) inset,
        0 0 40px rgba(200,245,255,.06),
        0 0 60px rgba(217,198,255,.05);
      pointer-events:none;
      mask-image: linear-gradient(180deg, black, rgba(0,0,0,.85));
    }

    .hero:after{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 280px at 50% 22%, rgba(244,241,255,.10), transparent 60%),
        radial-gradient(520px 260px at 20% 30%, rgba(200,245,255,.14), transparent 60%),
        radial-gradient(520px 260px at 80% 35%, rgba(217,198,255,.14), transparent 60%),
        linear-gradient(90deg, rgba(255,255,255,.10), transparent 35%, rgba(255,255,255,.08));
      opacity:.55;
      pointer-events:none;
      mask-image: radial-gradient(600px 420px at 50% 20%, black, transparent 70%);
    }

    .gridlines{
      position:absolute; inset:0;
      background:
        linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px);
      background-size: 46px 46px;
      opacity:.18;
      pointer-events:none;
      mask-image: radial-gradient(720px 420px at 50% 25%, black, transparent 72%);
    }

    .poster{
      width: min(900px, 92vw);
      position:relative;
      z-index:2;
      display:flex;
      flex-direction:column;
      align-items:center;
      text-align:center;
      gap: 14px;
    }

    .title{
      line-height:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 10px;
    }

    .title h1{
      margin:0;
      font-size: clamp(52px, 9vw, 92px);
      letter-spacing: -0.04em;
      font-weight: 820;
      text-transform: uppercase;
    }

    /* mirror shimmer text */
    .shimmer{
      background: linear-gradient(90deg,
        rgba(244,241,255,.92),
        rgba(200,245,255,.98),
        rgba(217,198,255,.98),
        rgba(244,241,255,.92)
      );
      background-size: 280% 100%;
      -webkit-background-clip: text;
      background-clip:text;
      color: transparent;
      animation: shimmer 6.5s ease-in-out infinite;
      text-shadow:
        0 0 36px rgba(200,245,255,.10),
        0 0 70px rgba(217,198,255,.08);
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
    }
    @keyframes shimmer{
      0%{ background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }

    .sub{
      font-family: var(--mono);
      color: var(--muted);
      letter-spacing:.12em;
      font-size:12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }
    .sub .chip{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      padding: 6px 10px;
      border-radius: 999px;
    }

    .mantra{
      margin-top: 6px;
      font-size: 18px;
      line-height: 1.38;
      color: rgba(233,238,247,.92);
      max-width: 70ch;
    }
    .mantra b{ font-weight: 780; }
    .mantra .mono{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--dim);
      letter-spacing:.10em;
      display:block;
      margin-top:10px;
    }

    .hero-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      margin-top: 8px;
    }

    .btn{
      border:1px solid rgba(255,255,255,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.10em;
      font-size: 12px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      position:relative;
      overflow:hidden;
      min-width: 220px;
    }
    .btn:before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(140px 70px at 18% 20%, rgba(200,245,255,.22), transparent 60%),
                  radial-gradient(140px 70px at 82% 30%, rgba(217,198,255,.20), transparent 60%);
      opacity:.7;
      pointer-events:none;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.36);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .btn.primary{
      border-color: rgba(200,245,255,.35);
      box-shadow: 0 0 0 1px rgba(200,245,255,.10) inset;
    }

    .hint{
      margin-top: 8px;
      font-family: var(--mono);
      color: var(--dim);
      font-size:12px;
      letter-spacing:.06em;
    }

    /* TERMINAL reveal */
    .terminal{
      width:min(920px, 92vw);
      margin-top: 16px;
      border:1px solid rgba(255,255,255,.18);
      border-radius: var(--radius);
      background: rgba(255,255,255,.035);
      backdrop-filter: blur(14px);
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      overflow:hidden;

      transform-origin: top;
      max-height: 0;
      opacity: 0;
      transform: translateY(-10px) scaleY(.98);
      transition: max-height .65s cubic-bezier(.2,.9,.2,1),
                  opacity .35s ease,
                  transform .45s ease;
    }
    .terminal.open{
      max-height: 650px;
      opacity: 1;
      transform: translateY(0) scaleY(1);
    }

    .term-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .term-left{ display:flex; align-items:center; gap:10px; }
    .lights{ display:flex; gap:6px; }
    .light{ width:10px; height:10px; border-radius:50%; opacity:.85; }
    .l1{ background: rgba(255,120,120,.85); }
    .l2{ background: rgba(255,210,120,.85); }
    .l3{ background: rgba(120,255,200,.85); }

    .term-title{
      font-family: var(--mono);
      font-size:12px;
      letter-spacing:.12em;
      color: rgba(233,238,247,.85);
    }
    .term-right{
      display:flex; align-items:center; gap:10px;
      font-family: var(--mono);
      font-size:12px;
      color: var(--dim);
      letter-spacing:.06em;
    }
    .kbd{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(233,238,247,.78);
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.04);
      padding: 2px 8px;
      border-radius: 999px;
      display:inline-block;
      letter-spacing:.06em;
    }

    .term-body{
      padding: 14px;
      display:grid;
      gap: 12px;
    }

    .formgrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 760px){
      .formgrid{ grid-template-columns: 1fr; }
      .btn{ min-width: 100%; }
      .hero{ padding: 28px 14px 18px; }
    }

    .field{
      border:1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      background: rgba(255,255,255,.035);
      padding: 12px;
      transition: border-color .15s ease, background .15s ease;
    }
    .field:focus-within{
      border-color: rgba(200,245,255,.28);
      background: rgba(255,255,255,.05);
    }
    label{
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-family: var(--mono);
      font-size:11px;
      letter-spacing:.12em;
      color: rgba(233,238,247,.72);
      margin-bottom: 8px;
    }
    label small{
      color: var(--dim);
      letter-spacing:.06em;
      font-size:11px;
      font-family: var(--mono);
    }

    input, select{
      width:100%;
      border:0;
      outline:0;
      background: transparent;
      color: var(--text);
      font-size: 15px;
      padding: 4px 0 2px;
      font-family: var(--sans);
      appearance:none;
    }
    input::placeholder{ color: rgba(233,238,247,.35); }

    /* small toggle line */
    .toggleline{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top: 8px;
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.08em;
      color: rgba(233,238,247,.70);
      user-select:none;
    }
    .toggleline input{ width:auto; }

    .term-footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px 14px;
      border-top: 1px solid rgba(255,255,255,.10);
    }

    .note{
      font-family: var(--mono);
      color: var(--dim);
      font-size:11px;
      letter-spacing:.06em;
      max-width: 60ch;
    }

    .scanbtn{
      border:1px solid rgba(200,245,255,.30);
      background: linear-gradient(180deg, rgba(200,245,255,.16), rgba(255,255,255,.06));
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.12em;
      font-size:12px;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      white-space:nowrap;
    }
    .scanbtn:hover{
      transform: translateY(-1px);
      border-color: rgba(200,245,255,.44);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .scanbtn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    /* scanline bar */
    .scanline{
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      overflow:hidden;
      position:relative;
    }
    .scanline > i{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(217,198,255,.0), rgba(200,245,255,.65), rgba(217,198,255,.35), rgba(217,198,255,.0));
      opacity:.95;
      transition: width .7s ease;
    }

    /* SCAN BEAM overlay */
    .beam{
      position:fixed;
      inset:-20vh -10vw;
      pointer-events:none;
      opacity:0;
      z-index: 999;
      background:
        radial-gradient(1200px 380px at 50% 0%, rgba(200,245,255,.14), transparent 70%),
        linear-gradient(180deg, transparent 0%, rgba(200,245,255,.08) 40%, rgba(217,198,255,.10) 55%, transparent 100%);
      filter: blur(.2px);
      transform: translateY(-120%);
    }
    .beam.run{
      opacity:1;
      animation: beamSweep .95s ease-in-out 1;
    }
    @keyframes beamSweep{
      0%{ transform: translateY(-120%); opacity:0; }
      12%{ opacity:1; }
      55%{ opacity:1; }
      100%{ transform: translateY(120%); opacity:0; }
    }

    /* OUTPUT */
    .out{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1.12fr .88fr;
      gap: 12px;
    }
    @media (max-width: 980px){
      .out{ grid-template-columns: 1fr; }
    }

    .card{
      border:1px solid rgba(255,255,255,.16);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: 0 22px 70px rgba(0,0,0,.35);
      backdrop-filter: blur(16px);
      overflow:hidden;
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(420px 220px at 20% 10%, rgba(200,245,255,.16), transparent 60%),
        radial-gradient(420px 220px at 80% 20%, rgba(217,198,255,.14), transparent 60%),
        linear-gradient(90deg, rgba(255,255,255,.08), transparent 35%, rgba(255,255,255,.06));
      opacity:.55;
      pointer-events:none;
      mask-image: linear-gradient(180deg, black, transparent 72%);
    }
    .mp-head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      position:relative;
      z-index:2;
    }
    .mp-head .left{ display:flex; flex-direction:column; gap:6px; }
    .mp-title{
      font-family: var(--mono);
      letter-spacing:.12em;
      font-size: 12px;
      color: rgba(233,238,247,.85);
    }
    .mp-id{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--dim);
      letter-spacing:.10em;
    }
    .mp-status{
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing:.10em;
      color: rgba(134,255,214,.85);
      border:1px solid rgba(134,255,214,.22);
      background: rgba(134,255,214,.06);
      padding: 6px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }

    .mp-body{
      padding: 14px 16px 16px;
      position:relative;
      z-index:2;
      display:grid;
      gap: 12px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 600px){
      .row{ grid-template-columns: 1fr; }
    }
    .kv{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      background: rgba(255,255,255,.03);
      padding: 12px;
    }
    .k{
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.12em;
      color: rgba(233,238,247,.70);
      margin-bottom: 8px;
    }
    .v{
      font-size: 15px;
      color: rgba(233,238,247,.90);
      line-height:1.35;
    }
    .v.mono{ font-family: var(--mono); font-size: 13px; letter-spacing:.08em; color: rgba(233,238,247,.82); }

    .list{ margin: 0; padding-left: 16px; line-height:1.6; color: rgba(233,238,247,.85); }
    .list li{ margin: 6px 0; }

    /* GAME BARS */
    .bars{ display:grid; gap:10px; }
    .bar{
      display:grid;
      gap:6px;
      padding: 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
    }
    .barTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-family: var(--mono);
      letter-spacing:.10em;
      font-size: 11px;
      color: rgba(233,238,247,.78);
    }
    .barTrack{
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      overflow:hidden;
      position:relative;
    }
    .barFill{
      height:100%;
      width:0%;
      border-radius: 999px;
      background:
        linear-gradient(90deg,
          rgba(217,198,255,.22),
          rgba(200,245,255,.55),
          rgba(217,198,255,.28)
        );
      box-shadow: 0 0 22px rgba(200,245,255,.16);
      transition: width .55s ease;
    }

    .seal{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      padding: 12px 16px;
      position:relative;
      z-index:2;
    }
    .stamp{
      display:flex;
      flex-direction:column;
      gap:4px;
      border:1px dashed rgba(200,245,255,.30);
      background: rgba(200,245,255,.04);
      padding: 10px 12px;
      border-radius: 14px;
      font-family: var(--mono);
      letter-spacing:.10em;
      font-size: 11px;
      color: rgba(233,238,247,.82);
      text-transform: uppercase;
    }
    .stamp b{ color: rgba(200,245,255,.92); letter-spacing:.12em; }
    .sig{
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing:.10em;
      color: rgba(233,238,247,.60);
      text-align:right;
    }

    .aside{ padding: 16px; }
    .aside h3{ margin:0 0 8px; font-size: 14px; letter-spacing:-.01em; }
    .aside p{ margin:0; color: rgba(233,238,247,.78); line-height:1.55; }
    .tiny{
      margin-top: 10px;
      font-family: var(--mono);
      color: rgba(233,238,247,.55);
      font-size: 11px;
      letter-spacing:.06em;
    }

    /* FAQ modal */
    dialog{
      width:min(920px, 92vw);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 18px;
      background: rgba(8,10,16,.82);
      color: var(--text);
      box-shadow: 0 40px 120px rgba(0,0,0,.65);
      backdrop-filter: blur(18px);
      padding: 0;
    }
    dialog::backdrop{
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(3px);
    }
    .modal-head{
      padding: 14px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .modal-head b{
      font-family: var(--mono);
      letter-spacing:.12em;
      font-size: 12px;
      color: rgba(233,238,247,.86);
    }
    .x{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-family: var(--mono);
      letter-spacing:.06em;
      font-size: 12px;
    }
    .modal-body{
      padding: 14px;
      display:grid;
      gap: 10px;
    }
    details{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      background: rgba(255,255,255,.03);
      padding: 12px 12px;
    }
    summary{ cursor:pointer; font-weight: 650; }
    details p{
      margin: 10px 0 0;
      color: rgba(233,238,247,.78);
      line-height:1.55;
    }
  </style>
</head>

<body>
  <div class="beam" id="beam" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="badge" aria-label="PRTCL 108 status">
        <span class="dot"></span>
        <b>PRTCL 108</b>
        <span>ADM MODE</span>
      </div>

      <div class="links">
        <button class="ghost" id="btnFaq" type="button">ОТКРЫТЬ FAQ</button>
        <button class="ghost" id="btnFocus" type="button">ИНИЦИАЦИЯ</button>
      </div>
    </div>

    <section class="hero" id="hero">
      <div class="gridlines" aria-hidden="true"></div>

      <div class="poster">
        <div class="title">
          <h1 class="shimmer">PRTCL 108</h1>
          <div class="sub">
            <span class="chip">ADM MODE</span>
            <span class="chip">ЗЕРКАЛО · СТАЛЬ · ПРОТОКОЛ</span>
            <span class="chip">NO MYSTIC</span>
          </div>
        </div>

        <div class="mantra">
          <b>Я не запрашиваю допуск.</b><br/>
          <b>Я создаю протокол.</b>
          <span class="mono">STATUS: READY</span>
        </div>

        <div class="hero-actions">
          <button class="btn primary" id="btnInit" type="button">ИНИЦИИРОВАТЬ СКАН</button>
        </div>

        <div class="hint">~30 секунд · результат формируется автоматически · ясность — рарный айтем</div>

        <!-- TERMINAL -->
        <div class="terminal" id="terminal" aria-hidden="true">
          <div class="term-head">
            <div class="term-left">
              <div class="lights" aria-hidden="true">
                <span class="light l1"></span>
                <span class="light l2"></span>
                <span class="light l3"></span>
              </div>
              <div class="term-title">ТЕРМИНАЛ ИНИЦИАЦИИ</div>
            </div>
            <div class="term-right">
              <span class="kbd">ENTER</span><span>запуск</span>
            </div>
          </div>

          <div class="term-body">
            <div class="formgrid">
              <div class="field">
                <label for="dob">ДАТА АКТИВАЦИИ <small>дата рождения</small></label>
                <input id="dob" type="date" autocomplete="bday"/>
                <div class="toggleline">
                  <input id="toggleTime" type="checkbox"/>
                  <span>Указать время (если известно)</span>
                </div>
                <div id="timeWrap" class="field" style="margin-top:10px; display:none;">
                  <label for="tob">ВРЕМЯ АКТИВАЦИИ <small>опционально</small></label>
                  <input id="tob" type="time" step="60" placeholder="01:30"/>
                </div>
              </div>

              <div class="field">
                <label for="origin">ТОЧКА ПРОИСХОЖДЕНИЯ <small>выбор из списка</small></label>
                <input id="origin" list="cities" placeholder="Начни вводить город…" autocomplete="off"/>
                <datalist id="cities">
                  <option value="Нальчик, Россия"></option>
                  <option value="Москва, Россия"></option>
                  <option value="Санкт-Петербург, Россия"></option>
                  <option value="Казань, Россия"></option>
                  <option value="Екатеринбург, Россия"></option>
                  <option value="Новосибирск, Россия"></option>
                  <option value="Краснодар, Россия"></option>
                  <option value="Сочи, Россия"></option>
                  <option value="Алматы, Казахстан"></option>
                  <option value="Астана, Казахстан"></option>
                  <option value="Тбилиси, Грузия"></option>
                  <option value="Ереван, Армения"></option>
                  <option value="Бишкек, Кыргызстан"></option>
                  <option value="Минск, Беларусь"></option>
                  <option value="Киев, Украина"></option>
                  <option value="Ташкент, Узбекистан"></option>
                  <option value="Дубай, ОАЭ"></option>
                  <option value="Стамбул, Турция"></option>
                  <option value="Сеул, Южная Корея"></option>
                  <option value="Токио, Япония"></option>
                  <option value="Лондон, Великобритания"></option>
                  <option value="Берлин, Германия"></option>
                  <option value="Париж, Франция"></option>
                  <option value="Нью-Йорк, США"></option>
                  <option value="Лос-Анджелес, США"></option>
                  <option value="Майами, США"></option>
                  <option value="Денвер, США"></option>
                </datalist>
              </div>

              <div class="field">
                <label for="callsign">ИМЯ ПЕРСОНАЖА <small>можно псевдоним</small></label>
                <input id="callsign" placeholder="Например: MARATINA / ERRORLESS" autocomplete="nickname"/>
              </div>

              <div class="field">
                <label for="mode">РЕЖИМ <small>фиксирован</small></label>
                <input id="mode" value="ADM MODE" readonly/>
              </div>
            </div>

            <div class="scanline" aria-label="scan progress"><i id="scanbar"></i></div>
          </div>

          <div class="term-footer">
            <div class="note">
              Данные используются только для формирования персональной конфигурации.
              Никакие профили не создаются.
            </div>
            <button class="scanbtn" id="btnScan" type="button" disabled>ЗАПУСТИТЬ СКАН</button>
          </div>
        </div>
      </div>
    </section>

    <!-- OUTPUT -->
    <div class="out" id="output" hidden>
      <div class="card">
        <div class="mp-head">
          <div class="left">
            <div class="mp-title">MULTIPASS · PRTCL 108</div>
            <div class="mp-id" id="mpId">MP-108-—</div>
          </div>
          <div class="mp-status" id="mpStatus">STATUS: ACTIVE</div>
        </div>

        <div class="mp-body">
          <div class="row">
            <div class="kv">
              <div class="k">ИМЯ ПЕРСОНАЖА</div>
              <div class="v" id="outName">—</div>
            </div>
            <div class="kv">
              <div class="k">ТОЧКА ПРОИСХОЖДЕНИЯ</div>
              <div class="v" id="outOrigin">—</div>
            </div>
          </div>

          <div class="row">
            <div class="kv">
              <div class="k">АКТИВАЦИЯ</div>
              <div class="v mono" id="outActivation">—</div>
            </div>
            <div class="kv">
              <div class="k">КЛЮЧЕВАЯ РОЛЬ</div>
              <div class="v" id="outRole">—</div>
            </div>
          </div>

          <div class="row">
            <div class="kv">
              <div class="k">BOSS</div>
              <div class="v" id="outBoss">—</div>
              <div class="v mono" id="outPhase" style="margin-top:6px;">PHASE: —</div>
            </div>
            <div class="kv">
              <div class="k">ТЕКУЩИЙ ВЕКТОР</div>
              <div class="v" id="outVector">—</div>
            </div>
          </div>

          <div class="kv">
            <div class="k">ПАРАМЕТРЫ (ШКАЛЫ)</div>
            <div class="bars" id="outBars"></div>
          </div>

          <div class="row">
            <div class="kv">
              <div class="k">ACTIVE SKILLS</div>
              <ul class="list" id="outActive"></ul>
            </div>
            <div class="kv">
              <div class="k">PASSIVE SKILLS</div>
              <ul class="list" id="outPassive"></ul>
            </div>
          </div>
        </div>

        <div class="seal">
          <div class="stamp">
            <b>ACCESS VERIFIED</b>
            <span id="stampLine">PRTCL 108 · ADM MODE</span>
            <span id="stampDate">—</span>
          </div>
          <div class="sig">PRTCL 108<br/>SIGN: VERIFIED</div>
        </div>
      </div>

      <div class="card">
        <div class="aside">
          <h3>Готово</h3>
          <p>
            Это твой текущий билд. Без мистики. Без трактовок.
            Просто структура, с которой проще действовать точно.
          </p>
          <div class="tiny">
            Ясность — самый рарный айтем в игре.<br/>
            Здесь она появляется потому что система стала видимой.
          </div>

          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="ghost" id="btnRescan" type="button">ПЕРЕСКАНИРОВАТЬ</button>
            <button class="ghost" id="btnFaq2" type="button">СЛОВАРЬ / FAQ</button>
          </div>
        </div>
      </div>
    </div>

    <dialog id="faq">
      <div class="modal-head">
        <b>БАЗА ПРОТОКОЛА · FAQ</b>
        <button class="x" id="closeFaq" type="button">ЗАКРЫТЬ</button>
      </div>
      <div class="modal-body">
        <details open>
          <summary>Что такое PRTCL 108?</summary>
          <p>Это интерфейс самосканирования. Он показывает текущую конфигурацию: параметры, роль, навыки и <b>BOSS</b>. Без мистики, без обещаний, без «как правильно жить».</p>
        </details>

        <details>
          <summary>Что такое MULTIPASS?</summary>
          <p>Персональное удостоверение-доступ: в нём зафиксированы статус, ключевая роль, параметры (шкалы), навыки и текущий вектор.</p>
        </details>

        <details>
          <summary>Дата/время — обязательно?</summary>
          <p>Дата — да. Время — опционально. Если неизвестно, оставь пустым.</p>
        </details>

        <details>
          <summary>Active / Passive Skills?</summary>
          <p><b>Active</b> — навыки, которые ты включаешь осознанно. <b>Passive</b> — навыки, которые работают в фоне автоматически.</p>
        </details>

        <details>
          <summary>Что такое BOSS?</summary>
          <p>Это основная точка сопротивления текущего этапа. Не «проблема» и не «ты сломан». Это место, где прогресс даётся сложнее — и поэтому требует точности.</p>
        </details>

        <details>
          <summary>Это тест? Это курс?</summary>
          <p>Нет. Это статус-экран. Он показывает, что происходит сейчас.</p>
        </details>
      </div>
    </dialog>

  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const clamp = (n, a, b) => Math.max(a, Math.min(b, n));

    function hashStr(str){
      let h = 2166136261;
      for (let i=0; i<str.length; i++){
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 16777619);
      }
      return (h >>> 0);
    }
    function mulberry32(seed){
      return function(){
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ (t >>> 15), t | 1);
        t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      }
    }
    function pick(rng, arr){ return arr[Math.floor(rng()*arr.length)]; }
    function pickN(rng, arr, n){
      const a = arr.slice();
      for (let i=a.length-1; i>0; i--){
        const j = Math.floor(rng()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a.slice(0, n);
    }
    function romanTierFromPct(pct){
      const x = pct/100*5;
      const r = ["I","II","III","IV","V"];
      return r[clamp(Math.round(x)-1,0,4)];
    }

    const btnInit = $("btnInit");
    const terminal = $("terminal");
    const btnScan = $("btnScan");
    const scanbar = $("scanbar");
    const output = $("output");
    const beam = $("beam");

    const dob = $("dob");
    const tob = $("tob");
    const toggleTime = $("toggleTime");
    const timeWrap = $("timeWrap");

    const origin = $("origin");
    const callsign = $("callsign");

    const btnFaq = $("btnFaq");
    const btnFaq2 = $("btnFaq2");
    const faq = $("faq");
    const closeFaq = $("closeFaq");

    const btnFocus = $("btnFocus");
    const btnRescan = $("btnRescan");

    let terminalOpened = false;

    function openTerminal(){
      if (terminalOpened) return;
      terminalOpened = true;
      terminal.classList.add("open");
      terminal.setAttribute("aria-hidden", "false");

      scanbar.style.width = "12%";
      setTimeout(()=> scanbar.style.width = "0%", 260);

      setTimeout(()=> dob.focus(), 420);
      setTimeout(()=> terminal.scrollIntoView({behavior:"smooth", block:"nearest"}), 120);
    }

    btnInit.addEventListener("click", openTerminal);
    btnFocus.addEventListener("click", openTerminal);

    toggleTime.addEventListener("change", ()=>{
      timeWrap.style.display = toggleTime.checked ? "block" : "none";
      if (!toggleTime.checked) tob.value = "";
      validate();
    });

    function validate(){
      const ok = dob.value.trim().length > 0 &&
                 origin.value.trim().length >= 2 &&
                 callsign.value.trim().length >= 2;
      btnScan.disabled = !ok;
    }
    [dob, origin, callsign, tob].forEach(el => el.addEventListener("input", validate));

    document.addEventListener("keydown", (e)=>{
      if (!terminalOpened) return;
      if (e.key === "Enter" && !btnScan.disabled){
        e.preventDefault();
        runScan();
      }
    });

    const ROLES = [
      "ОПЕРАТОР ПРОЦЕССА",
      "АРХИТЕКТОР СИСТЕМ",
      "КАРТОГРАФ ВАРИАНТОВ",
      "СКАНЕР СРЕДЫ",
      "ИНИЦИАТОР СДВИГА",
      "СБОРЩИК РЕАЛЬНОСТИ",
      "СТАБИЛИЗАТОР ПОТОКА",
      "МОДУЛЯТОР ПОЛЯ",
      "АНАЛИТИК ГЛУБИН",
      "ОПЕРАТОР РАЗРЫВА",
      "ДЕРЖАТЕЛЬ КУРСА",
      "ХРАНИТЕЛЬ РЕСУРСА",
      "ВНЕ ПРОТОКОЛА"
    ];

    const BOSSES = [
      "ЧУЖИЕ ПРАВИЛА",
      "РАССЕИВАНИЕ ФОКУСА",
      "ПЕРЕРАСХОД РЕСУРСА",
      "ЦИКЛ ОТКЛАДЫВАНИЯ",
      "ГИПЕРКОНТРОЛЬ",
      "РАЗДВОЕННАЯ ЦЕЛЬ",
      "ПОТЕРЯ ИМПУЛЬСА",
      "НЕСТАБИЛЬНАЯ СРЕДА",
      "ЗАДЕРЖКА РЕШЕНИЯ",
      "ВНЕШНИЙ ШУМ"
    ];

    const ACTIVE_SKILLS = [
      "ХОЛОДНЫЙ АНАЛИЗ",
      "БЫСТРОЕ РЕШЕНИЕ",
      "КОНТРОЛЬ ВЕКТОРА",
      "СМЕНА ТРАЕКТОРИИ",
      "РАЗРЫВ ПАТТЕРНА",
      "ОТКЛЮЧЕНИЕ ЧУЖОЙ ЛОГИКИ",
      "СЖАТИЕ СМЫСЛА",
      "ОПЕРЕЖЕНИЕ ХОДА",
      "ПЕРЕРАСПРЕДЕЛЕНИЕ РЕСУРСА",
      "УДЕРЖАНИЕ ФОКУСА"
    ];

    const PASSIVE_SKILLS = [
      "ВНУТРЕННИЙ КАРКАС",
      "ЧУВСТВО МОМЕНТА",
      "ВНУТРЕННИЙ ЛОКАТОР",
      "ФИЛЬТРАЦИЯ ШУМА",
      "ТИХАЯ УСТОЙЧИВОСТЬ",
      "ВОЗВРАТ В ОСЬ",
      "ЭНЕРГОСБЕРЕЖЕНИЕ",
      "КОНТАКТ С СОБОЙ",
      "ВНУТРЕННЯЯ ОПОРА"
    ];

    const VECTORS = [
      "УКРЕПЛЕНИЕ ФОКУСА",
      "СТАБИЛИЗАЦИЯ РЕСУРСА",
      "ПОВЫШЕНИЕ АВТОНОМНОСТИ",
      "СНИЖЕНИЕ ВНЕШНЕГО ШУМА",
      "УСКОРЕНИЕ РЕШЕНИЙ",
      "СБОРКА ПОСЛЕДОВАТЕЛЬНОСТИ",
      "ОБНОВЛЕНИЕ ТРАЕКТОРИИ",
      "ИНТЕГРАЦИЯ ОПЫТА"
    ];

    const PARAMS = [
      "РЕСУРС",
      "ФОКУС",
      "УСТОЙЧИВОСТЬ",
      "АДАПТАЦИЯ",
      "СКОРОСТЬ РЕШЕНИЙ",
      "ТОЧНОСТЬ ВЫБОРА",
      "АВТОНОМНОСТЬ",
      "ФИЛЬТРАЦИЯ ШУМА",
      "ИМПУЛЬС ДЕЙСТВИЯ",
      "ПОСЛЕДОВАТЕЛЬНОСТЬ",
      "ВНУТРЕННЯЯ ОПОРА",
      "КОНТАКТ С СОБОЙ"
    ];

    function formatId(seed){
      const alpha = "ABCDEFGHJKMNPQRSTUVWXYZ";
      const a = alpha[seed % alpha.length];
      const n = (seed % 90) + 10;
      const s = (seed >>> 8).toString(16).toUpperCase().slice(0,3).padEnd(3,"0");
      return `MP-108-${a}${n}-${s}`;
    }

    function phaseLabel(rng){
      const phases = ["1 / 4","2 / 4","3 / 4","4 / 4"];
      return `PHASE: ${pick(rng, phases)}`;
    }

    function activationLabel(){
      const d = dob.value ? dob.value.split("-").reverse().join(".") : "—";
      const t = tob.value ? tob.value : "";
      return t ? `${d} · ${t}` : `${d}`;
    }

    function runBeam(){
      beam.classList.remove("run");
      void beam.offsetWidth;
      beam.classList.add("run");
      setTimeout(()=> beam.classList.remove("run"), 980);
    }

    let scanning = false;
    async function runScan(){
      if (scanning) return;
      scanning = true;

      btnScan.disabled = true;
      btnScan.textContent = "СКАНИРОВАНИЕ…";

      runBeam();

      scanbar.style.width = "6%";
      await new Promise(r => setTimeout(r, 150));
      scanbar.style.width = "42%";
      await new Promise(r => setTimeout(r, 380));
      scanbar.style.width = "78%";
      await new Promise(r => setTimeout(r, 420));
      scanbar.style.width = "100%";
      await new Promise(r => setTimeout(r, 240));

      generate();
      output.hidden = false;
      output.scrollIntoView({behavior:"smooth", block:"start"});

      await new Promise(r => setTimeout(r, 220));
      scanbar.style.width = "0%";

      btnScan.textContent = "ЗАПУСТИТЬ СКАН";
      scanning = false;
      validate();
    }

    btnScan.addEventListener("click", runScan);

    function generate(){
      const input = `${dob.value.trim()}|${tob.value.trim()}|${origin.value.trim()}|${callsign.value.trim()}`.toLowerCase();
      const seed = hashStr(input);
      const rng = mulberry32(seed);

      $("mpId").textContent = formatId(seed);

      const statuses = ["STATUS: ACTIVE","STATUS: CONDITIONAL","STATUS: LIMITED","STATUS: UNSTABLE"];
      const status = pick(rng, statuses);
      $("mpStatus").textContent = status;

      $("outName").textContent = callsign.value.trim();
      $("outOrigin").textContent = origin.value.trim();
      $("outActivation").textContent = activationLabel();

      $("outRole").textContent = pick(rng, ROLES);
      $("outBoss").textContent = pick(rng, BOSSES);
      $("outPhase").textContent = phaseLabel(rng);

      $("outVector").textContent = pick(rng, VECTORS);

      // Bars: show 8 params
      const chosen = pickN(rng, PARAMS, 8);
      const barsWrap = $("outBars");
      barsWrap.innerHTML = "";

      chosen.forEach(name=>{
        const pct = Math.floor(45 + rng()*50); // 45..95
        const tier = romanTierFromPct(pct);

        const el = document.createElement("div");
        el.className = "bar";
        el.innerHTML = `
          <div class="barTop">
            <span>${name}</span>
            <span>${tier} / ${pct}%</span>
          </div>
          <div class="barTrack"><div class="barFill" style="width:0%"></div></div>
        `;
        barsWrap.appendChild(el);

        // animate fill
        const fill = el.querySelector(".barFill");
        requestAnimationFrame(()=> { fill.style.width = pct + "%"; });
      });

      const active = pickN(rng, ACTIVE_SKILLS, 3 + Math.floor(rng()*3)); // 3..5
      const passive = pickN(rng, PASSIVE_SKILLS, 2 + Math.floor(rng()*3)); // 2..4

      const ulA = $("outActive"); ulA.innerHTML = "";
      active.forEach(x=>{ const li=document.createElement("li"); li.textContent=x; ulA.appendChild(li); });

      const ulP = $("outPassive"); ulP.innerHTML = "";
      passive.forEach(x=>{ const li=document.createElement("li"); li.textContent=x; ulP.appendChild(li); });

      const now = new Date();
      const dd = String(now.getDate()).padStart(2,"0");
      const mm = String(now.getMonth()+1).padStart(2,"0");
      const yyyy = now.getFullYear();
      $("stampDate").textContent = `DATE: ${dd}.${mm}.${yyyy}`;
      $("stampLine").textContent = `PRTCL 108 · ${status.replace("STATUS: ","")}`;
    }

    btnRescan.addEventListener("click", () => {
      output.hidden = true;
      openTerminal();
    });

    function openFaq(){ faq.showModal(); }
    function closeFaqFn(){ faq.close(); }

    btnFaq.addEventListener("click", openFaq);
    btnFaq2.addEventListener("click", openFaq);
    closeFaq.addEventListener("click", closeFaqFn);

    faq.addEventListener("click", (e)=>{
      const rect = faq.getBoundingClientRect();
      const inDialog = (rect.top <= e.clientY && e.clientY <= rect.top + rect.height &&
                        rect.left <= e.clientX && e.clientX <= rect.left + rect.width);
      if (!inDialog) faq.close();
    });
  </script>
</body>
</html>